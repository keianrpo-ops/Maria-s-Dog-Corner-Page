!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="8f76f10f-0404-40ed-ab2a-e12a2cf343e0",e._sentryDebugIdIdentifier="sentry-dbid-8f76f10f-0404-40ed-ab2a-e12a2cf343e0")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"9b8681f1"},(()=>{var e={21781:e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var a,l=[],u=!1,c=-1;function h(){u&&a&&(u=!1,a.length?l=a.concat(l):c=-1,l.length&&d())}function d(){if(!u){var e=s(h);u=!0;for(var t=l.length;t;){for(a=l,l=[];++c<t;)a&&a[c].run();c=-1,t=l.length}a=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||u||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};r.r(e),r.d(e,{VERSION:()=>t,after:()=>Mt,all:()=>Xt,allKeys:()=>fe,any:()=>Qt,assign:()=>Me,before:()=>Pt,bind:()=>wt,bindAll:()=>It,chain:()=>mt,chunk:()=>Lr,clone:()=>De,collect:()=>Gt,compact:()=>Cr,compose:()=>Tt,constant:()=>Y,contains:()=>er,countBy:()=>dr,create:()=>Le,debounce:()=>Et,default:()=>Ur,defaults:()=>Pe,defer:()=>xt,delay:()=>_t,detect:()=>Wt,difference:()=>xr,drop:()=>kr,each:()=>Vt,escape:()=>it,every:()=>Xt,extend:()=>Te,extendOwn:()=>Me,filter:()=>Yt,find:()=>Wt,findIndex:()=>jt,findKey:()=>Lt,findLastIndex:()=>Ut,findWhere:()=>$t,first:()=>Sr,flatten:()=>_r,foldl:()=>Kt,foldr:()=>Zt,forEach:()=>Vt,functions:()=>Ae,get:()=>qe,groupBy:()=>cr,has:()=>ze,head:()=>Sr,identity:()=>We,include:()=>er,includes:()=>er,indexBy:()=>hr,indexOf:()=>qt,initial:()=>wr,inject:()=>Kt,intersection:()=>Rr,invert:()=>Ee,invoke:()=>tr,isArguments:()=>J,isArray:()=>$,isArrayBuffer:()=>L,isBoolean:()=>x,isDataView:()=>W,isDate:()=>T,isElement:()=>O,isEmpty:()=>se,isEqual:()=>pe,isError:()=>P,isFinite:()=>K,isFunction:()=>U,isMap:()=>ke,isMatch:()=>ae,isNaN:()=>Z,isNull:()=>C,isNumber:()=>R,isObject:()=>I,isRegExp:()=>M,isSet:()=>Ce,isString:()=>A,isSymbol:()=>N,isTypedArray:()=>re,isUndefined:()=>_,isWeakMap:()=>Ie,isWeakSet:()=>_e,iteratee:()=>Ke,keys:()=>oe,last:()=>Ir,lastIndexOf:()=>zt,map:()=>Gt,mapObject:()=>Ye,matcher:()=>$e,matches:()=>$e,max:()=>ir,memoize:()=>Ct,methods:()=>Ae,min:()=>or,mixin:()=>jr,negate:()=>Rt,noop:()=>He,now:()=>tt,object:()=>Pr,omit:()=>br,once:()=>Nt,pairs:()=>Oe,partial:()=>bt,partition:()=>pr,pick:()=>yr,pluck:()=>rr,property:()=>Ve,propertyOf:()=>Xe,random:()=>et,range:()=>Nr,reduce:()=>Kt,reduceRight:()=>Zt,reject:()=>Ht,rest:()=>kr,restArguments:()=>k,result:()=>pt,sample:()=>sr,select:()=>Yt,shuffle:()=>ar,size:()=>mr,some:()=>Qt,sortBy:()=>lr,sortedIndex:()=>Ft,tail:()=>kr,take:()=>Sr,tap:()=>je,template:()=>dt,templateSettings:()=>st,throttle:()=>Ot,times:()=>Qe,toArray:()=>gr,toPath:()=>Ue,transpose:()=>Tr,unescape:()=>ot,union:()=>Ar,uniq:()=>Er,unique:()=>Er,uniqueId:()=>gt,unzip:()=>Tr,values:()=>xe,where:()=>nr,without:()=>Or,wrap:()=>At,zip:()=>Mr});var t="1.13.1",n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},i=Array.prototype,o=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,a=i.push,l=i.slice,u=o.toString,c=o.hasOwnProperty,h="undefined"!=typeof ArrayBuffer,d="undefined"!=typeof DataView,p=Array.isArray,f=Object.keys,g=Object.create,m=h&&ArrayBuffer.isView,v=isNaN,y=isFinite,b=!{toString:null}.propertyIsEnumerable("toString"),w=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],S=Math.pow(2,53)-1;function k(e,t){return t=null==t?e.length-1:+t,function(){for(var r=Math.max(arguments.length-t,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=n,e.apply(this,o)}}function I(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function C(e){return null===e}function _(e){return void 0===e}function x(e){return!0===e||!1===e||"[object Boolean]"===u.call(e)}function O(e){return!(!e||1!==e.nodeType)}function E(e){var t="[object "+e+"]";return function(e){return u.call(e)===t}}const A=E("String"),R=E("Number"),T=E("Date"),M=E("RegExp"),P=E("Error"),N=E("Symbol"),L=E("ArrayBuffer");var D=E("Function"),j=n.document&&n.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof j&&(D=function(e){return"function"==typeof e||!1});const U=D,F=E("Object");var B=d&&F(new DataView(new ArrayBuffer(8))),q="undefined"!=typeof Map&&F(new Map),z=E("DataView");const W=B?function(e){return null!=e&&U(e.getInt8)&&L(e.buffer)}:z,$=p||E("Array");function V(e,t){return null!=e&&c.call(e,t)}var G=E("Arguments");!function(){G(arguments)||(G=function(e){return V(e,"callee")})}();const J=G;function K(e){return!N(e)&&y(e)&&!isNaN(parseFloat(e))}function Z(e){return R(e)&&v(e)}function Y(e){return function(){return e}}function H(e){return function(t){var r=e(t);return"number"==typeof r&&r>=0&&r<=S}}function X(e){return function(t){return null==t?void 0:t[e]}}const Q=X("byteLength"),ee=H(Q);var te=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const re=h?function(e){return m?m(e)&&!W(e):ee(e)&&te.test(u.call(e))}:Y(!1),ne=X("length");function ie(e,t){t=function(e){for(var t={},r=e.length,n=0;n<r;++n)t[e[n]]=!0;return{contains:function(e){return t[e]},push:function(r){return t[r]=!0,e.push(r)}}}(t);var r=w.length,n=e.constructor,i=U(n)&&n.prototype||o,s="constructor";for(V(e,s)&&!t.contains(s)&&t.push(s);r--;)(s=w[r])in e&&e[s]!==i[s]&&!t.contains(s)&&t.push(s)}function oe(e){if(!I(e))return[];if(f)return f(e);var t=[];for(var r in e)V(e,r)&&t.push(r);return b&&ie(e,t),t}function se(e){if(null==e)return!0;var t=ne(e);return"number"==typeof t&&($(e)||A(e)||J(e))?0===t:0===ne(oe(e))}function ae(e,t){var r=oe(t),n=r.length;if(null==e)return!n;for(var i=Object(e),o=0;o<n;o++){var s=r[o];if(t[s]!==i[s]||!(s in i))return!1}return!0}function le(e){return e instanceof le?e:this instanceof le?void(this._wrapped=e):new le(e)}function ue(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Q(e))}le.VERSION=t,le.prototype.value=function(){return this._wrapped},le.prototype.valueOf=le.prototype.toJSON=le.prototype.value,le.prototype.toString=function(){return String(this._wrapped)};var ce="[object DataView]";function he(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var i=typeof e;return("function"===i||"object"===i||"object"==typeof t)&&de(e,t,r,n)}function de(e,t,r,n){e instanceof le&&(e=e._wrapped),t instanceof le&&(t=t._wrapped);var i=u.call(e);if(i!==u.call(t))return!1;if(B&&"[object Object]"==i&&W(e)){if(!W(t))return!1;i=ce}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return s.valueOf.call(e)===s.valueOf.call(t);case"[object ArrayBuffer]":case ce:return de(ue(e),ue(t),r,n)}var o="[object Array]"===i;if(!o&&re(e)){if(Q(e)!==Q(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,l=t.constructor;if(a!==l&&!(U(a)&&a instanceof a&&U(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}n=n||[];for(var c=(r=r||[]).length;c--;)if(r[c]===e)return n[c]===t;if(r.push(e),n.push(t),o){if((c=e.length)!==t.length)return!1;for(;c--;)if(!he(e[c],t[c],r,n))return!1}else{var h,d=oe(e);if(c=d.length,oe(t).length!==c)return!1;for(;c--;)if(!V(t,h=d[c])||!he(e[h],t[h],r,n))return!1}return r.pop(),n.pop(),!0}function pe(e,t){return he(e,t)}function fe(e){if(!I(e))return[];var t=[];for(var r in e)t.push(r);return b&&ie(e,t),t}function ge(e){var t=ne(e);return function(r){if(null==r)return!1;var n=fe(r);if(ne(n))return!1;for(var i=0;i<t;i++)if(!U(r[e[i]]))return!1;return e!==we||!U(r[me])}}var me="forEach",ve=["clear","delete"],ye=["get","has","set"],be=ve.concat(me,ye),we=ve.concat(ye),Se=["add"].concat(ve,me,"has");const ke=q?ge(be):E("Map"),Ie=q?ge(we):E("WeakMap"),Ce=q?ge(Se):E("Set"),_e=E("WeakSet");function xe(e){for(var t=oe(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=e[t[i]];return n}function Oe(e){for(var t=oe(e),r=t.length,n=Array(r),i=0;i<r;i++)n[i]=[t[i],e[t[i]]];return n}function Ee(e){for(var t={},r=oe(e),n=0,i=r.length;n<i;n++)t[e[r[n]]]=r[n];return t}function Ae(e){var t=[];for(var r in e)U(e[r])&&t.push(r);return t.sort()}function Re(e,t){return function(r){var n=arguments.length;if(t&&(r=Object(r)),n<2||null==r)return r;for(var i=1;i<n;i++)for(var o=arguments[i],s=e(o),a=s.length,l=0;l<a;l++){var u=s[l];t&&void 0!==r[u]||(r[u]=o[u])}return r}}const Te=Re(fe),Me=Re(oe),Pe=Re(fe,!0);function Ne(e){if(!I(e))return{};if(g)return g(e);var t=function(){};t.prototype=e;var r=new t;return t.prototype=null,r}function Le(e,t){var r=Ne(e);return t&&Me(r,t),r}function De(e){return I(e)?$(e)?e.slice():Te({},e):e}function je(e,t){return t(e),e}function Ue(e){return $(e)?e:[e]}function Fe(e){return le.toPath(e)}function Be(e,t){for(var r=t.length,n=0;n<r;n++){if(null==e)return;e=e[t[n]]}return r?e:void 0}function qe(e,t,r){var n=Be(e,Fe(t));return _(n)?r:n}function ze(e,t){for(var r=(t=Fe(t)).length,n=0;n<r;n++){var i=t[n];if(!V(e,i))return!1;e=e[i]}return!!r}function We(e){return e}function $e(e){return e=Me({},e),function(t){return ae(t,e)}}function Ve(e){return e=Fe(e),function(t){return Be(t,e)}}function Ge(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o)}}return function(){return e.apply(t,arguments)}}function Je(e,t,r){return null==e?We:U(e)?Ge(e,t,r):I(e)&&!$(e)?$e(e):Ve(e)}function Ke(e,t){return Je(e,t,1/0)}function Ze(e,t,r){return le.iteratee!==Ke?le.iteratee(e,t):Je(e,t,r)}function Ye(e,t,r){t=Ze(t,r);for(var n=oe(e),i=n.length,o={},s=0;s<i;s++){var a=n[s];o[a]=t(e[a],a,e)}return o}function He(){}function Xe(e){return null==e?He:function(t){return qe(e,t)}}function Qe(e,t,r){var n=Array(Math.max(0,e));t=Ge(t,r,1);for(var i=0;i<e;i++)n[i]=t(i);return n}function et(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}le.toPath=Ue,le.iteratee=Ke;const tt=Date.now||function(){return(new Date).getTime()};function rt(e){var t=function(t){return e[t]},r="(?:"+oe(e).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(i,t):e}}const nt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},it=rt(nt),ot=rt(Ee(nt)),st=le.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var at=/(.)^/,lt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ut=/\\|'|\r|\n|\u2028|\u2029/g;function ct(e){return"\\"+lt[e]}var ht=/^\s*(\w|\$)+\s*$/;function dt(e,t,r){!t&&r&&(t=r),t=Pe({},t,le.templateSettings);var n=RegExp([(t.escape||at).source,(t.interpolate||at).source,(t.evaluate||at).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(n,(function(t,r,n,s,a){return o+=e.slice(i,a).replace(ut,ct),i=a+t.length,r?o+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?o+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t})),o+="';\n";var s,a=t.variable;if(a){if(!ht.test(a))throw new Error("variable is not a bare identifier: "+a)}else o="with(obj||{}){\n"+o+"}\n",a="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{s=new Function(a,"_",o)}catch(e){throw e.source=o,e}var l=function(e){return s.call(this,e,le)};return l.source="function("+a+"){\n"+o+"}",l}function pt(e,t,r){var n=(t=Fe(t)).length;if(!n)return U(r)?r.call(e):r;for(var i=0;i<n;i++){var o=null==e?void 0:e[t[i]];void 0===o&&(o=r,i=n),e=U(o)?o.call(e):o}return e}var ft=0;function gt(e){var t=++ft+"";return e?e+t:t}function mt(e){var t=le(e);return t._chain=!0,t}function vt(e,t,r,n,i){if(!(n instanceof t))return e.apply(r,i);var o=Ne(e.prototype),s=e.apply(o,i);return I(s)?s:o}var yt=k((function(e,t){var r=yt.placeholder,n=function(){for(var i=0,o=t.length,s=Array(o),a=0;a<o;a++)s[a]=t[a]===r?arguments[i++]:t[a];for(;i<arguments.length;)s.push(arguments[i++]);return vt(e,n,this,this,s)};return n}));yt.placeholder=le;const bt=yt,wt=k((function(e,t,r){if(!U(e))throw new TypeError("Bind must be called on a function");var n=k((function(i){return vt(e,n,t,this,r.concat(i))}));return n})),St=H(ne);function kt(e,t,r,n){if(n=n||[],t||0===t){if(t<=0)return n.concat(e)}else t=1/0;for(var i=n.length,o=0,s=ne(e);o<s;o++){var a=e[o];if(St(a)&&($(a)||J(a)))if(t>1)kt(a,t-1,r,n),i=n.length;else for(var l=0,u=a.length;l<u;)n[i++]=a[l++];else r||(n[i++]=a)}return n}const It=k((function(e,t){var r=(t=kt(t,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=t[r];e[n]=wt(e[n],e)}return e}));function Ct(e,t){var r=function(n){var i=r.cache,o=""+(t?t.apply(this,arguments):n);return V(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return r.cache={},r}const _t=k((function(e,t,r){return setTimeout((function(){return e.apply(null,r)}),t)})),xt=bt(_t,le,1);function Ot(e,t,r){var n,i,o,s,a=0;r||(r={});var l=function(){a=!1===r.leading?0:tt(),n=null,s=e.apply(i,o),n||(i=o=null)},u=function(){var u=tt();a||!1!==r.leading||(a=u);var c=t-(u-a);return i=this,o=arguments,c<=0||c>t?(n&&(clearTimeout(n),n=null),a=u,s=e.apply(i,o),n||(i=o=null)):n||!1===r.trailing||(n=setTimeout(l,c)),s};return u.cancel=function(){clearTimeout(n),a=0,n=i=o=null},u}function Et(e,t,r){var n,i,o,s,a,l=function(){var u=tt()-i;t>u?n=setTimeout(l,t-u):(n=null,r||(s=e.apply(a,o)),n||(o=a=null))},u=k((function(u){return a=this,o=u,i=tt(),n||(n=setTimeout(l,t),r&&(s=e.apply(a,o))),s}));return u.cancel=function(){clearTimeout(n),n=o=a=null},u}function At(e,t){return bt(t,e)}function Rt(e){return function(){return!e.apply(this,arguments)}}function Tt(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}}function Mt(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Pt(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}}const Nt=bt(Pt,2);function Lt(e,t,r){t=Ze(t,r);for(var n,i=oe(e),o=0,s=i.length;o<s;o++)if(t(e[n=i[o]],n,e))return n}function Dt(e){return function(t,r,n){r=Ze(r,n);for(var i=ne(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(r(t[o],o,t))return o;return-1}}const jt=Dt(1),Ut=Dt(-1);function Ft(e,t,r,n){for(var i=(r=Ze(r,n,1))(t),o=0,s=ne(e);o<s;){var a=Math.floor((o+s)/2);r(e[a])<i?o=a+1:s=a}return o}function Bt(e,t,r){return function(n,i,o){var s=0,a=ne(n);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+a,s):a=o>=0?Math.min(o+1,a):o+a+1;else if(r&&o&&a)return n[o=r(n,i)]===i?o:-1;if(i!=i)return(o=t(l.call(n,s,a),Z))>=0?o+s:-1;for(o=e>0?s:a-1;o>=0&&o<a;o+=e)if(n[o]===i)return o;return-1}}const qt=Bt(1,jt,Ft),zt=Bt(-1,Ut);function Wt(e,t,r){var n=(St(e)?jt:Lt)(e,t,r);if(void 0!==n&&-1!==n)return e[n]}function $t(e,t){return Wt(e,$e(t))}function Vt(e,t,r){var n,i;if(t=Ge(t,r),St(e))for(n=0,i=e.length;n<i;n++)t(e[n],n,e);else{var o=oe(e);for(n=0,i=o.length;n<i;n++)t(e[o[n]],o[n],e)}return e}function Gt(e,t,r){t=Ze(t,r);for(var n=!St(e)&&oe(e),i=(n||e).length,o=Array(i),s=0;s<i;s++){var a=n?n[s]:s;o[s]=t(e[a],a,e)}return o}function Jt(e){return function(t,r,n,i){var o=arguments.length>=3;return function(t,r,n,i){var o=!St(t)&&oe(t),s=(o||t).length,a=e>0?0:s-1;for(i||(n=t[o?o[a]:a],a+=e);a>=0&&a<s;a+=e){var l=o?o[a]:a;n=r(n,t[l],l,t)}return n}(t,Ge(r,i,4),n,o)}}const Kt=Jt(1),Zt=Jt(-1);function Yt(e,t,r){var n=[];return t=Ze(t,r),Vt(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function Ht(e,t,r){return Yt(e,Rt(Ze(t)),r)}function Xt(e,t,r){t=Ze(t,r);for(var n=!St(e)&&oe(e),i=(n||e).length,o=0;o<i;o++){var s=n?n[o]:o;if(!t(e[s],s,e))return!1}return!0}function Qt(e,t,r){t=Ze(t,r);for(var n=!St(e)&&oe(e),i=(n||e).length,o=0;o<i;o++){var s=n?n[o]:o;if(t(e[s],s,e))return!0}return!1}function er(e,t,r,n){return St(e)||(e=xe(e)),("number"!=typeof r||n)&&(r=0),qt(e,t,r)>=0}const tr=k((function(e,t,r){var n,i;return U(t)?i=t:(t=Fe(t),n=t.slice(0,-1),t=t[t.length-1]),Gt(e,(function(e){var o=i;if(!o){if(n&&n.length&&(e=Be(e,n)),null==e)return;o=e[t]}return null==o?o:o.apply(e,r)}))}));function rr(e,t){return Gt(e,Ve(t))}function nr(e,t){return Yt(e,$e(t))}function ir(e,t,r){var n,i,o=-1/0,s=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=St(e)?e:xe(e)).length;a<l;a++)null!=(n=e[a])&&n>o&&(o=n);else t=Ze(t,r),Vt(e,(function(e,r,n){((i=t(e,r,n))>s||i===-1/0&&o===-1/0)&&(o=e,s=i)}));return o}function or(e,t,r){var n,i,o=1/0,s=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=St(e)?e:xe(e)).length;a<l;a++)null!=(n=e[a])&&n<o&&(o=n);else t=Ze(t,r),Vt(e,(function(e,r,n){((i=t(e,r,n))<s||i===1/0&&o===1/0)&&(o=e,s=i)}));return o}function sr(e,t,r){if(null==t||r)return St(e)||(e=xe(e)),e[et(e.length-1)];var n=St(e)?De(e):xe(e),i=ne(n);t=Math.max(Math.min(t,i),0);for(var o=i-1,s=0;s<t;s++){var a=et(s,o),l=n[s];n[s]=n[a],n[a]=l}return n.slice(0,t)}function ar(e){return sr(e,1/0)}function lr(e,t,r){var n=0;return t=Ze(t,r),rr(Gt(e,(function(e,r,i){return{value:e,index:n++,criteria:t(e,r,i)}})).sort((function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index})),"value")}function ur(e,t){return function(r,n,i){var o=t?[[],[]]:{};return n=Ze(n,i),Vt(r,(function(t,i){var s=n(t,i,r);e(o,t,s)})),o}}const cr=ur((function(e,t,r){V(e,r)?e[r].push(t):e[r]=[t]})),hr=ur((function(e,t,r){e[r]=t})),dr=ur((function(e,t,r){V(e,r)?e[r]++:e[r]=1})),pr=ur((function(e,t,r){e[r?0:1].push(t)}),!0);var fr=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function gr(e){return e?$(e)?l.call(e):A(e)?e.match(fr):St(e)?Gt(e,We):xe(e):[]}function mr(e){return null==e?0:St(e)?e.length:oe(e).length}function vr(e,t,r){return t in r}const yr=k((function(e,t){var r={},n=t[0];if(null==e)return r;U(n)?(t.length>1&&(n=Ge(n,t[1])),t=fe(e)):(n=vr,t=kt(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var s=t[i],a=e[s];n(a,s,e)&&(r[s]=a)}return r})),br=k((function(e,t){var r,n=t[0];return U(n)?(n=Rt(n),t.length>1&&(r=t[1])):(t=Gt(kt(t,!1,!1),String),n=function(e,r){return!er(t,r)}),yr(e,n,r)}));function wr(e,t,r){return l.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))}function Sr(e,t,r){return null==e||e.length<1?null==t||r?void 0:[]:null==t||r?e[0]:wr(e,e.length-t)}function kr(e,t,r){return l.call(e,null==t||r?1:t)}function Ir(e,t,r){return null==e||e.length<1?null==t||r?void 0:[]:null==t||r?e[e.length-1]:kr(e,Math.max(0,e.length-t))}function Cr(e){return Yt(e,Boolean)}function _r(e,t){return kt(e,t,!1)}const xr=k((function(e,t){return t=kt(t,!0,!0),Yt(e,(function(e){return!er(t,e)}))})),Or=k((function(e,t){return xr(e,t)}));function Er(e,t,r,n){x(t)||(n=r,r=t,t=!1),null!=r&&(r=Ze(r,n));for(var i=[],o=[],s=0,a=ne(e);s<a;s++){var l=e[s],u=r?r(l,s,e):l;t&&!r?(s&&o===u||i.push(l),o=u):r?er(o,u)||(o.push(u),i.push(l)):er(i,l)||i.push(l)}return i}const Ar=k((function(e){return Er(kt(e,!0,!0))}));function Rr(e){for(var t=[],r=arguments.length,n=0,i=ne(e);n<i;n++){var o=e[n];if(!er(t,o)){var s;for(s=1;s<r&&er(arguments[s],o);s++);s===r&&t.push(o)}}return t}function Tr(e){for(var t=e&&ir(e,ne).length||0,r=Array(t),n=0;n<t;n++)r[n]=rr(e,n);return r}const Mr=k(Tr);function Pr(e,t){for(var r={},n=0,i=ne(e);n<i;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r}function Nr(e,t,r){null==t&&(t=e||0,e=0),r||(r=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/r),0),i=Array(n),o=0;o<n;o++,e+=r)i[o]=e;return i}function Lr(e,t){if(null==t||t<1)return[];for(var r=[],n=0,i=e.length;n<i;)r.push(l.call(e,n,n+=t));return r}function Dr(e,t){return e._chain?le(t).chain():t}function jr(e){return Vt(Ae(e),(function(t){var r=le[t]=e[t];le.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),Dr(this,r.apply(le,e))}})),le}Vt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=i[e];le.prototype[e]=function(){var r=this._wrapped;return null!=r&&(t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0]),Dr(this,r)}})),Vt(["concat","join","slice"],(function(e){var t=i[e];le.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Dr(this,e)}}));const Ur=le;var Fr=jr(e);Fr._=Fr;const Br=Fr,qr=(e,t,r=5,n=0)=>{if(n>=r)return"string"==typeof e?"truncated":Br.isArray(e)?["truncated"]:Br.isObject(e)?{truncated:!0}:e;let i;return"string"==typeof e?i=e.slice(0,t):Br.isArray(e)?(i=[],Br.each(e,(e=>{i.push(qr(e,t,r,n+1))}))):Br.isObject(e)?(i={},Br.each(e,((e,o)=>{i[o]=qr(e,t,r,n+1)}))):i=e,i},zr=qr,{userAgent:Wr}=navigator,$r=function(){const e=function(){const e=1*new Date;let t=0;for(;e==1*new Date;)t++;return e.toString(16)+t.toString(16)};return function(){const t=(screen.height*screen.width).toString(16);return`${e()}-${Math.random().toString(16).replace(".","")}-${function(){const e=Wr;let t,r,n=[],i=0;function o(e,t){let r,i=0;for(r=0;r<t.length;r++)i|=n[r]<<8*r;return e^i}for(t=0;t<e.length;t++)r=e.charCodeAt(t),n.unshift(255&r),n.length>=4&&(i=o(i,n),n=[]);return n.length>0&&(i=o(i,n)),i.toString(16)}()}-${t}-${e()}`}}();function Vr(e="alooma"){let t,r;const n=Array.prototype,i=Function.prototype,o=Object.prototype,{slice:s}=n,{toString:a}=o,{hasOwnProperty:l}=o,u=window.console,{navigator:c}=window,{document:h}=window,d=e,p="__mps",f="__mpso",g="__mpa",m="__mpap",v="__mpu",y="$set",b="$set_once",w="$add",S="$append",k="$union",I="$people_distinct_id",C="__alias",_="__cmpns",x="__timers",O=[p,f,g,m,v,I,C,_,x],E="https:"==h.location.protocol?"https://":"http://",A=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest;let R=!A&&-1==Wr.indexOf("MSIE")&&-1==Wr.indexOf("Mozilla");const T={};let M=!1;const P={api_host:`${E}inputs.alooma.com`,api_method:"GET",api_transport:"XHR",xhr_headers:{},cross_subdomain_cookie:!0,persistence:"cookie",persistence_name:"",cookie_name:"",loaded(){},store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,track_pageview:!0,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,property_blacklist:[],truncate:255};let N=!1;!function(){const e=i.bind,t=n.forEach,r=n.indexOf,o=Array.isArray,u={},c=function(){};T.bind=function(t,r){let n,i;if(e&&t.bind===e)return e.apply(t,s.call(arguments,1));if(!T.isFunction(t))throw new TypeError;return n=s.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(r,n.concat(s.call(arguments)));c.prototype=t.prototype;const e=new c;c.prototype=null;const o=t.apply(e,n.concat(s.call(arguments)));return Object(o)===o?o:e}},T.bind_instance_methods=function(e){for(const t in e)"function"==typeof e[t]&&(e[t]=T.bind(e[t],e))};const h=T.each=function(e,r,n){if(null!=e)if(t&&e.forEach===t)e.forEach(r,n);else if(e.length===+e.length){for(let t=0,i=e.length;t<i;t++)if(t in e&&r.call(n,e[t],t,e)===u)return}else for(const t in e)if(l.call(e,t)&&r.call(n,e[t],t,e)===u)return};T.escapeHTML=function(e){let t=e;return t&&T.isString(t)&&(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")),t},T.extend=function(e){return h(s.call(arguments,1),(function(t){for(const r in t)void 0!==t[r]&&(e[r]=t[r])})),e},T.isArray=o||function(e){return"[object Array]"===a.call(e)},T.isFunction=function(e){try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},T.isArguments=function(e){return!(!e||!l.call(e,"callee"))},T.toArray=function(e){return e?e.toArray?e.toArray():T.isArray(e)||T.isArguments(e)?s.call(e):T.values(e):[]},T.values=function(e){const t=[];return null==e||h(e,(function(e){t[t.length]=e})),t},T.identity=function(e){return e},T.include=function(e,t){let n=!1;return null==e?n:r&&e.indexOf===r?-1!=e.indexOf(t):(h(e,(function(e){if(n||(n=e===t))return u})),n)},T.includes=function(e,t){return-1!==e.indexOf(t)}}(),T.inherit=function(e,t){return e.prototype=new t,e.prototype.constructor=e,e.superclass=t.prototype,e},T.isObject=function(e){return e===Object(e)&&!T.isArray(e)},T.isEmptyObject=function(e){if(T.isObject(e)){for(const t in e)if(l.call(e,t))return!1;return!0}return!1},T.isUndefined=function(e){return void 0===e},T.isString=function(e){return"[object String]"==a.call(e)},T.isDate=function(e){return"[object Date]"==a.call(e)},T.isNumber=function(e){return"[object Number]"==a.call(e)},T.encodeDates=function(e){return T.each(e,(function(t,r){T.isDate(t)?e[r]=T.formatDate(t):T.isObject(t)&&(e[r]=T.encodeDates(t))})),e},T.formatDate=function(e){function t(e){return e<10?`0${e}`:e}return`${e.getUTCFullYear()}-${t(e.getUTCMonth()+1)}-${t(e.getUTCDate())}T${t(e.getUTCHours())}:${t(e.getUTCMinutes())}:${t(e.getUTCSeconds())}`},T.safewrap=function(e){return function(){try{e.apply(this,arguments)}catch(e){D.critical("Implementation error. Please contact support@alooma.com.")}}},T.safewrap_class=function(e,t){for(let r=0;r<t.length;r++)e.prototype[t[r]]=T.safewrap(e.prototype[t[r]])},T.strip_empty_properties=function(e){const t={};return T.each(e,(function(e,r){T.isString(e)&&e.length>0&&(t[r]=e)})),t},T.truncate=zr,T.JSONEncode=function(e){const t=function(e){const t=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return t.lastIndex=0,t.test(e)?`"${e.replace(t,(function(e){const t=r[e];return"string"==typeof t?t:`\\u${`0000${e.charCodeAt(0).toString(16)}`.slice(-4)}`}))}"`:`"${e}"`};var r=function(e,n){let i="",o=0,s="",u="",c=0;const h=i;let d=[],p=n[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),typeof p){case"string":return t(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(i+="    ",d=[],"[object Array]"===a.apply(p)){for(c=p.length,o=0;o<c;o+=1)d[o]=r(o,p)||"null";return u=0===d.length?"[]":i?`[\n${i}${d.join(`,\n${i}`)}\n${h}]`:`[${d.join(",")}]`,i=h,u}for(s in p)l.call(p,s)&&(u=r(s,p),u&&d.push(t(s)+(i?": ":":")+u));return u=0===d.length?"{}":i?`{${d.join(",")}${h}}`:`{${d.join(",")}}`,i=h,u}};return r("",{"":e})},T.JSONDecode=function(){let e,t;const r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};let n;const i=function(t){throw{name:"SyntaxError",message:t,at:e,text:n}},o=function(r){return r&&r!==t&&i(`Expected '${r}' instead of '${t}'`),t=n.charAt(e),e+=1,t},s=function(){let e,r="";for("-"===t&&(r="-",o("-"));t>="0"&&t<="9";)r+=t,o();if("."===t)for(r+=".";o()&&t>="0"&&t<="9";)r+=t;if("e"===t||"E"===t)for(r+=t,o(),"-"!==t&&"+"!==t||(r+=t,o());t>="0"&&t<="9";)r+=t,o();if(e=+r,isFinite(e))return e;i("Bad number")},a=function(){let e,n,s,a="";if('"'===t)for(;o();){if('"'===t)return o(),a;if("\\"===t)if(o(),"u"===t){for(s=0,n=0;n<4&&(e=parseInt(o(),16),isFinite(e));n+=1)s=16*s+e;a+=String.fromCharCode(s)}else{if("string"!=typeof r[t])break;a+=r[t]}else a+=t}i("Bad string")},l=function(){for(;t&&t<=" ";)o()};let u;return u=function(){switch(l(),t){case"{":return function(){let e;const r={};if("{"===t){if(o("{"),l(),"}"===t)return o("}"),r;for(;t;){if(e=a(),l(),o(":"),Object.hasOwnProperty.call(r,e)&&i(`Duplicate key "${e}"`),r[e]=u(),l(),"}"===t)return o("}"),r;o(","),l()}}i("Bad object")}();case"[":return function(){const e=[];if("["===t){if(o("["),l(),"]"===t)return o("]"),e;for(;t;){if(e.push(u()),l(),"]"===t)return o("]"),e;o(","),l()}}i("Bad array")}();case'"':return a();case"-":return s();default:return t>="0"&&t<="9"?s():function(){switch(t){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null}i(`Unexpected '${t}'`)}()}},function(r){let o;return n=r,e=0,t=" ",o=u(),l(),t&&i("Syntax error"),o}}(),T.base64Encode=function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r,n,i,o,s,a,l,u,c=0,h=0,d="";const p=[];if(!e)return e;e=T.utf8Encode(e);do{r=e.charCodeAt(c++),n=e.charCodeAt(c++),i=e.charCodeAt(c++),u=r<<16|n<<8|i,o=u>>18&63,s=u>>12&63,a=u>>6&63,l=63&u,p[h++]=t.charAt(o)+t.charAt(s)+t.charAt(a)+t.charAt(l)}while(c<e.length);switch(d=p.join(""),e.length%3){case 1:d=`${d.slice(0,-2)}==`;break;case 2:d=`${d.slice(0,-1)}=`}return d},T.utf8Encode=function(e){let t,r,n,i="",o=0;for(t=r=0,o=(e=`${e}`.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,n=0;n<o;n++){const o=e.charCodeAt(n);let s=null;o<128?r++:s=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),null!==s&&(r>t&&(i+=e.substring(t,r)),i+=s,t=r=n+1)}return r>t&&(i+=e.substring(t,e.length)),i},T.UUID=$r,T.isBlockedUA=function(e){return!!/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(e)},T.HTTPBuildQuery=function(e,t){let r,n;const i=[];return T.isUndefined(t)&&(t="&"),T.each(e,(function(e,t){r=encodeURIComponent(e.toString()),n=encodeURIComponent(t),i[i.length]=`${n}=${r}`})),i.join(t)},T.getQueryParam=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const r=new RegExp(`[\\?&]${t}=([^&#]*)`).exec(e);return null===r||r&&"string"!=typeof r[1]&&r[1].length?"":decodeURIComponent(r[1]).replace(/\+/g," ")},T.cookie={get(e){const t=`${e}=`,r=h.cookie.split(";");for(let e=0;e<r.length;e++){let n=r[e];for(;" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}return null},parse(e){let t;try{t=T.JSONDecode(T.cookie.get(e))||{}}catch(e){}return t},set(e,t,r,n,i){let o="",s="",a="";if(n){const e=h.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),t=e?e[0]:"";o=t?`; domain=.${t}`:""}if(r){const e=new Date;e.setTime(e.getTime()+24*r*60*60*1e3),s=`; expires=${e.toGMTString()}`}i&&(a="; secure"),h.cookie=`${e}=${encodeURIComponent(t)}${s}; path=/${o}${a}`},remove(e,t){T.cookie.set(e,"",-1,t)}},T.localStorage={error(e){D.error(`localStorage error: ${e}`)},get(e){try{return window.localStorage.getItem(e)}catch(e){T.localStorage.error(e)}return null},parse(e){try{return T.JSONDecode(T.localStorage.get(e))||{}}catch(e){}return null},set(e,t){try{window.localStorage.setItem(e,t)}catch(e){T.localStorage.error(e)}},remove(e){try{window.localStorage.removeItem(e)}catch(e){T.localStorage.error(e)}}},T.register_event=function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(t,r,n,i){if(t)if(t.addEventListener&&!i)t.addEventListener(r,n,!1);else{const i=`on${r}`,o=t[i];t[i]=function(t,r,n){const i=function(i){if(!(i=i||e(window.event)))return;let o,s,a=!0;return T.isFunction(n)&&(o=n(i)),s=r.call(t,i),!1!==o&&!1!==s||(a=!1),a};return i}(t,n,o)}else D.error("No valid element provided to register_event")}}(),T.dom_query=function(){function e(e){return e.all?e.all:e.getElementsByTagName("*")}const t=/[\t\r\n]/g;function r(e,r){const n=` ${r} `;return` ${e.className} `.replace(t," ").indexOf(n)>=0}return function(t){if(!h.getElementsByTagName)return new Array;const n=t.split(" ");let i,o=new Array(h);for(let t=0;t<n.length;t++){if(i=n[t].replace(/^\s+/,"").replace(/\s+$/,""),i.indexOf("#")>-1){var s=(a=i.split("#"))[0];const e=a[1],t=h.getElementById(e);if(!t||s&&t.nodeName.toLowerCase()!=s)return new Array;o=new Array(t);continue}if(i.indexOf(".")>-1){var a;s=(a=i.split("."))[0];const t=a[1];s||(s="*");for(var l=new Array,u=0,c=0;c<o.length;c++){y="*"==s?e(o[c]):o[c].getElementsByTagName(s);for(var d=0;d<y.length;d++)l[u++]=y[d]}o=new Array;for(var p=0,f=0;f<l.length;f++)l[f].className&&T.isString(l[f].className)&&r(l[f],t)&&(o[p++]=l[f]);continue}const b=i.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/);if(b){s=b[1];var g=b[2];const t=b[3];var m=b[4];s||(s="*");for(l=new Array,u=0,c=0;c<o.length;c++){y="*"==s?e(o[c]):o[c].getElementsByTagName(s);for(d=0;d<y.length;d++)l[u++]=y[d]}o=new Array;var v;p=0;switch(t){case"=":v=function(e){return e.getAttribute(g)==m};break;case"~":v=function(e){return e.getAttribute(g).match(new RegExp(`\\b${m}\\b`))};break;case"|":v=function(e){return e.getAttribute(g).match(new RegExp(`^${m}-?`))};break;case"^":v=function(e){return 0==e.getAttribute(g).indexOf(m)};break;case"$":v=function(e){return e.getAttribute(g).lastIndexOf(m)==e.getAttribute(g).length-m.length};break;case"*":v=function(e){return e.getAttribute(g).indexOf(m)>-1};break;default:v=function(e){return e.getAttribute(g)}}o=new Array,p=0;for(f=0;f<l.length;f++)v(l[f])&&(o[p++]=l[f])}else{s=i;for(l=new Array,u=0,c=0;c<o.length;c++){var y=o[c].getElementsByTagName(s);for(d=0;d<y.length;d++)l[u++]=y[d]}o=l}}return o}}(),T.info={campaignParams(){const e="utm_source utm_medium utm_campaign utm_content utm_term".split(" ");let t="";const r={};return T.each(e,(function(e){t=T.getQueryParam(h.URL,e),t.length&&(r[e]=t)})),r},searchEngine:e=>0===e.search("https?://(.*)google.([^/?]*)")?"google":0===e.search("https?://(.*)bing.com")?"bing":0===e.search("https?://(.*)yahoo.com")?"yahoo":0===e.search("https?://(.*)duckduckgo.com")?"duckduckgo":null,searchInfo(e){const t=T.info.searchEngine(e),r="yahoo"!=t?"q":"p",n={};if(null!==t){n.$search_engine=t;const i=T.getQueryParam(e,r);i.length&&(n.mp_keyword=i)}return n},browser:(e,t,r)=>(t=t||"",r||T.includes(e," OPR/")?T.includes(e,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":T.includes(e,"IEMobile")||T.includes(e,"WPDesktop")?"Internet Explorer Mobile":T.includes(e,"Edge")?"Microsoft Edge":T.includes(e,"FBIOS")?"Facebook Mobile":T.includes(e,"Chrome")?"Chrome":T.includes(e,"CriOS")?"Chrome iOS":T.includes(t,"Apple")?T.includes(e,"Mobile")?"Mobile Safari":"Safari":T.includes(e,"Android")?"Android Mobile":T.includes(e,"Konqueror")?"Konqueror":T.includes(e,"Firefox")?"Firefox":T.includes(e,"MSIE")||T.includes(e,"Trident/")?"Internet Explorer":T.includes(e,"Gecko")?"Mozilla":""),browserVersion(e,t,r){const n={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/Chrome\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[T.info.browser(e,t,r)];if(null==n)return null;const i=e.match(n);return i?parseFloat(i[i.length-2]):null},os(){const e=Wr;return/Windows/i.test(e)?/Phone/.test(e)||/WPDesktop/.test(e)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(e)?"iOS":/Android/.test(e)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Mac/i.test(e)?"Mac OS X":/Linux/.test(e)?"Linux":""},device:e=>/Windows Phone/i.test(e)||/WPDesktop/.test(e)?"Windows Phone":/iPad/.test(e)?"iPad":/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(e)?"BlackBerry":/Android/.test(e)?"Android":"",referringDomain(e){const t=e.split("/");return t.length>=3?t[2]:""},properties:()=>T.extend(T.strip_empty_properties({$os:T.info.os(),$browser:T.info.browser(Wr,c.vendor,window.opera),$referrer:h.referrer,$referring_domain:T.info.referringDomain(h.referrer),$device:T.info.device(Wr)}),{$current_url:window.location.href,$browser_version:T.info.browserVersion(Wr,c.vendor,window.opera),$screen_height:screen.height,$screen_width:screen.width,mp_lib:"web",$lib_version:"1.0.0"}),people_properties:()=>T.extend(T.strip_empty_properties({$os:T.info.os(),$browser:T.info.browser(Wr,c.vendor,window.opera)}),{$browser_version:T.info.browserVersion(Wr,c.vendor,window.opera)}),pageviewInfo:e=>T.strip_empty_properties({mp_page:e,mp_referrer:h.referrer,mp_browser:T.info.browser(Wr,c.vendor,window.opera),mp_platform:T.info.os()})};var L=c.sendBeacon;L&&(L=T.bind(L,c));var D={log(){if(M&&!T.isUndefined(u)&&u)try{u.log.apply(u,arguments)}catch(e){T.each(arguments,(function(e){u.log(e)}))}},error(){if(M&&!T.isUndefined(u)&&u){const e=["Alooma error:"].concat(T.toArray(arguments));try{u.error.apply(u,e)}catch(t){T.each(e,(function(e){u.error(e)}))}}},critical(){if(!T.isUndefined(u)&&u){const e=["Alooma error:"].concat(T.toArray(arguments));try{u.error.apply(u,e)}catch(t){T.each(e,(function(e){u.error(e)}))}}}};const j=function(){};j.prototype.create_properties=function(){},j.prototype.event_handler=function(){},j.prototype.after_track_handler=function(){},j.prototype.init=function(e){return this.mp=e,this},j.prototype.track=function(e,t,r,n){const i=this,o=T.dom_query(e);if(0!=o.length)return T.each(o,(function(e){T.register_event(e,this.override_event,(function(e){const o={},s=i.create_properties(r,this),a=i.mp.get_config("track_links_timeout");i.event_handler(e,this,o),window.setTimeout(i.track_callback(n,s,o,!0),a),i.mp.track(t,s,i.track_callback(n,s,o))}))}),this),!0;D.error(`The DOM query (${e}) returned 0 elements`)},j.prototype.track_callback=function(e,t,r,n){n=n||!1;const i=this;return function(){r.callback_fired||(r.callback_fired=!0,e&&!1===e(n,t)||i.after_track_handler(t,r,n))}},j.prototype.create_properties=function(e,t){let r;return r="function"==typeof e?e(t):T.extend({},e),r};const U=function(){this.override_event="click"};T.inherit(U,j),U.prototype.create_properties=function(e,t){const r=U.superclass.create_properties.apply(this,arguments);return t.href&&(r.url=t.href),r},U.prototype.event_handler=function(e,t,r){r.new_tab=2===e.which||e.metaKey||e.ctrlKey||"_blank"===t.target,r.href=t.href,r.new_tab||e.preventDefault()},U.prototype.after_track_handler=function(e,t,r){t.new_tab||setTimeout((function(){window.location=t.href}),0)};const F=function(){this.override_event="submit"};T.inherit(F,j),F.prototype.event_handler=function(e,t,r){r.element=t,e.preventDefault()},F.prototype.after_track_handler=function(e,t,r){setTimeout((function(){t.element.submit()}),0)};const B=function(e){this.props={},this.campaign_params_saved=!1,e.persistence_name?this.name=`mp_${e.persistence_name}`:this.name=`mp_${e.token}_alooma`;let t=e.persistence;"cookie"!==t&&"localStorage"!==t&&(D.critical(`Unknown persistence type "${t}"; falling back to "cookie"`),t=e.persistence="cookie");"localStorage"===t&&function(){let e=!0;try{const t="__mplssupport__",r="xyz";T.localStorage.set(t,r),T.localStorage.get(t)!==r&&(e=!1),T.localStorage.remove(t)}catch(t){e=!1}return e||D.error("localStorage unsupported; falling back to cookie store"),e}()?this.storage=T.localStorage:this.storage=T.cookie,this.load(),this.update_config(e),this.upgrade(e),this.save()};B.prototype.properties=function(){const e={};return T.each(this.props,(function(t,r){T.include(O,r)||(e[r]=t)})),e},B.prototype.load=function(){if(this.disabled)return;const e=this.storage.parse(this.name);e&&(this.props=T.extend({},e))},B.prototype.upgrade=function(e){const t=e.upgrade;let r,n;t&&(r="mp_super_properties","string"==typeof t&&(r=t),n=this.storage.parse(r),this.storage.remove(r),this.storage.remove(r,!0),n&&(this.props=T.extend(this.props,n.all,n.events))),e.cookie_name||"alooma"===e.name||(r=`mp_${e.token}_${e.name}`,n=this.storage.parse(r),n&&(this.storage.remove(r),this.storage.remove(r,!0),this.register_once(n))),this.storage===T.localStorage&&(n=T.cookie.parse(this.name),T.cookie.remove(this.name),T.cookie.remove(this.name,!0),n&&this.register_once(n))},B.prototype.save=function(){this.disabled||(this._expire_notification_campaigns(),this.storage.set(this.name,T.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure))},B.prototype.remove=function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)},B.prototype.clear=function(){this.remove(),this.props={}},B.prototype.register_once=function(e,t,r){return!!T.isObject(e)&&(void 0===t&&(t="None"),this.expire_days=void 0===r?this.default_expiry:r,T.each(e,(function(e,r){this.props[r]&&this.props[r]!==t||(this.props[r]=e)}),this),this.save(),!0)},B.prototype.register=function(e,t){return!!T.isObject(e)&&(this.expire_days=void 0===t?this.default_expiry:t,T.extend(this.props,e),this.save(),!0)},B.prototype.unregister=function(e){e in this.props&&(delete this.props[e],this.save())},B.prototype._expire_notification_campaigns=T.safewrap((function(){const e=this.props[_],t=M?6e4:36e5;if(e){for(const r in e)1*new Date-e[r]>t&&delete e[r];T.isEmptyObject(e)&&delete this.props[_]}})),B.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(T.info.campaignParams()),this.campaign_params_saved=!0)},B.prototype.update_search_keyword=function(e){this.register(T.info.searchInfo(e))},B.prototype.update_referrer_info=function(e){this.register_once({$initial_referrer:e||"$direct",$initial_referring_domain:T.info.referringDomain(e)||"$direct"},"")},B.prototype.get_referrer_info=function(){return T.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},B.prototype.safe_merge=function(e){return T.each(this.props,(function(t,r){r in e||(e[r]=t)})),e},B.prototype.update_config=function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)},B.prototype.set_disabled=function(e){this.disabled=e,this.disabled&&this.remove()},B.prototype.set_cross_subdomain=function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())},B.prototype.get_cross_subdomain=function(){return this.cross_subdomain},B.prototype.set_secure=function(e){e!==this.secure&&(this.secure=!!e,this.remove(),this.save())},B.prototype._add_to_people_queue=function(e,t){const r=this._get_queue_key(e),n=t[e],i=this._get_or_create_queue(y),o=this._get_or_create_queue(b),s=this._get_or_create_queue(w),a=this._get_or_create_queue(k),l=this._get_or_create_queue(S,[]);r===p?(T.extend(i,n),this._pop_from_people_queue(w,n),this._pop_from_people_queue(k,n)):r===f?T.each(n,(function(e,t){t in o||(o[t]=e)})):r===g?T.each(n,(function(e,t){t in i?i[t]+=e:(t in s||(s[t]=0),s[t]+=e)}),this):r===v?T.each(n,(function(e,t){T.isArray(e)&&(t in a||(a[t]=[]),a[t]=a[t].concat(e))})):r===m&&l.push(n),D.log("ALOOMA PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),D.log(t),this.save()},B.prototype._pop_from_people_queue=function(e,t){const r=this._get_queue(e);T.isUndefined(r)||(T.each(t,(function(e,t){delete r[t]}),this),this.save())},B.prototype._get_queue_key=function(e){return e===y?p:e===b?f:e===w?g:e===S?m:e===k?v:void D.error("Invalid queue:",e)},B.prototype._get_queue=function(e){return this.props[this._get_queue_key(e)]},B.prototype._get_or_create_queue=function(e,t){const r=this._get_queue_key(e);return t=T.isUndefined(t)?{}:t,this.props[r]||(this.props[r]=t)},B.prototype.set_event_timer=function(e,t){const r=this.props[x]||{};r[e]=t,this.props[x]=r,this.save()},B.prototype.remove_event_timer=function(e){const t=(this.props[x]||{})[e];return T.isUndefined(t)||(delete this.props[x][e],this.save()),t};const q=function(e,n,i){let o;const s=i===d?r:r[i];if(s&&0===t)o=s;else{if(s&&!T.isArray(s))return void D.error(`You have already initialized ${i}`);o=new z}return o._init(e,n,i),M=M||o.get_config("debug"),!T.isUndefined(s)&&T.isArray(s)&&(window.Rover=window.Rover||{},window.Rover.bootloaderCalls=s),o};var z=function(){};z.prototype.init=function(e,t,n){if(T.isUndefined(n))return void D.error("You must name your new library: init(token, config, name)");if(n===d)return void D.error("You must initialize the main alooma object right after you include the Alooma js snippet");const i=q(e,t,n);return r[n]=i,i._loaded(),i},z.prototype._init=function(e,t,r){this.__loaded=!0,this.config={},this.set_config(T.extend({},P,t,{name:r,token:e,callback_fn:`${r===d?r:`${d}.${r}`}._jsc`})),this._jsc=function(){},this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.persistence=this.cookie=new B(this.config),this.register_once({distinct_id:T.UUID()},"")},z.prototype._loaded=function(){this.get_config("loaded")(this),this.get_config("track_pageview")&&this.track_pageview()},z.prototype._dom_loaded=function(){T.each(this.__dom_loaded_queue,(function(e){this._track_dom.apply(this,e)}),this),T.each(this.__request_queue,(function(e){this._send_request.apply(this,e)}),this),delete this.__dom_loaded_queue,delete this.__request_queue},z.prototype._track_dom=function(e,t){if(this.get_config("img"))return D.error("You can't use DOM tracking functions with img = true."),!1;if(!N)return this.__dom_loaded_queue.push([e,t]),!1;const r=(new e).init(this);return r.track.apply(r,t)},z.prototype._prepare_callback=function(e,t){if(T.isUndefined(e)||null===e)return null;if(A){return function(r){e(r,t)}}const r=this._jsc,n=`${Math.floor(1e8*Math.random())}`,i=`${this.get_config("callback_fn")}["${n}"]`;return r[n]=function(i){delete r[n],e(i,t)},i},z.prototype._send_request=function(e,t,r,n){if(R)this.__request_queue.push(arguments);else{var i={method:this.get_config("api_method"),transport:this.get_config("api_transport")},o=null;n||!T.isFunction(r)&&"string"!=typeof r||(n=r,r=null),r=T.extend(i,r||{}),A||(r.method="GET");var s="POST"===r.method,a=L&&s&&"sendbeacon"===r.transport.toLowerCase(),l=this.get_config("verbose");t.verbose&&(l=!0),this.get_config("test")&&(t.test=1),l&&(t.verbose=1),this.get_config("img")&&(t.img=1),A||(n?t.callback=n:(l||this.get_config("test"))&&(t.callback="(function(){})")),t.ip=this.get_config("ip")?1:0,t._=(new Date).getTime().toString(),s&&(o=`[${t.json_data}]`,delete t.data);try{u.debug&&u.debug(`Alooma source: client ${d} sending request with data`,JSON.parse(t.json_data))}catch(e){}if(delete t.json_data,e+="?"+T.HTTPBuildQuery(t),"img"in t){var c=h.createElement("img");c.src=e,h.body.appendChild(c)}else if(a)try{L(e,o)}catch(e){D.error(e)}else if(A)try{var p=new XMLHttpRequest;p.open(r.method,e,!0);var f=this.get_config("xhr_headers");s&&(f["Content-Type"]="application/json"),T.each(f,(function(e,t){p.setRequestHeader(t,e)})),p.withCredentials=!0,p.onreadystatechange=function(){if(4===p.readyState)if(200===p.status){if(n)if(l){var e;try{e=T.JSONDecode(p.responseText)}catch(e){return void D.error(e)}n(e)}else n(Number(p.responseText))}else{var t="Bad HTTP status: "+p.status+" "+p.statusText;D.error(t),n&&n(l?{status:0,error:t}:0)}},p.send(o)}catch(e){D.error(e)}else{var g=h.createElement("script");g.type="text/javascript",g.async=!0,g.defer=!0,g.src=e;var m=h.getElementsByTagName("script")[0];m.parentNode.insertBefore(g,m)}}},z.prototype._execute_array=function(e){let t;const r=[],n=[],i=[];T.each(e,(function(e){e&&(t=e[0],"function"==typeof e?e.call(this):T.isArray(e)&&"alias"===t?r.push(e):T.isArray(e)&&-1!=t.indexOf("track")&&"function"==typeof this[t]?i.push(e):n.push(e))}),this);const o=function(e,t){T.each(e,(function(e){this[e[0]].apply(this,e.slice(1))}),t)};o(r,this),o(n,this),o(i,this)},z.prototype.execute_preload_calls=function(e){this._execute_array(e)},z.prototype.push=function(e){this._execute_array([e])},z.prototype.disable=function(e){void 0===e?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(e)},z.prototype.track=function(e,t,r){if(T.isUndefined(e))return void D.error("No event name provided to alooma.track");if(this._event_is_disabled(e))return void(void 0!==r&&r(0));(t=t||{}).token=this.get_config("token");const n=this.persistence.remove_event_timer(e);if(!T.isUndefined(n)){const e=(new Date).getTime()-n;t.$duration=parseFloat((e/1e3).toFixed(3))}this.persistence.update_search_keyword(h.referrer),this.get_config("store_google")&&this.persistence.update_campaign_params(),this.get_config("save_referrer")&&this.persistence.update_referrer_info(h.referrer),t=T.extend({},T.info.properties(),this.persistence.properties(),t);const i=this.get_config("property_blacklist");T.isArray(i)?T.each(i,(function(e){delete t[e]})):D.error(`Invalid value for property_blacklist config: ${i}`);const o={event:e,properties:t},s=T.truncate(o,this.get_config("truncate")),a=T.JSONEncode(s),l=T.base64Encode(a);return D.log("ALOOMA REQUEST:"),D.log(s),this._send_request(`${this.get_config("api_host")}/track/`,{data:l,json_data:a},this._prepare_callback(r,s)),s},z.prototype.track_custom_event=function(e,t){let r={};e&&(r=e.properties||{}),r.token=this.get_config("token"),this.persistence.update_search_keyword(h.referrer),this.get_config("store_google")&&this.persistence.update_campaign_params(),this.get_config("save_referrer")&&this.persistence.update_referrer_info(h.referrer),r=T.extend({},T.info.properties(),this.persistence.properties(),r);const n=this.get_config("property_blacklist");T.isArray(n)?T.each(n,(function(e){delete r[e]})):D.error(`Invalid value for property_blacklist config: ${n}`);const i=e||{};i.properties=r;const o=T.truncate(i,this.get_config("truncate")),s=T.JSONEncode(o),a=T.base64Encode(s);return D.log("ALOOMA REQUEST:"),D.log(o),this._send_request(`${this.get_config("api_host")}/track/`,{data:a,json_data:s},this._prepare_callback(t,o)),o},z.prototype.track_pageview=function(e,t={}){return T.isUndefined(e)&&(e=h.location.href),this.track("mp_page_view",{...T.info.pageviewInfo(e),...t})},z.prototype.track_links=function(){return this._track_dom.call(this,U,arguments)},z.prototype.track_forms=function(){return this._track_dom.call(this,F,arguments)},z.prototype.time_event=function(e){T.isUndefined(e)?D.error("No event name provided to alooma.time_event"):this._event_is_disabled(e)||this.persistence.set_event_timer(e,(new Date).getTime())},z.prototype.register=function(e,t){this.persistence.register(e,t)},z.prototype.register_once=function(e,t,r){this.persistence.register_once(e,t,r)},z.prototype.unregister=function(e){this.persistence.unregister(e)},z.prototype._register_single=function(e,t){const r={};r[e]=t,this.register(r)},z.prototype.identify=function(e,t,r,n,i,o){e!=this.get_distinct_id()&&e!=this.get_property(C)&&(this.unregister(C),this._register_single("distinct_id",e)),this._flags.identify_called=!0},z.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},z.prototype.alias=function(e,t){if(e===this.get_property(I))return D.critical("Attempting to create alias for existing People user - aborting."),-2;const r=this;return T.isUndefined(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(C,e),this.track("$create_alias",{alias:e,distinct_id:t},(function(t){r.identify(e)}))):(D.error("alias matches current distinct_id - skipping api call."),this.identify(e),-1)},z.prototype.name_tag=function(e){this._register_single("mp_name_tag",e)},z.prototype.set_config=function(e){T.isObject(e)&&(T.extend(this.config,e),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),M=M||this.get_config("debug"))},z.prototype.get_config=function(e){return this.config[e]},z.prototype.get_property=function(e){return this.persistence.props[e]},z.prototype.toString=function(){let e=this.get_config("name");return e!==d&&(e=`${d}.${e}`),e},z.prototype._event_is_disabled=function(e){return T.isBlockedUA(Wr)||this._flags.disable_all_events||T.include(this.__disabled_events,e)},T.toArray=T.toArray,T.isObject=T.isObject,T.JSONEncode=T.JSONEncode,T.JSONDecode=T.JSONDecode,T.isBlockedUA=T.isBlockedUA,T.isEmptyObject=T.isEmptyObject,T.UUID=T.UUID,T.info=T.info,T.info.device=T.info.device,T.info.browser=T.info.browser,T.info.properties=T.info.properties,z.prototype.init=z.prototype.init,z.prototype.disable=z.prototype.disable,z.prototype.time_event=z.prototype.time_event,z.prototype.track=z.prototype.track,z.prototype.track_custom_event=z.prototype.track_custom_event,z.prototype.track_links=z.prototype.track_links,z.prototype.track_forms=z.prototype.track_forms,z.prototype.track_pageview=z.prototype.track_pageview,z.prototype.register=z.prototype.register,z.prototype.register_once=z.prototype.register_once,z.prototype.unregister=z.prototype.unregister,z.prototype.identify=z.prototype.identify,z.prototype.alias=z.prototype.alias,z.prototype.name_tag=z.prototype.name_tag,z.prototype.set_config=z.prototype.set_config,z.prototype.get_config=z.prototype.get_config,z.prototype.get_property=z.prototype.get_property,z.prototype.get_distinct_id=z.prototype.get_distinct_id,z.prototype.toString=z.prototype.toString,B.prototype.properties=B.prototype.properties,B.prototype.update_search_keyword=B.prototype.update_search_keyword,B.prototype.update_referrer_info=B.prototype.update_referrer_info,B.prototype.get_cross_subdomain=B.prototype.get_cross_subdomain,B.prototype.clear=B.prototype.clear,T.safewrap_class(z,["identify"]);const W={},$=function(){r.init=function(e,n,i){if(i)return r[i]||(r[i]=W[i]=q(e,n,i),r[i]._loaded()),r[i];let o=r;W[d]?o=W[d]:e&&(o=q(e,n,d),o._loaded(),W[d]=o),r=o,1===t&&(window[d]=r),T.each(W,(function(e,t){t!==d&&(r[t]=e)})),r._=T}};!function(){if(t=1,r=window[d],T.isUndefined(r))return void D.critical("'alooma' object not initialized. Ensure you are using the latest version of the Alooma JS Library along with the snippet we provide.");if(r.__loaded||r.config&&r.persistence)return void D.error("Alooma library has already been downloaded at least once.");(r.__SV||0)<1.1?D.critical("Version mismatch; please ensure you're using the latest version of the Alooma code snippet."):(T.each(r._i,(function(e){e&&T.isArray(e)&&(W[e[e.length-1]]=q.apply(this,e))})),$(),r.init(),T.each(W,(function(e){e._loaded()})),function(){function e(){e.done||(e.done=!0,N=!0,R=!1,T.each(W,(function(e){e._dom_loaded()})))}if(h.addEventListener)"complete"==h.readyState?e():h.addEventListener("DOMContentLoaded",e,!1);else if(h.attachEvent){h.attachEvent("onreadystatechange",e);let t=!1;try{t=null==window.frameElement}catch(e){}h.documentElement.doScroll&&t&&function t(){try{h.documentElement.doScroll("left")}catch(e){return void setTimeout(t,1)}e()}()}T.register_event(window,"load",e,!0)}())}()}var Gr=function(e,t){return Gr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Gr(e,t)};function Jr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Gr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var Kr=function(){return Kr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Kr.apply(this,arguments)};function Zr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function Yr(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))}function Hr(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;function Xr(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qr(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function en(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var tn;!function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Warn=2]="Warn",e[e.Verbose=3]="Verbose",e[e.Debug=4]="Debug"}(tn||(tn={}));var rn,nn=function(e){return function(){var t=Kr({},e.config);return{logger:t.loggerProvider,logLevel:t.logLevel}}},on=function(e,t){var r,n;t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"");try{for(var i=Xr(t.split(".")),o=i.next();!o.done;o=i.next()){var s=o.value;if(!(s in e))return;e=e[s]}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return e},sn=function(e,t){return function(){var r,n,i={};try{for(var o=Xr(t),s=o.next();!s.done;s=o.next()){var a=s.value;i[a]=on(e,a)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i}},an=function(e,t,r,n,i){return void 0===i&&(i=null),function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=r(),l=a.logger,u=a.logLevel;if(u&&u<tn.Debug||!u||!l)return e.apply(i,o);var c,h={type:"invoke public method",name:t,args:o,stacktrace:(c=1,void 0===c&&(c=0),((new Error).stack||"").split("\n").slice(2+c).map((function(e){return e.trim()}))),time:{start:(new Date).toISOString()},states:{}};n&&h.states&&(h.states.before=n());var d=e.apply(i,o);return d&&d.promise?d.promise.then((function(){n&&h.states&&(h.states.after=n()),h.time&&(h.time.end=(new Date).toISOString()),l.debug(JSON.stringify(h,null,2))})):(n&&h.states&&(h.states.after=n()),h.time&&(h.time.end=(new Date).toISOString()),l.debug(JSON.stringify(h,null,2))),d}},ln=function(e){return{promise:e||Promise.resolve()}};!function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.PayloadTooLarge="payload_too_large",e.Invalid="invalid",e.Failed="failed",e.Timeout="Timeout",e.SystemError="SystemError"}(rn||(rn={}));var un="AMP",cn="".concat(un,"_unsent"),hn="https://api2.amplitude.com/2/httpapi",dn=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=rn.Unknown),{event:e,code:t,message:r}},pn="Amplitude Logger ",fn=function(){function e(){this.logLevel=tn.None}return e.prototype.disable=function(){this.logLevel=tn.None},e.prototype.enable=function(e){void 0===e&&(e=tn.Warn),this.logLevel=e},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<tn.Verbose||console.log("".concat(pn,"[Log]: ").concat(e.join(" ")))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<tn.Warn||console.warn("".concat(pn,"[Warn]: ").concat(e.join(" ")))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<tn.Error||console.error("".concat(pn,"[Error]: ").concat(e.join(" ")))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<tn.Debug||console.log("".concat(pn,"[Debug]: ").concat(e.join(" ")))},e}(),gn=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:tn.Warn,loggerProvider:new fn,offline:!1,optOut:!1,serverUrl:hn,serverZone:"US",useBatch:!1}},mn=function(){function e(e){var t,r,n,i;this._optOut=!1;var o=gn();this.apiKey=e.apiKey,this.flushIntervalMillis=null!==(t=e.flushIntervalMillis)&&void 0!==t?t:o.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||o.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||o.flushQueueSize,this.instanceName=e.instanceName||o.instanceName,this.loggerProvider=e.loggerProvider||o.loggerProvider,this.logLevel=null!==(r=e.logLevel)&&void 0!==r?r:o.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=void 0!==e.offline?e.offline:o.offline,this.optOut=null!==(n=e.optOut)&&void 0!==n?n:o.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||o.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=null!==(i=e.useBatch)&&void 0!==i?i:o.useBatch,this.loggerProvider.enable(this.logLevel);var s=yn(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=s.serverZone,this.serverUrl=s.serverUrl}return Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),e}(),vn=function(e,t){return"EU"===e?t?"https://api.eu.amplitude.com/batch":"https://api.eu.amplitude.com/2/httpapi":t?"https://api2.amplitude.com/batch":hn},yn=function(e,t,r){if(void 0===e&&(e=""),void 0===t&&(t=gn().serverZone),void 0===r&&(r=gn().useBatch),e)return{serverUrl:e,serverZone:void 0};var n=["US","EU"].includes(t)?t:gn().serverZone;return{serverZone:n,serverUrl:vn(n,r)}},bn=function(){function e(){this.sdk={metrics:{histogram:{}}}}return e.prototype.recordHistogram=function(e,t){this.sdk.metrics.histogram[e]=t},e}(),wn=function(e){return e?(e^16*Math.random()>>e/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,wn)};function Sn(e){var t="";try{"body"in e&&(t=JSON.stringify(e.body,null,2))}catch(e){}return t}var kn,In,Cn,_n=function(){function e(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return e.prototype.setup=function(e){var t;return Yr(this,void 0,void 0,(function(){var r,n=this;return Hr(this,(function(i){switch(i.label){case 0:return this.config=e,this.storageKey="".concat(cn,"_").concat(this.config.apiKey.substring(0,10)),[4,null===(t=this.config.storageProvider)||void 0===t?void 0:t.get(this.storageKey)];case 1:return(r=i.sent())&&r.length>0&&Promise.all(r.map((function(e){return n.execute(e)}))).catch(),[2,Promise.resolve(void 0)]}}))}))},e.prototype.execute=function(e){var t=this;return e.insert_id||(e.insert_id=wn()),new Promise((function(r){var n={event:e,attempts:0,callback:function(e){return r(e)},timeout:0};t.addToQueue(n)}))},e.prototype.getTryableList=function(e){var t=this;return e.filter((function(e){return e.attempts<t.config.flushMaxRetries?(e.attempts+=1,!0):(t.fulfillRequest([e],500,"Event rejected due to exceeded retry count"),!1)}))},e.prototype.scheduleTryable=function(e,t){var r=this;void 0===t&&(t=!1),e.forEach((function(e){t&&(r.queue=r.queue.concat(e)),0!==e.timeout?setTimeout((function(){e.timeout=0,r.schedule(0)}),e.timeout):r.schedule(r.config.flushIntervalMillis)}))},e.prototype.addToQueue=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this.getTryableList(e);this.scheduleTryable(r,!0),this.saveEvents()},e.prototype.schedule=function(e){var t=this;this.scheduled||this.config.offline||(this.scheduled=setTimeout((function(){t.flush(!0).then((function(){t.queue.length>0&&t.schedule(e)}))}),e))},e.prototype.flush=function(e){return void 0===e&&(e=!1),Yr(this,void 0,void 0,(function(){var t,r,n,i=this;return Hr(this,(function(o){switch(o.label){case 0:return this.config.offline?(this.config.loggerProvider.debug("Skipping flush while offline."),[2]):(t=[],r=[],this.queue.forEach((function(e){return 0===e.timeout?t.push(e):r.push(e)})),this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),n=function(e,t){var r=Math.max(t,1);return e.reduce((function(e,t,n){var i=Math.floor(n/r);return e[i]||(e[i]=[]),e[i].push(t),e}),[])}(t,this.config.flushQueueSize),[4,n.reduce((function(t,r){return Yr(i,void 0,void 0,(function(){return Hr(this,(function(n){switch(n.label){case 0:return[4,t];case 1:return n.sent(),[4,this.send(r,e)];case 2:return[2,n.sent()]}}))}))}),Promise.resolve())]);case 1:return o.sent(),this.scheduleTryable(r),[2]}}))}))},e.prototype.send=function(e,t){return void 0===t&&(t=!0),Yr(this,void 0,void 0,(function(){var r,n,i,o,s;return Hr(this,(function(a){switch(a.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,"Event rejected due to missing API key")];r={api_key:this.config.apiKey,events:e.map((function(e){var t=e.event;t.extra;return Zr(t,["extra"])})),options:{min_id_length:this.config.minIdLength},client_upload_time:(new Date).toISOString(),request_metadata:this.config.requestMetadata},this.config.requestMetadata=new bn,a.label=1;case 1:return a.trys.push([1,3,,4]),n=yn(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(n,r)];case 2:return null===(i=a.sent())?(this.fulfillRequest(e,0,"Unexpected error occurred"),[2]):t?(this.handleResponse(i,e),[3,4]):("body"in i?this.fulfillRequest(e,i.statusCode,"".concat(i.status,": ").concat(Sn(i))):this.fulfillRequest(e,i.statusCode,i.status),[2]);case 3:return o=a.sent(),s=(l=o)instanceof Error?l.message:String(l),this.config.loggerProvider.error(s),this.handleResponse({status:rn.Failed,statusCode:0},e),[3,4];case 4:return[2]}var l}))}))},e.prototype.handleResponse=function(e,t){var r=e.status;switch(r){case rn.Success:this.handleSuccessResponse(e,t);break;case rn.Invalid:this.handleInvalidResponse(e,t);break;case rn.PayloadTooLarge:this.handlePayloadTooLargeResponse(e,t);break;case rn.RateLimit:this.handleRateLimitResponse(e,t);break;default:this.config.loggerProvider.warn("{code: 0, error: \"Status '".concat(r,"' provided for ").concat(t.length,' events"}')),this.handleOtherResponse(t)}},e.prototype.handleSuccessResponse=function(e,t){this.fulfillRequest(t,e.statusCode,"Event tracked successfully")},e.prototype.handleInvalidResponse=function(e,t){var r=this;if(e.body.missingField||e.body.error.startsWith("Invalid API key"))this.fulfillRequest(t,e.statusCode,e.body.error);else{var n=en(en(en(en([],Qr(Object.values(e.body.eventsWithInvalidFields)),!1),Qr(Object.values(e.body.eventsWithMissingFields)),!1),Qr(Object.values(e.body.eventsWithInvalidIdLengths)),!1),Qr(e.body.silencedEvents),!1).flat(),i=new Set(n),o=t.filter((function(t,n){if(!i.has(n))return!0;r.fulfillRequest([t],e.statusCode,e.body.error)}));o.length>0&&this.config.loggerProvider.warn(Sn(e));var s=this.getTryableList(o);this.scheduleTryable(s)}},e.prototype.handlePayloadTooLargeResponse=function(e,t){if(1!==t.length){this.config.loggerProvider.warn(Sn(e)),this.config.flushQueueSize/=2;var r=this.getTryableList(t);this.scheduleTryable(r)}else this.fulfillRequest(t,e.statusCode,e.body.error)},e.prototype.handleRateLimitResponse=function(e,t){var r=this,n=Object.keys(e.body.exceededDailyQuotaUsers),i=Object.keys(e.body.exceededDailyQuotaDevices),o=e.body.throttledEvents,s=new Set(n),a=new Set(i),l=new Set(o),u=t.filter((function(t,n){if(!(t.event.user_id&&s.has(t.event.user_id)||t.event.device_id&&a.has(t.event.device_id)))return l.has(n)&&(t.timeout=r.throttleTimeout),!0;r.fulfillRequest([t],e.statusCode,e.body.error)}));u.length>0&&this.config.loggerProvider.warn(Sn(e));var c=this.getTryableList(u);this.scheduleTryable(c)},e.prototype.handleOtherResponse=function(e){var t=this,r=e.map((function(e){return e.timeout=e.attempts*t.retryTimeout,e})),n=this.getTryableList(r);this.scheduleTryable(n)},e.prototype.fulfillRequest=function(e,t,r){this.removeEvents(e),e.forEach((function(e){return e.callback(dn(e.event,t,r))}))},e.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map((function(e){return e.event}));this.config.storageProvider.set(this.storageKey,e)}},e.prototype.removeEvents=function(e){this.queue=this.queue.filter((function(t){return!e.some((function(e){return e.event.insert_id===t.event.insert_id}))})),this.saveEvents()},e}();!function(e){e.SET="$set",e.SET_ONCE="$setOnce",e.ADD="$add",e.APPEND="$append",e.PREPEND="$prepend",e.REMOVE="$remove",e.PREINSERT="$preInsert",e.POSTINSERT="$postInsert",e.UNSET="$unset",e.CLEAR_ALL="$clearAll"}(kn||(kn={})),function(e){e.REVENUE_PRODUCT_ID="$productId",e.REVENUE_QUANTITY="$quantity",e.REVENUE_PRICE="$price",e.REVENUE_TYPE="$revenueType",e.REVENUE="$revenue"}(In||(In={})),function(e){e.IDENTIFY="$identify",e.GROUP_IDENTIFY="$groupidentify",e.REVENUE="revenue_amount"}(Cn||(Cn={}));var xn=function(e){if(Object.keys(e).length>1e3)return!1;for(var t in e){var r=e[t];if(!On(t,r))return!1}return!0},On=function(e,t){var r,n;if("string"!=typeof e)return!1;if(Array.isArray(t)){var i=!0;try{for(var o=Xr(t),s=o.next();!s.done;s=o.next()){var a=s.value;if(Array.isArray(a))return!1;if("object"==typeof a)i=i&&xn(a);else if(!["number","string"].includes(typeof a))return!1;if(!i)return!1}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}else{if(null==t)return!1;if("object"==typeof t)return xn(t);if(!["number","string","boolean"].includes(typeof t))return!1}return!0},En=function(){function e(){this._propertySet=new Set,this._properties={}}return e.prototype.getUserProperties=function(){return Kr({},this._properties)},e.prototype.set=function(e,t){return this._safeSet(kn.SET,e,t),this},e.prototype.setOnce=function(e,t){return this._safeSet(kn.SET_ONCE,e,t),this},e.prototype.append=function(e,t){return this._safeSet(kn.APPEND,e,t),this},e.prototype.prepend=function(e,t){return this._safeSet(kn.PREPEND,e,t),this},e.prototype.postInsert=function(e,t){return this._safeSet(kn.POSTINSERT,e,t),this},e.prototype.preInsert=function(e,t){return this._safeSet(kn.PREINSERT,e,t),this},e.prototype.remove=function(e,t){return this._safeSet(kn.REMOVE,e,t),this},e.prototype.add=function(e,t){return this._safeSet(kn.ADD,e,t),this},e.prototype.unset=function(e){return this._safeSet(kn.UNSET,e,"-"),this},e.prototype.clearAll=function(){return this._properties={},this._properties[kn.CLEAR_ALL]="-",this},e.prototype._safeSet=function(e,t,r){if(this._validate(e,t,r)){var n=this._properties[e];return void 0===n&&(n={},this._properties[e]=n),n[t]=r,this._propertySet.add(t),!0}return!1},e.prototype._validate=function(e,t,r){return void 0===this._properties[kn.CLEAR_ALL]&&(!this._propertySet.has(t)&&(e===kn.ADD?"number"==typeof r:e===kn.UNSET||e===kn.REMOVE||On(t,r)))},e}(),An=function(){function e(){this.productId="",this.quantity=1,this.price=0}return e.prototype.setProductId=function(e){return this.productId=e,this},e.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},e.prototype.setPrice=function(e){return this.price=e,this},e.prototype.setRevenueType=function(e){return this.revenueType=e,this},e.prototype.setRevenue=function(e){return this.revenue=e,this},e.prototype.setEventProperties=function(e){return xn(e)&&(this.properties=e),this},e.prototype.getEventProperties=function(){var e=this.properties?Kr({},this.properties):{};return e[In.REVENUE_PRODUCT_ID]=this.productId,e[In.REVENUE_QUANTITY]=this.quantity,e[In.REVENUE_PRICE]=this.price,e[In.REVENUE_TYPE]=this.revenueType,e[In.REVENUE]=this.revenue,e},e}(),Rn=function(){function e(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return e.prototype.register=function(e,t){var r,n;return Yr(this,void 0,void 0,(function(){return Hr(this,(function(i){switch(i.label){case 0:return this.plugins.some((function(t){return t.name===e.name}))?(t.loggerProvider.warn("Plugin with name ".concat(e.name," already exists, skipping registration")),[2]):(void 0===e.name&&(e.name=wn(),t.loggerProvider.warn("Plugin name is undefined. \n      Generating a random UUID for plugin name: ".concat(e.name,". \n      Set a name for the plugin to prevent it from being added multiple times."))),e.type=null!==(r=e.type)&&void 0!==r?r:"enrichment",[4,null===(n=e.setup)||void 0===n?void 0:n.call(e,t,this.client)]);case 1:return i.sent(),this.plugins.push(e),[2]}}))}))},e.prototype.deregister=function(e,t){var r;return Yr(this,void 0,void 0,(function(){var n,i;return Hr(this,(function(o){switch(o.label){case 0:return n=this.plugins.findIndex((function(t){return t.name===e})),-1===n?(t.loggerProvider.warn("Plugin with name ".concat(e," does not exist, skipping deregistration")),[2]):(i=this.plugins[n],this.plugins.splice(n,1),[4,null===(r=i.teardown)||void 0===r?void 0:r.call(i)]);case 1:return o.sent(),[2]}}))}))},e.prototype.reset=function(e){this.applying=!1,this.plugins.map((function(e){var t;return null===(t=e.teardown)||void 0===t?void 0:t.call(e)})),this.plugins=[],this.client=e},e.prototype.push=function(e){var t=this;return new Promise((function(r){t.queue.push([e,r]),t.scheduleApply(0)}))},e.prototype.scheduleApply=function(e){var t=this;this.applying||(this.applying=!0,setTimeout((function(){t.apply(t.queue.shift()).then((function(){t.applying=!1,t.queue.length>0&&t.scheduleApply(0)}))}),e))},e.prototype.apply=function(e){return Yr(this,void 0,void 0,(function(){var t,r,n,i,o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,w;return Hr(this,(function(S){switch(S.label){case 0:if(!e)return[2];t=Qr(e,1),r=t[0],n=Qr(e,2),i=n[1],o=this.plugins.filter((function(e){return"before"===e.type})),S.label=1;case 1:S.trys.push([1,6,7,8]),s=Xr(o),a=s.next(),S.label=2;case 2:return a.done?[3,5]:(d=a.value).execute?[4,d.execute(Kr({},r))]:[3,4];case 3:if(null===(p=S.sent()))return i({event:r,code:0,message:""}),[2];r=p,S.label=4;case 4:return a=s.next(),[3,2];case 5:return[3,8];case 6:return l=S.sent(),v={error:l},[3,8];case 7:try{a&&!a.done&&(y=s.return)&&y.call(s)}finally{if(v)throw v.error}return[7];case 8:u=this.plugins.filter((function(e){return"enrichment"===e.type||void 0===e.type})),S.label=9;case 9:S.trys.push([9,14,15,16]),c=Xr(u),h=c.next(),S.label=10;case 10:return h.done?[3,13]:(d=h.value).execute?[4,d.execute(Kr({},r))]:[3,12];case 11:if(null===(p=S.sent()))return i({event:r,code:0,message:""}),[2];r=p,S.label=12;case 12:return h=c.next(),[3,10];case 13:return[3,16];case 14:return f=S.sent(),b={error:f},[3,16];case 15:try{h&&!h.done&&(w=c.return)&&w.call(c)}finally{if(b)throw b.error}return[7];case 16:return g=this.plugins.filter((function(e){return"destination"===e.type})),m=g.map((function(e){var t=Kr({},r);return e.execute(t).catch((function(e){return dn(t,0,String(e))}))})),Promise.all(m).then((function(e){var t=Qr(e,1)[0]||dn(r,100,"Event not tracked, no destination plugins on the instance");i(t)})),[2]}}))}))},e.prototype.flush=function(){return Yr(this,void 0,void 0,(function(){var e,t,r,n=this;return Hr(this,(function(i){switch(i.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map((function(e){return n.apply(e)})))];case 1:return i.sent(),t=this.plugins.filter((function(e){return"destination"===e.type})),r=t.map((function(e){return e.flush&&e.flush()})),[4,Promise.all(r)];case 2:return i.sent(),[2]}}))}))},e}(),Tn=function(e,t){return Kr(Kr({},t),{event_type:Cn.IDENTIFY,user_properties:e.getUserProperties()})},Mn=function(){function e(e){void 0===e&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new Rn(this),this.name=e}return e.prototype._init=function(e){return Yr(this,void 0,void 0,(function(){return Hr(this,(function(t){switch(t.label){case 0:return this.config=e,this.timeline.reset(this),[4,this.runQueuedFunctions("q")];case 1:return t.sent(),this.isReady=!0,[2]}}))}))},e.prototype.runQueuedFunctions=function(e){return Yr(this,void 0,void 0,(function(){var t,r,n,i,o,s,a,l;return Hr(this,(function(u){switch(u.label){case 0:t=this[e],this[e]=[],u.label=1;case 1:u.trys.push([1,8,9,10]),r=Xr(t),n=r.next(),u.label=2;case 2:return n.done?[3,7]:(i=n.value,(o=i())&&"promise"in o?[4,o.promise]:[3,4]);case 3:return u.sent(),[3,6];case 4:return[4,o];case 5:u.sent(),u.label=6;case 6:return n=r.next(),[3,2];case 7:return[3,10];case 8:return s=u.sent(),a={error:s},[3,10];case 9:try{n&&!n.done&&(l=r.return)&&l.call(r)}finally{if(a)throw a.error}return[7];case 10:return this[e].length?[4,this.runQueuedFunctions(e)]:[3,12];case 11:u.sent(),u.label=12;case 12:return[2]}}))}))},e.prototype.track=function(e,t,r){var n=function(e,t,r){return Kr(Kr(Kr({},"string"==typeof e?{event_type:e}:e),r),t&&{event_properties:t})}(e,t,r);return ln(this.dispatch(n))},e.prototype.identify=function(e,t){var r=Tn(e,t);return ln(this.dispatch(r))},e.prototype.groupIdentify=function(e,t,r,n){var i=function(e,t,r,n){var i;return Kr(Kr({},n),{event_type:Cn.GROUP_IDENTIFY,group_properties:r.getUserProperties(),groups:(i={},i[e]=t,i)})}(e,t,r,n);return ln(this.dispatch(i))},e.prototype.setGroup=function(e,t,r){var n=function(e,t,r){var n,i=new En;return i.set(e,t),Kr(Kr({},r),{event_type:Cn.IDENTIFY,user_properties:i.getUserProperties(),groups:(n={},n[e]=t,n)})}(e,t,r);return ln(this.dispatch(n))},e.prototype.revenue=function(e,t){var r=function(e,t){return Kr(Kr({},t),{event_type:Cn.REVENUE,event_properties:e.getEventProperties()})}(e,t);return ln(this.dispatch(r))},e.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),ln())},e.prototype._addPlugin=function(e){return ln(this.timeline.register(e,this.config))},e.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),ln())},e.prototype._removePlugin=function(e){return ln(this.timeline.deregister(e,this.config))},e.prototype.dispatchWithCallback=function(e,t){if(!this.isReady)return t(dn(e,0,"Client not initialized"));this.process(e).then(t)},e.prototype.dispatch=function(e){return Yr(this,void 0,void 0,(function(){var t=this;return Hr(this,(function(r){return this.isReady?[2,this.process(e)]:[2,new Promise((function(r){t.dispatchQ.push(t.dispatchWithCallback.bind(t,e,r))}))]}))}))},e.prototype.process=function(e){return Yr(this,void 0,void 0,(function(){var t,r,n;return Hr(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.config.optOut?[2,dn(e,0,"Event skipped due to optOut config")]:[4,this.timeline.push(e)];case 1:return 200===(n=i.sent()).code?this.config.loggerProvider.log(n.message):100===n.code?this.config.loggerProvider.warn(n.message):this.config.loggerProvider.error(n.message),[2,n];case 2:return t=i.sent(),r=String(t),this.config.loggerProvider.error(r),[2,n=dn(e,0,r)];case 3:return[2]}}))}))},e.prototype.setOptOut=function(e){this.isReady?this._setOptOut(e):this.q.push(this._setOptOut.bind(this,Boolean(e)))},e.prototype._setOptOut=function(e){this.config.optOut=Boolean(e)},e.prototype.flush=function(){return ln(this.timeline.flush())},e}(),Pn=function(e,t){return"boolean"==typeof e?e:!1!==(null==e?void 0:e[t])},Nn=function(e){return Pn(e,"attribution")},Ln=function(e){return Pn(e,"pageViews")},Dn=function(e){return Pn(e,"sessions")},jn=function(e){return"boolean"==typeof e?e:"object"==typeof e&&(!0===e.elementInteractions||"object"==typeof e.elementInteractions)},Un=function(e){if(jn(e.autocapture)&&"object"==typeof e.autocapture&&"object"==typeof e.autocapture.elementInteractions)return e.autocapture.elementInteractions},Fn=function(e){var t,r=function(){return!1},n=void 0,i=e.pageCounter;return Ln(e.defaultTracking)&&(r=void 0,t=void 0,e.defaultTracking&&"object"==typeof e.defaultTracking&&e.defaultTracking.pageViews&&"object"==typeof e.defaultTracking.pageViews&&("trackOn"in e.defaultTracking.pageViews&&(r=e.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in e.defaultTracking.pageViews&&(n=e.defaultTracking.pageViews.trackHistoryChanges),"eventType"in e.defaultTracking.pageViews&&e.defaultTracking.pageViews.eventType&&(t=e.defaultTracking.pageViews.eventType))),{trackOn:r,trackHistoryChanges:n,eventType:t,pageCounter:i}},Bn="dclid",qn="fbclid",zn="gbraid",Wn="gclid",$n="ko_click_id",Vn="li_fat_id",Gn="msclkid",Jn="rtd_cid",Kn="ttclid",Zn="twclid",Yn="wbraid",Hn={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},Xn=function(e){var t=e.split(".");return t.length<=2?e:t.slice(t.length-2,t.length).join(".")},Qn=function(e,t,r,n,i){void 0===i&&(i=!0);e.referrer;var o=e.referring_domain,s=Zr(e,["referrer","referring_domain"]),a=t||{},l=(a.referrer,a.referring_domain),u=Zr(a,["referrer","referring_domain"]);if(ei(r.excludeReferrers,e.referring_domain))return n.debug("This is not a new campaign because ".concat(e.referring_domain," is in the exclude referrer list.")),!1;if(!i&&function(e){return Object.values(e).every((function(e){return!e}))}(e)&&t)return n.debug("This is not a new campaign because this is a direct traffic in the same session."),!1;var c=JSON.stringify(s)!==JSON.stringify(u),h=Xn(o||"")!==Xn(l||""),d=!t||c||h;return d?n.debug("This is a new campaign. An $identify event will be sent."):n.debug("This is not a new campaign because it's the same as the previous one."),d},ei=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=""),e.some((function(e){return e instanceof RegExp?e.test(t):e===t}))},ti=function(){var e="ampIntegrationContext";return"undefined"!=typeof globalThis&&void 0!==globalThis[e]?globalThis[e]:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==r.g?r.g:void 0},ri=function(){var e,t=ti();return(null===(e=null==t?void 0:t.location)||void 0===e?void 0:e.search)?t.location.search.substring(1).split("&").filter(Boolean).reduce((function(e,t){var r=t.split("=",2),n=ni(r[0]),i=ni(r[1]);return i?(e[n]=i,e):e}),{}):{}},ni=function(e){void 0===e&&(e="");try{return decodeURIComponent(e)}catch(e){return""}},ii=function(){function e(){}return e.prototype.parse=function(){return Yr(this,void 0,void 0,(function(){return Hr(this,(function(e){return[2,Kr(Kr(Kr(Kr({},Hn),this.getUtmParam()),this.getReferrer()),this.getClickIds())]}))}))},e.prototype.getUtmParam=function(){var e=ri();return{utm_campaign:e.utm_campaign,utm_content:e.utm_content,utm_id:e.utm_id,utm_medium:e.utm_medium,utm_source:e.utm_source,utm_term:e.utm_term}},e.prototype.getReferrer=function(){var e,t,r={referrer:void 0,referring_domain:void 0};try{r.referrer=document.referrer||void 0,r.referring_domain=null!==(t=null===(e=r.referrer)||void 0===e?void 0:e.split("/")[2])&&void 0!==t?t:void 0}catch(e){}return r},e.prototype.getClickIds=function(){var e,t=ri();return(e={})[Bn]=t[Bn],e[qn]=t[qn],e[zn]=t[zn],e[Wn]=t[Wn],e[$n]=t[$n],e[Vn]=t[Vn],e[Gn]=t[Gn],e[Jn]=t[Jn],e[Kn]=t[Kn],e[Zn]=t[Zn],e[Yn]=t[Yn],e},e}(),oi=function(e,t){return void 0===t&&(t=Date.now()),Date.now()-t>e},si=function(){function e(e,t){var r,n,i,o,s,a;this.shouldTrackNewCampaign=!1,this.options=Kr({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:(n=null===(r=t.cookieOptions)||void 0===r?void 0:r.domain,i=n,i?(i.startsWith(".")&&(i=i.substring(1)),[new RegExp("".concat(i.replace(".","\\."),"$"))]):[])},e),this.storage=t.cookieStorage,this.storageKey=(o=t.apiKey,void 0===(s="MKTG")&&(s=""),void 0===a&&(a=10),[un,s,o.substring(0,a)].filter(Boolean).join("_")),this.currentCampaign=Hn,this.sessionTimeout=t.sessionTimeout,this.lastEventTime=t.lastEventTime,this.logger=t.loggerProvider,t.loggerProvider.log("Installing web attribution tracking.")}return e.prototype.init=function(){return Yr(this,void 0,void 0,(function(){var e,t;return Hr(this,(function(r){switch(r.label){case 0:return[4,this.fetchCampaign()];case 1:return t=Qr.apply(void 0,[r.sent(),2]),this.currentCampaign=t[0],this.previousCampaign=t[1],e=!this.lastEventTime||oi(this.sessionTimeout,this.lastEventTime),Qn(this.currentCampaign,this.previousCampaign,this.options,this.logger,e)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.fetchCampaign=function(){return Yr(this,void 0,void 0,(function(){return Hr(this,(function(e){switch(e.label){case 0:return[4,Promise.all([(new ii).parse(),this.storage.get(this.storageKey)])];case 1:return[2,e.sent()]}}))}))},e.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var t,r,n,i,o=(t=this.currentCampaign,r=this.options,n=Kr(Kr({},Hn),t),i=Object.entries(n).reduce((function(e,t){var n,i=Qr(t,2),o=i[0],s=i[1];return e.setOnce("initial_".concat(o),null!==(n=null!=s?s:r.initialEmptyValue)&&void 0!==n?n:"EMPTY"),s?e.set(o,s):e.unset(o)}),new En),Tn(i));return e&&(o.event_id=e),o},e.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},e}(),ai=function(){function e(){}return e.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:li(),platform:"Web",os:void 0,deviceModel:void 0}},e}(),li=function(){return"undefined"!=typeof navigator&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},ui=function(){function e(){this.queue=[]}return e.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},e.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach((function(t){e(t)})),this.queue=[])},e}(),ci=function(){return ci=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ci.apply(this,arguments)},hi=function(e,t){var r=typeof e;if(r!==typeof t)return!1;for(var n=0,i=["string","number","boolean","undefined"];n<i.length;n++){if(i[n]===r)return e===t}if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;var o=Array.isArray(e),s=Array.isArray(t);if(o!==s)return!1;if(!o||!s){var a=Object.keys(e).sort(),l=Object.keys(t).sort();if(!hi(a,l))return!1;var u=!0;return Object.keys(e).forEach((function(r){hi(e[r],t[r])||(u=!1)})),u}for(var c=0;c<e.length;c++)if(!hi(e[c],t[c]))return!1;return!0};Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),r=t.length,n=new Array(r);r--;)n[r]=[t[r],e[t[r]]];return n});var di=function(){function e(){this.identity={userProperties:{}},this.listeners=new Set}return e.prototype.editIdentity=function(){var e=this,t=ci({},this.identity.userProperties),r=ci(ci({},this.identity),{userProperties:t});return{setUserId:function(e){return r.userId=e,this},setDeviceId:function(e){return r.deviceId=e,this},setUserProperties:function(e){return r.userProperties=e,this},setOptOut:function(e){return r.optOut=e,this},updateUserProperties:function(e){for(var t=r.userProperties||{},n=0,i=Object.entries(e);n<i.length;n++){var o=i[n],s=o[0],a=o[1];switch(s){case"$set":for(var l=0,u=Object.entries(a);l<u.length;l++){var c=u[l],h=c[0],d=c[1];t[h]=d}break;case"$unset":for(var p=0,f=Object.keys(a);p<f.length;p++){delete t[h=f[p]]}break;case"$clearAll":t={}}}return r.userProperties=t,this},commit:function(){return e.setIdentity(r),this}}},e.prototype.getIdentity=function(){return ci({},this.identity)},e.prototype.setIdentity=function(e){var t=ci({},this.identity);this.identity=ci({},e),hi(t,this.identity)||this.listeners.forEach((function(t){t(e)}))},e.prototype.addIdentityListener=function(e){this.listeners.add(e)},e.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},e}(),pi="undefined"!=typeof globalThis?globalThis:void 0!==r.g?r.g:self,fi=function(){function e(){this.identityStore=new di,this.eventBridge=new ui,this.applicationContextProvider=new ai}return e.getInstance=function(t){return pi.analyticsConnectorInstances||(pi.analyticsConnectorInstances={}),pi.analyticsConnectorInstances[t]||(pi.analyticsConnectorInstances[t]=new e),pi.analyticsConnectorInstances[t]},e}(),gi=function(e){return void 0===e&&(e="$default_instance"),fi.getInstance(e)},mi=function(){function e(){this.name="identity",this.type="before",this.identityStore=gi().identityStore}return e.prototype.execute=function(e){return Yr(this,void 0,void 0,(function(){var t;return Hr(this,(function(r){return(t=e.user_properties)&&this.identityStore.editIdentity().updateUserProperties(t).commit(),[2,e]}))}))},e.prototype.setup=function(e){return Yr(this,void 0,void 0,(function(){return Hr(this,(function(t){return e.instanceName&&(this.identityStore=gi(e.instanceName).identityStore),[2]}))}))},e}(),vi=function(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.name,o=n.args,s=n.resolve,a=e&&e[i];if("function"==typeof a){var l=a.apply(e,o);"function"==typeof s&&s(null==l?void 0:l.promise)}}return e},yi=function(e){return e&&void 0!==e._q},bi=function(){var e,t,r,n;if("undefined"==typeof navigator)return"";var i=navigator.userLanguage;return null!==(n=null!==(r=null!==(t=null===(e=navigator.languages)||void 0===e?void 0:e[0])&&void 0!==t?t:navigator.language)&&void 0!==r?r:i)&&void 0!==n?n:""},wi=function(){function e(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="".concat("amplitude-ts","/").concat("2.11.11"),"undefined"!=typeof navigator&&(this.userAgent=navigator.userAgent)}return e.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},e.prototype.execute=function(e){var t,r;return Yr(this,void 0,void 0,(function(){var n,i,o;return Hr(this,(function(s){return n=(new Date).getTime(),i=null!==(t=this.config.lastEventId)&&void 0!==t?t:-1,o=null!==(r=e.event_id)&&void 0!==r?r:i+1,this.config.lastEventId=o,e.time||(this.config.lastEventTime=n),[2,Kr(Kr(Kr(Kr(Kr(Kr(Kr(Kr({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:n},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:"Web"}),this.config.trackingOptions.language&&{language:bi()}),this.config.trackingOptions.ipAddress&&{ip:"$remote"}),{insert_id:wn(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:o,library:this.library,user_agent:this.userAgent})]}))}))},e}(),Si=function(){function e(){this.memoryStorage=new Map}return e.prototype.isEnabled=function(){return Yr(this,void 0,void 0,(function(){return Hr(this,(function(e){return[2,!0]}))}))},e.prototype.get=function(e){return Yr(this,void 0,void 0,(function(){return Hr(this,(function(t){return[2,this.memoryStorage.get(e)]}))}))},e.prototype.getRaw=function(e){return Yr(this,void 0,void 0,(function(){var t;return Hr(this,(function(r){switch(r.label){case 0:return[4,this.get(e)];case 1:return[2,(t=r.sent())?JSON.stringify(t):void 0]}}))}))},e.prototype.set=function(e,t){return Yr(this,void 0,void 0,(function(){return Hr(this,(function(r){return this.memoryStorage.set(e,t),[2]}))}))},e.prototype.remove=function(e){return Yr(this,void 0,void 0,(function(){return Hr(this,(function(t){return this.memoryStorage.delete(e),[2]}))}))},e.prototype.reset=function(){return Yr(this,void 0,void 0,(function(){return Hr(this,(function(e){return this.memoryStorage.clear(),[2]}))}))},e}(),ki=function(e,t,r){return void 0===t&&(t=""),void 0===r&&(r=10),[un,t,e.substring(0,r)].filter(Boolean).join("_")},Ii=function(){function e(e){this.options=Kr({},e)}return e.prototype.isEnabled=function(){return Yr(this,void 0,void 0,(function(){var t,r;return Hr(this,(function(n){switch(n.label){case 0:if(!ti())return[2,!1];e.testValue=String(Date.now()),t=new e(this.options),r="AMP_TEST",n.label=1;case 1:return n.trys.push([1,4,5,7]),[4,t.set(r,e.testValue)];case 2:return n.sent(),[4,t.get(r)];case 3:return[2,n.sent()===e.testValue];case 4:return n.sent(),[2,!1];case 5:return[4,t.remove(r)];case 6:return n.sent(),[7];case 7:return[2]}}))}))},e.prototype.get=function(e){var t;return Yr(this,void 0,void 0,(function(){var r,n;return Hr(this,(function(i){switch(i.label){case 0:return[4,this.getRaw(e)];case 1:if(!(r=i.sent()))return[2,void 0];try{return void 0===(n=null!==(t=Ci(r))&&void 0!==t?t:_i(r))?(console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(e,", value: ").concat(r)),[2,void 0]):[2,JSON.parse(n)]}catch(t){return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(e,", value: ").concat(r)),[2,void 0]}return[2]}}))}))},e.prototype.getRaw=function(e){var t,r;return Yr(this,void 0,void 0,(function(){var n,i,o;return Hr(this,(function(s){return n=ti(),i=null!==(r=null===(t=null==n?void 0:n.document)||void 0===t?void 0:t.cookie.split("; "))&&void 0!==r?r:[],o=i.find((function(t){return 0===t.indexOf(e+"=")})),o?[2,o.substring(e.length+1)]:[2,void 0]}))}))},e.prototype.set=function(e,t){var r;return Yr(this,void 0,void 0,(function(){var n,i,o,s,a,l,u;return Hr(this,(function(c){try{n=null!==(r=this.options.expirationDays)&&void 0!==r?r:0,o=void 0,(i=null!==t?n:-1)&&((s=new Date).setTime(s.getTime()+24*i*60*60*1e3),o=s),a="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(t)))),o&&(a+="; expires=".concat(o.toUTCString())),a+="; path=/",this.options.domain&&(a+="; domain=".concat(this.options.domain)),this.options.secure&&(a+="; Secure"),this.options.sameSite&&(a+="; SameSite=".concat(this.options.sameSite)),(l=ti())&&(l.document.cookie=a)}catch(t){u=t instanceof Error?t.message:String(t),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(e,". Error: ").concat(u))}return[2]}))}))},e.prototype.remove=function(e){return Yr(this,void 0,void 0,(function(){return Hr(this,(function(t){switch(t.label){case 0:return[4,this.set(e,null)];case 1:return t.sent(),[2]}}))}))},e.prototype.reset=function(){return Yr(this,void 0,void 0,(function(){return Hr(this,(function(e){return[2]}))}))},e}(),Ci=function(e){try{return decodeURIComponent(atob(e))}catch(e){return}},_i=function(e){try{return decodeURIComponent(atob(decodeURIComponent(e)))}catch(e){return}},xi=function(){function e(){}return e.prototype.send=function(e,t){return Promise.resolve(null)},e.prototype.buildResponse=function(e){var t,r,n,i,o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,w,S,k;if("object"!=typeof e)return null;var I=e.code||0,C=this.buildStatus(I);switch(C){case rn.Success:return{status:C,statusCode:I,body:{eventsIngested:null!==(t=e.events_ingested)&&void 0!==t?t:0,payloadSizeBytes:null!==(r=e.payload_size_bytes)&&void 0!==r?r:0,serverUploadTime:null!==(n=e.server_upload_time)&&void 0!==n?n:0}};case rn.Invalid:return{status:C,statusCode:I,body:{error:null!==(i=e.error)&&void 0!==i?i:"",missingField:null!==(o=e.missing_field)&&void 0!==o?o:"",eventsWithInvalidFields:null!==(s=e.events_with_invalid_fields)&&void 0!==s?s:{},eventsWithMissingFields:null!==(a=e.events_with_missing_fields)&&void 0!==a?a:{},eventsWithInvalidIdLengths:null!==(l=e.events_with_invalid_id_lengths)&&void 0!==l?l:{},epsThreshold:null!==(u=e.eps_threshold)&&void 0!==u?u:0,exceededDailyQuotaDevices:null!==(c=e.exceeded_daily_quota_devices)&&void 0!==c?c:{},silencedDevices:null!==(h=e.silenced_devices)&&void 0!==h?h:[],silencedEvents:null!==(d=e.silenced_events)&&void 0!==d?d:[],throttledDevices:null!==(p=e.throttled_devices)&&void 0!==p?p:{},throttledEvents:null!==(f=e.throttled_events)&&void 0!==f?f:[]}};case rn.PayloadTooLarge:return{status:C,statusCode:I,body:{error:null!==(g=e.error)&&void 0!==g?g:""}};case rn.RateLimit:return{status:C,statusCode:I,body:{error:null!==(m=e.error)&&void 0!==m?m:"",epsThreshold:null!==(v=e.eps_threshold)&&void 0!==v?v:0,throttledDevices:null!==(y=e.throttled_devices)&&void 0!==y?y:{},throttledUsers:null!==(b=e.throttled_users)&&void 0!==b?b:{},exceededDailyQuotaDevices:null!==(w=e.exceeded_daily_quota_devices)&&void 0!==w?w:{},exceededDailyQuotaUsers:null!==(S=e.exceeded_daily_quota_users)&&void 0!==S?S:{},throttledEvents:null!==(k=e.throttled_events)&&void 0!==k?k:[]}};case rn.Timeout:default:return{status:C,statusCode:I}}},e.prototype.buildStatus=function(e){return e>=200&&e<300?rn.Success:429===e?rn.RateLimit:413===e?rn.PayloadTooLarge:408===e?rn.Timeout:e>=400&&e<500?rn.Invalid:e>=500?rn.Failed:rn.Unknown},e}(),Oi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Jr(t,e),t.prototype.send=function(e,t){return Yr(this,void 0,void 0,(function(){var r,n,i;return Hr(this,(function(o){switch(o.label){case 0:if("undefined"==typeof fetch)throw new Error("FetchTransport is not supported");return r={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(t),method:"POST"},[4,fetch(e,r)];case 1:return[4,(n=o.sent()).text()];case 2:i=o.sent();try{return[2,this.buildResponse(JSON.parse(i))]}catch(e){return[2,this.buildResponse({code:n.status})]}return[2]}}))}))},t}(xi),Ei=function(){function e(e){this.storage=e}return e.prototype.isEnabled=function(){return Yr(this,void 0,void 0,(function(){var t,r,n;return Hr(this,(function(i){switch(i.label){case 0:if(!this.storage)return[2,!1];t=String(Date.now()),r=new e(this.storage),n="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,r.set(n,t)];case 2:return i.sent(),[4,r.get(n)];case 3:return[2,i.sent()===t];case 4:return i.sent(),[2,!1];case 5:return[4,r.remove(n)];case 6:return i.sent(),[7];case 7:return[2]}}))}))},e.prototype.get=function(e){return Yr(this,void 0,void 0,(function(){var t;return Hr(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return(t=r.sent())?[2,JSON.parse(t)]:[2,void 0];case 2:return r.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}}))}))},e.prototype.getRaw=function(e){var t;return Yr(this,void 0,void 0,(function(){return Hr(this,(function(r){return[2,(null===(t=this.storage)||void 0===t?void 0:t.getItem(e))||void 0]}))}))},e.prototype.set=function(e,t){var r;return Yr(this,void 0,void 0,(function(){return Hr(this,(function(n){try{null===(r=this.storage)||void 0===r||r.setItem(e,JSON.stringify(t))}catch(e){}return[2]}))}))},e.prototype.remove=function(e){var t;return Yr(this,void 0,void 0,(function(){return Hr(this,(function(r){try{null===(t=this.storage)||void 0===t||t.removeItem(e)}catch(e){}return[2]}))}))},e.prototype.reset=function(){var e;return Yr(this,void 0,void 0,(function(){return Hr(this,(function(t){try{null===(e=this.storage)||void 0===e||e.clear()}catch(e){}return[2]}))}))},e}(),Ai=1e3,Ri=function(e){function t(t){var r,n=this;return(n=e.call(this,null===(r=ti())||void 0===r?void 0:r.localStorage)||this).loggerProvider=null==t?void 0:t.loggerProvider,n}return Jr(t,e),t.prototype.set=function(t,r){var n;return Yr(this,void 0,void 0,(function(){var i;return Hr(this,(function(o){switch(o.label){case 0:return Array.isArray(r)&&r.length>Ai?(i=r.length-Ai,[4,e.prototype.set.call(this,t,r.slice(0,Ai))]):[3,2];case 1:return o.sent(),null===(n=this.loggerProvider)||void 0===n||n.error("Failed to save ".concat(i," events because the queue length exceeded ").concat(Ai,".")),[3,4];case 2:return[4,e.prototype.set.call(this,t,r)];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))},t}(Ei),Ti=function(e){function t(){var t;return e.call(this,null===(t=ti())||void 0===t?void 0:t.sessionStorage)||this}return Jr(t,e),t}(Ei),Mi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={done:4},t}return Jr(t,e),t.prototype.send=function(e,t){return Yr(this,void 0,void 0,(function(){var r=this;return Hr(this,(function(n){return[2,new Promise((function(n,i){"undefined"==typeof XMLHttpRequest&&i(new Error("XHRTransport is not supported."));var o=new XMLHttpRequest;o.open("POST",e,!0),o.onreadystatechange=function(){if(o.readyState===r.state.done){var e=o.responseText;try{n(r.buildResponse(JSON.parse(e)))}catch(e){n(r.buildResponse({code:o.status}))}}},o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Accept","*/*"),o.send(JSON.stringify(t))}))]}))}))},t}(xi),Pi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Jr(t,e),t.prototype.send=function(e,t){return Yr(this,void 0,void 0,(function(){var r=this;return Hr(this,(function(n){return[2,new Promise((function(n,i){var o=ti();if(!(null==o?void 0:o.navigator.sendBeacon))throw new Error("SendBeaconTransport is not supported");try{var s=JSON.stringify(t);return n(o.navigator.sendBeacon(e,JSON.stringify(t))?r.buildResponse({code:200,events_ingested:t.events.length,payload_size_bytes:s.length,server_upload_time:Date.now()}):r.buildResponse({code:500}))}catch(e){i(e)}}))]}))}))},t}(xi),Ni=function(e,t,r){return void 0===r&&(r=!0),Yr(void 0,void 0,void 0,(function(){var n,i,o,s,a,l,u,c,h;return Hr(this,(function(d){switch(d.label){case 0:return n=function(e){return"".concat(un.toLowerCase(),"_").concat(e.substring(0,6))}(e),[4,t.getRaw(n)];case 1:return(i=d.sent())?r?[4,t.remove(n)]:[3,3]:[2,{optOut:!1}];case 2:d.sent(),d.label=3;case 3:return o=Qr(i.split("."),6),s=o[0],a=o[1],l=o[2],u=o[3],c=o[4],h=o[5],[2,{deviceId:s,userId:Di(a),sessionId:Li(u),lastEventId:Li(h),lastEventTime:Li(c),optOut:Boolean(l)}]}}))}))},Li=function(e){var t=parseInt(e,32);if(!isNaN(t))return t},Di=function(e){if(atob&&escape&&e)try{return decodeURIComponent(escape(atob(e)))}catch(e){return}},ji="[Amplitude]",Ui=("".concat(ji," Page Viewed"),"".concat(ji," Form Started")),Fi="".concat(ji," Form Submitted"),Bi="".concat(ji," File Downloaded"),qi="session_start",zi="session_end",Wi="".concat(ji," File Extension"),$i="".concat(ji," File Name"),Vi="".concat(ji," Link ID"),Gi="".concat(ji," Link Text"),Ji="".concat(ji," Link URL"),Ki="".concat(ji," Form ID"),Zi="".concat(ji," Form Name"),Yi="".concat(ji," Form Destination"),Hi="cookie",Xi=function(e){function t(t,r,n,i,o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,w,S,k,I,C,_,x,O,E,A,R,T,M,P,N){void 0===n&&(n=new Si),void 0===i&&(i={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),void 0===l&&(l=1e3),void 0===u&&(u=5),void 0===c&&(c=30),void 0===h&&(h=Hi),void 0===m&&(m=new fn),void 0===v&&(v=tn.Warn),void 0===b&&(b=!1),void 0===w&&(w=!1),void 0===I&&(I=""),void 0===C&&(C="US"),void 0===x&&(x=18e5),void 0===O&&(O=new Ri({loggerProvider:m})),void 0===E&&(E={ipAddress:!0,language:!0,platform:!0}),void 0===A&&(A="fetch"),void 0===R&&(R=!1),void 0===T&&(T=!1);var L=e.call(this,{apiKey:t,storageProvider:O,transportProvider:to(A)})||this;return L.apiKey=t,L.appVersion=r,L.cookieOptions=i,L.defaultTracking=o,L.autocapture=s,L.flushIntervalMillis=l,L.flushMaxRetries=u,L.flushQueueSize=c,L.identityStorage=h,L.ingestionMetadata=d,L.instanceName=p,L.loggerProvider=m,L.logLevel=v,L.minIdLength=y,L.offline=b,L.partnerId=S,L.plan=k,L.serverUrl=I,L.serverZone=C,L.sessionTimeout=x,L.storageProvider=O,L.trackingOptions=E,L.transport=A,L.useBatch=R,L.fetchRemoteConfig=T,L._optOut=!1,L._cookieStorage=n,L.deviceId=a,L.lastEventId=f,L.lastEventTime=g,L.optOut=w,L.sessionId=_,L.pageCounter=P,L.userId=M,L.debugLogsEnabled=N,L.loggerProvider.enable(N?tn.Debug:L.logLevel),L}return Jr(t,e),Object.defineProperty(t.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(e){this._cookieStorage!==e&&(this._cookieStorage=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceId",{get:function(){return this._deviceId},set:function(e){this._deviceId!==e&&(this._deviceId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userId",{get:function(){return this._userId},set:function(e){this._userId!==e&&(this._userId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionId",{get:function(){return this._sessionId},set:function(e){this._sessionId!==e&&(this._sessionId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut!==e&&(this._optOut=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(e){this._lastEventTime!==e&&(this._lastEventTime=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(e){this._lastEventId!==e&&(this._lastEventId=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(e){this._pageCounter!==e&&(this._pageCounter=e,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"debugLogsEnabled",{set:function(e){this._debugLogsEnabled!==e&&(this._debugLogsEnabled=e,this.updateStorage())},enumerable:!1,configurable:!0}),t.prototype.updateStorage=function(){var e={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled};this.cookieStorage.set(ki(this.apiKey),e)},t}(mn),Qi=function(e,t,r){return void 0===t&&(t={}),Yr(void 0,void 0,void 0,(function(){var n,i,o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,w,S,k,I,C,_,x,O,E,A,R,T,M,P,N,L,D,j,U,F,B,q,z,W,$,V;return Hr(this,(function(G){switch(G.label){case 0:return n=t.identityStorage||Hi,S={},n===Hi?[3,1]:(o="",[3,5]);case 1:return null===(I=null===(k=t.cookieOptions)||void 0===k?void 0:k.domain)||void 0===I?[3,2]:(s=I,[3,4]);case 2:return[4,ro()];case 3:s=G.sent(),G.label=4;case 4:o=s,G.label=5;case 5:return i=Kr.apply(void 0,[(S.domain=o,S.expiration=365,S.sameSite="Lax",S.secure=!1,S.upgrade=!0,S),t.cookieOptions]),a=eo(t.identityStorage,i),[4,Ni(e,a,null===(_=null===(C=t.cookieOptions)||void 0===C?void 0:C.upgrade)||void 0===_||_)];case 6:return l=G.sent(),[4,a.get(ki(e))];case 7:return u=G.sent(),c=ri(),h=null!==(R=null!==(A=null!==(E=null!==(O=null!==(x=t.deviceId)&&void 0!==x?x:c.ampDeviceId)&&void 0!==O?O:c.deviceId)&&void 0!==E?E:null==u?void 0:u.deviceId)&&void 0!==A?A:l.deviceId)&&void 0!==R?R:wn(),d=null!==(T=null==u?void 0:u.lastEventId)&&void 0!==T?T:l.lastEventId,p=null!==(M=null==u?void 0:u.lastEventTime)&&void 0!==M?M:l.lastEventTime,f=null!==(N=null!==(P=t.optOut)&&void 0!==P?P:null==u?void 0:u.optOut)&&void 0!==N?N:l.optOut,g=null!==(L=null==u?void 0:u.sessionId)&&void 0!==L?L:l.sessionId,m=null!==(j=null!==(D=t.userId)&&void 0!==D?D:null==u?void 0:u.userId)&&void 0!==j?j:l.userId,r.previousSessionDeviceId=null!==(U=null==u?void 0:u.deviceId)&&void 0!==U?U:l.deviceId,r.previousSessionUserId=null!==(F=null==u?void 0:u.userId)&&void 0!==F?F:l.userId,v={ipAddress:null===(q=null===(B=t.trackingOptions)||void 0===B?void 0:B.ipAddress)||void 0===q||q,language:null===(W=null===(z=t.trackingOptions)||void 0===z?void 0:z.language)||void 0===W||W,platform:null===(V=null===($=t.trackingOptions)||void 0===$?void 0:$.platform)||void 0===V||V},y=null==u?void 0:u.pageCounter,b=null==u?void 0:u.debugLogsEnabled,void 0!==t.autocapture&&(t.defaultTracking=t.autocapture),[4,(w=new Xi(e,t.appVersion,a,i,t.defaultTracking,t.autocapture,h,t.flushIntervalMillis,t.flushMaxRetries,t.flushQueueSize,n,t.ingestionMetadata,t.instanceName,d,p,t.loggerProvider,t.logLevel,t.minIdLength,t.offline,f,t.partnerId,t.plan,t.serverUrl,t.serverZone,g,t.sessionTimeout,t.storageProvider,v,t.transport,t.useBatch,t.fetchRemoteConfig,m,y,b)).storageProvider.isEnabled()];case 8:return G.sent()||(w.loggerProvider.warn("Storage provider ".concat(w.storageProvider.constructor.name," is not enabled. Falling back to MemoryStorage.")),w.storageProvider=new Si),[2,w]}}))}))},eo=function(e,t){switch(void 0===e&&(e=Hi),void 0===t&&(t={}),e){case"localStorage":return new Ri;case"sessionStorage":return new Ti;case"none":return new Si;default:return new Ii(Kr(Kr({},t),{expirationDays:t.expiration}))}},to=function(e){return"xhr"===e?new Mi:"beacon"===e?new Pi:new Oi},ro=function(e){return Yr(void 0,void 0,void 0,(function(){var t,r,n,i,o,s,a;return Hr(this,(function(l){switch(l.label){case 0:return[4,(new Ii).isEnabled()];case 1:if(!l.sent()||!e&&("undefined"==typeof location||!location.hostname))return[2,""];for(t=null!=e?e:location.hostname,r=t.split("."),n=[],i="AMP_TLDTEST",o=r.length-2;o>=0;--o)n.push(r.slice(o).join("."));o=0,l.label=2;case 2:return o<n.length?(s=n[o],[4,(a=new Ii({domain:"."+s})).set(i,1)]):[3,7];case 3:return l.sent(),[4,a.get(i)];case 4:return l.sent()?[4,a.remove(i)]:[3,6];case 5:return l.sent(),[2,"."+s];case 6:return o++,[3,2];case 7:return[2,""]}}))}))};var no=function(){return no=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},no.apply(this,arguments)};function io(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))}function oo(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;function so(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function ao(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var lo,uo,co,ho=function(){var e="ampIntegrationContext";return"undefined"!=typeof globalThis&&void 0!==globalThis[e]?globalThis[e]:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==r.g?r.g:void 0},po=function(){var e,t=ho();return(null===(e=null==t?void 0:t.location)||void 0===e?void 0:e.search)?t.location.search.substring(1).split("&").filter(Boolean).reduce((function(e,t){var r=t.split("=",2),n=fo(r[0]),i=fo(r[1]);return i?(e[n]=i,e):e}),{}):{}},fo=function(e){void 0===e&&(e="");try{return decodeURIComponent(e)}catch(e){return""}},go="dclid",mo="fbclid",vo="gbraid",yo="gclid",bo="ko_click_id",wo="li_fat_id",So="msclkid",ko="rtd_cid",Io="ttclid",Co="twclid",_o="wbraid",xo={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},Oo=function(){function e(){}return e.prototype.parse=function(){return io(this,void 0,void 0,(function(){return oo(this,(function(e){return[2,no(no(no(no({},xo),this.getUtmParam()),this.getReferrer()),this.getClickIds())]}))}))},e.prototype.getUtmParam=function(){var e=po();return{utm_campaign:e.utm_campaign,utm_content:e.utm_content,utm_id:e.utm_id,utm_medium:e.utm_medium,utm_source:e.utm_source,utm_term:e.utm_term}},e.prototype.getReferrer=function(){var e,t,r={referrer:void 0,referring_domain:void 0};try{r.referrer=document.referrer||void 0,r.referring_domain=null!==(t=null===(e=r.referrer)||void 0===e?void 0:e.split("/")[2])&&void 0!==t?t:void 0}catch(e){}return r},e.prototype.getClickIds=function(){var e,t=po();return(e={})[go]=t[go],e[mo]=t[mo],e[vo]=t[vo],e[yo]=t[yo],e[bo]=t[bo],e[wo]=t[wo],e[So]=t[So],e[ko]=t[ko],e[Io]=t[Io],e[Co]=t[Co],e[_o]=t[_o],e},e}();!function(e){e.SET="$set",e.SET_ONCE="$setOnce",e.ADD="$add",e.APPEND="$append",e.PREPEND="$prepend",e.REMOVE="$remove",e.PREINSERT="$preInsert",e.POSTINSERT="$postInsert",e.UNSET="$unset",e.CLEAR_ALL="$clearAll"}(lo||(lo={})),function(e){e.REVENUE_PRODUCT_ID="$productId",e.REVENUE_QUANTITY="$quantity",e.REVENUE_PRICE="$price",e.REVENUE_TYPE="$revenueType",e.REVENUE="$revenue"}(uo||(uo={})),function(e){e.IDENTIFY="$identify",e.GROUP_IDENTIFY="$groupidentify",e.REVENUE="revenue_amount"}(co||(co={}));var Eo=function(e){var t={};for(var r in e){var n=e[r];n&&(t[r]=n)}return t},Ao=function(e){var t;void 0===e&&(e={});var r,n,i=ho(),o=void 0,s=e.trackOn,a=e.trackHistoryChanges,l=e.eventType,u=void 0===l?"[Amplitude] Page Viewed":l,c=function(e){var t=e;try{t=decodeURI(e)}catch(e){null==o||o.error("Malformed URI sequence: ",e)}return t},h=function(){return io(void 0,void 0,void 0,(function(){var e,t,r;return oo(this,(function(n){switch(n.label){case 0:return e=c("undefined"!=typeof location&&location.href||""),r={event_type:u},t=[{}],[4,Ro()];case 1:return[2,(r.event_properties=no.apply(void 0,[no.apply(void 0,t.concat([n.sent()])),{"[Amplitude] Page Domain":"undefined"!=typeof location&&location.hostname||"","[Amplitude] Page Location":e,"[Amplitude] Page Path":"undefined"!=typeof location&&c(location.pathname)||"","[Amplitude] Page Title":"undefined"!=typeof document&&document.title||"","[Amplitude] Page URL":e.split("?")[0]}]),r)]}}))}))},d=function(){return void 0===s||"function"==typeof s&&s()},p="undefined"!=typeof location?location.href:null,f=function(){return io(void 0,void 0,void 0,(function(){var e,r,n,i;return oo(this,(function(s){switch(s.label){case 0:return e=location.href,r=Mo(a,e,p||"")&&d(),p=e,r?(null==o||o.log("Tracking page view event"),null!=t?[3,1]:[3,3]):[3,4];case 1:return i=(n=t).track,[4,h()];case 2:i.apply(n,[s.sent()]),s.label=3;case 3:s.label=4;case 4:return[2]}}))}))},g=function(){f()},m={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(e,s){return io(void 0,void 0,void 0,(function(){var a,l;return oo(this,(function(u){switch(u.label){case 0:return t=s,n=e,(o=e.loggerProvider).log("Installing @amplitude/plugin-page-view-tracking-browser"),i&&(i.addEventListener("popstate",g),r=i.history.pushState,i.history.pushState=new Proxy(i.history.pushState,{apply:function(e,t,r){var n=so(r,3),i=n[0],o=n[1],s=n[2];e.apply(t,[i,o,s]),f()}})),d()?(o.log("Tracking page view event"),l=(a=t).track,[4,h()]):[3,2];case 1:l.apply(a,[u.sent()]),u.label=2;case 2:return[2]}}))}))},execute:function(e){return io(void 0,void 0,void 0,(function(){var t;return oo(this,(function(r){switch(r.label){case 0:return"attribution"===s&&To(e)?(null==o||o.log("Enriching campaign event to page view event with campaign parameters"),[4,h()]):[3,2];case 1:t=r.sent(),e.event_type=t.event_type,e.event_properties=no(no({},e.event_properties),t.event_properties),r.label=2;case 2:return n&&e.event_type===u&&(n.pageCounter=n.pageCounter?n.pageCounter+1:1,e.event_properties=no(no({},e.event_properties),{"[Amplitude] Page Counter":n.pageCounter})),[2,e]}}))}))},teardown:function(){return io(void 0,void 0,void 0,(function(){return oo(this,(function(e){return i&&(i.removeEventListener("popstate",g),r&&(i.history.pushState=r)),[2]}))}))}};return m},Ro=function(){return io(void 0,void 0,void 0,(function(){var e;return oo(this,(function(t){switch(t.label){case 0:return e=Eo,[4,(new Oo).parse()];case 1:return[2,e.apply(void 0,[t.sent()])]}}))}))},To=function(e){if("$identify"===e.event_type&&e.user_properties){var t=e.user_properties,r=t[lo.SET]||{},n=t[lo.UNSET]||{},i=ao(ao([],so(Object.keys(r)),!1),so(Object.keys(n)),!1);return Object.keys(xo).every((function(e){return i.includes(e)}))}return!1},Mo=function(e,t,r){if("pathOnly"===e){if(""==r)return!0;var n=new URL(t),i=new URL(r);return n.origin+n.pathname!==i.origin+i.pathname}return t!==r},Po=function(){var e,t=[],r=function(e,r,n){e.addEventListener(r,n),t.push({element:e,type:r,handler:n})};return{name:"@amplitude/plugin-form-interaction-tracking-browser",type:"enrichment",setup:function(t,n){return Yr(void 0,void 0,void 0,(function(){var i;return Hr(this,(function(o){return null===(i=ti())||void 0===i||i.addEventListener("load",(function(){if(n){if("undefined"!=typeof document){var i=function(e){var t=!1;r(e,"change",(function(){var r;t||n.track(Ui,((r={})[Ki]=No(e.id),r[Zi]=No(e.name),r[Yi]=e.action,r)),t=!0})),r(e,"submit",(function(){var r,i;t||n.track(Ui,((r={})[Ki]=No(e.id),r[Zi]=No(e.name),r[Yi]=e.action,r)),n.track(Fi,((i={})[Ki]=No(e.id),i[Zi]=No(e.name),i[Yi]=e.action,i)),t=!1}))};Array.from(document.getElementsByTagName("form")).forEach(i),"undefined"!=typeof MutationObserver&&(e=new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.forEach((function(e){"FORM"===e.nodeName&&i(e),"querySelectorAll"in e&&"function"==typeof e.querySelectorAll&&Array.from(e.querySelectorAll("form")).map(i)}))}))})),e.observe(document.body,{subtree:!0,childList:!0}))}}else t.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.")})),[2]}))}))},execute:function(e){return Yr(void 0,void 0,void 0,(function(){return Hr(this,(function(t){return[2,e]}))}))},teardown:function(){return Yr(void 0,void 0,void 0,(function(){return Hr(this,(function(r){return null==e||e.disconnect(),t.forEach((function(e){var t=e.element,r=e.type,n=e.handler;null==t||t.removeEventListener(r,n)})),t=[],[2]}))}))}}},No=function(e){if("string"==typeof e)return e},Lo=function(){var e,t=[];return{name:"@amplitude/plugin-file-download-tracking-browser",type:"enrichment",setup:function(r,n){return Yr(void 0,void 0,void 0,(function(){var i;return Hr(this,(function(o){return null===(i=ti())||void 0===i||i.addEventListener("load",(function(){if(n){if("undefined"!=typeof document){var i=function(e){var r;try{r=new URL(e.href,window.location.href)}catch(e){return}var i=o.exec(r.href),s=null==i?void 0:i[1];s&&function(e,r,n){e.addEventListener(r,n),t.push({element:e,type:r,handler:n})}(e,"click",(function(){var t;s&&n.track(Bi,((t={})[Wi]=s,t[$i]=r.pathname,t[Vi]=e.id,t[Gi]=e.text,t[Ji]=e.href,t))}))},o=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)(\?.+)?$/;Array.from(document.getElementsByTagName("a")).forEach(i),"undefined"!=typeof MutationObserver&&(e=new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.forEach((function(e){"A"===e.nodeName&&i(e),"querySelectorAll"in e&&"function"==typeof e.querySelectorAll&&Array.from(e.querySelectorAll("a")).map(i)}))}))})),e.observe(document.body,{subtree:!0,childList:!0}))}}else r.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.")})),[2]}))}))},execute:function(e){return Yr(void 0,void 0,void 0,(function(){return Hr(this,(function(t){return[2,e]}))}))},teardown:function(){return Yr(void 0,void 0,void 0,(function(){return Hr(this,(function(r){return null==e||e.disconnect(),t.forEach((function(e){var t=e.element,r=e.type,n=e.handler;null==t||t.removeEventListener(r,n)})),t=[],[2]}))}))}}},Do=!1,jo=function(){var e=ti(),t=[],r=function(r,n){e&&(e.addEventListener(r,n),t.push({type:r,handler:n}))};return{name:"@amplitude/plugin-network-checker-browser",type:"before",setup:function(e,t){return Yr(void 0,void 0,void 0,(function(){return Hr(this,(function(n){return"undefined"==typeof navigator?(e.loggerProvider.debug("Network connectivity checker plugin is disabled because navigator is not available."),e.offline=!1,[2]):(e.offline=!navigator.onLine,r("online",(function(){e.loggerProvider.debug("Network connectivity changed to online."),e.offline=!1,setTimeout((function(){t.flush()}),e.flushIntervalMillis)})),r("offline",(function(){e.loggerProvider.debug("Network connectivity changed to offline."),e.offline=!0})),[2])}))}))},teardown:function(){return Yr(void 0,void 0,void 0,(function(){return Hr(this,(function(r){return t.forEach((function(t){var r=t.type,n=t.handler;e&&e.removeEventListener(r,n)})),t=[],[2]}))}))}}};var Uo=function(){return Uo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Uo.apply(this,arguments)};function Fo(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))}function Bo(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;function qo(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create;"function"==typeof SuppressedError&&SuppressedError;var zo;!function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.PayloadTooLarge="payload_too_large",e.Invalid="invalid",e.Failed="failed",e.Timeout="Timeout",e.SystemError="SystemError"}(zo||(zo={}));var Wo,$o=function(){function e(){}return e.prototype.send=function(e,t){return Promise.resolve(null)},e.prototype.buildResponse=function(e){var t,r,n,i,o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,w,S,k;if("object"!=typeof e)return null;var I=e.code||0,C=this.buildStatus(I);switch(C){case zo.Success:return{status:C,statusCode:I,body:{eventsIngested:null!==(t=e.events_ingested)&&void 0!==t?t:0,payloadSizeBytes:null!==(r=e.payload_size_bytes)&&void 0!==r?r:0,serverUploadTime:null!==(n=e.server_upload_time)&&void 0!==n?n:0}};case zo.Invalid:return{status:C,statusCode:I,body:{error:null!==(i=e.error)&&void 0!==i?i:"",missingField:null!==(o=e.missing_field)&&void 0!==o?o:"",eventsWithInvalidFields:null!==(s=e.events_with_invalid_fields)&&void 0!==s?s:{},eventsWithMissingFields:null!==(a=e.events_with_missing_fields)&&void 0!==a?a:{},eventsWithInvalidIdLengths:null!==(l=e.events_with_invalid_id_lengths)&&void 0!==l?l:{},epsThreshold:null!==(u=e.eps_threshold)&&void 0!==u?u:0,exceededDailyQuotaDevices:null!==(c=e.exceeded_daily_quota_devices)&&void 0!==c?c:{},silencedDevices:null!==(h=e.silenced_devices)&&void 0!==h?h:[],silencedEvents:null!==(d=e.silenced_events)&&void 0!==d?d:[],throttledDevices:null!==(p=e.throttled_devices)&&void 0!==p?p:{},throttledEvents:null!==(f=e.throttled_events)&&void 0!==f?f:[]}};case zo.PayloadTooLarge:return{status:C,statusCode:I,body:{error:null!==(g=e.error)&&void 0!==g?g:""}};case zo.RateLimit:return{status:C,statusCode:I,body:{error:null!==(m=e.error)&&void 0!==m?m:"",epsThreshold:null!==(v=e.eps_threshold)&&void 0!==v?v:0,throttledDevices:null!==(y=e.throttled_devices)&&void 0!==y?y:{},throttledUsers:null!==(b=e.throttled_users)&&void 0!==b?b:{},exceededDailyQuotaDevices:null!==(w=e.exceeded_daily_quota_devices)&&void 0!==w?w:{},exceededDailyQuotaUsers:null!==(S=e.exceeded_daily_quota_users)&&void 0!==S?S:{},throttledEvents:null!==(k=e.throttled_events)&&void 0!==k?k:[]}};case zo.Timeout:default:return{status:C,statusCode:I}}},e.prototype.buildStatus=function(e){return e>=200&&e<300?zo.Success:429===e?zo.RateLimit:413===e?zo.PayloadTooLarge:408===e?zo.Timeout:e>=400&&e<500?zo.Invalid:e>=500?zo.Failed:zo.Unknown},e}();!function(e){e.US="US",e.EU="EU"}(Wo||(Wo={}));var Vo="Remote config fetch rejected due to timeout after 5 seconds",Go="Unexpected error occurred",Jo=function(){function e(e){var t=e.localConfig,r=e.configKeys,n=this;this.retryTimeout=1e3,this.attempts=0,this.sessionTargetingMatch=!1,this.metrics={},this.getRemoteConfig=function(e,t,r){return Fo(n,void 0,void 0,(function(){var n,i,o;return Bo(this,(function(s){switch(s.label){case 0:return n=Date.now(),[4,this.fetchWithTimeout(r)];case 1:return(i=s.sent())&&(o=i.configs&&i.configs[e])?(this.metrics.fetchTimeAPISuccess=Date.now()-n,[2,o[t]]):(this.metrics.fetchTimeAPIFail=Date.now()-n,[2,void 0])}}))}))},this.fetchWithTimeout=function(e){return Fo(n,void 0,void 0,(function(){var t,r,n;return Bo(this,(function(i){switch(i.label){case 0:return t=new AbortController,r=setTimeout((function(){return t.abort()}),5e3),[4,this.fetchRemoteConfig(t.signal,e)];case 1:return n=i.sent(),clearTimeout(r),[2,n]}}))}))},this.fetchRemoteConfig=function(e,t){return Fo(n,void 0,void 0,(function(){var r,n,i,o,s,a,l,u,c,h,d,p;return Bo(this,(function(f){switch(f.label){case 0:if(t===this.lastFetchedSessionId&&this.attempts>=this.localConfig.flushMaxRetries)return[2,this.completeRequest({err:"Remote config fetch rejected due to exceeded retry count"})];if(e.aborted)return[2,this.completeRequest({err:Vo})];t!==this.lastFetchedSessionId&&(this.lastFetchedSessionId=t,this.attempts=0),f.label=1;case 1:f.trys.push([1,3,,4]),r=new URLSearchParams({api_key:this.localConfig.apiKey});try{for(n=qo(this.configKeys),i=n.next();!i.done;i=n.next())o=i.value,r.append("config_keys",o)}catch(e){h={error:e}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(h)throw h.error}}return t&&r.set("session_id",String(t)),s={headers:{Accept:"*/*"},method:"GET"},a="".concat(this.getServerUrl(),"?").concat(r.toString()),this.attempts+=1,[4,fetch(a,Uo(Uo({},s),{signal:e}))];case 2:if(null===(l=f.sent()))return[2,this.completeRequest({err:Go})];switch((new $o).buildStatus(l.status)){case zo.Success:return this.attempts=0,[2,this.parseAndStoreConfig(l)];case zo.Failed:return[2,this.retryFetch(e,t)];default:return[2,this.completeRequest({err:"Network error occurred, remote config fetch failed"})]}return[3,4];case 3:return u=f.sent(),c=u,e.aborted?[2,this.completeRequest({err:Vo})]:[2,this.completeRequest({err:null!==(p=c.message)&&void 0!==p?p:Go})];case 4:return[2]}}))}))},this.retryFetch=function(e,t){return Fo(n,void 0,void 0,(function(){var r=this;return Bo(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(e){return setTimeout(e,r.attempts*r.retryTimeout)}))];case 1:return n.sent(),[2,this.fetchRemoteConfig(e,t)]}}))}))},this.parseAndStoreConfig=function(e){return Fo(n,void 0,void 0,(function(){var t;return Bo(this,(function(r){switch(r.label){case 0:return[4,e.json()];case 1:return t=r.sent(),this.completeRequest({success:"Remote config successfully fetched"}),[2,t]}}))}))},this.localConfig=t,this.configKeys=r}return e.prototype.getServerUrl=function(){return this.localConfig.serverZone===Wo.STAGING?"https://sr-client-cfg.stag2.amplitude.com/config":this.localConfig.serverZone===Wo.EU?"https://sr-client-cfg.eu.amplitude.com/config":"https://sr-client-cfg.amplitude.com/config"},e.prototype.completeRequest=function(e){var t=e.err,r=e.success;if(t)throw new Error(t);r&&this.localConfig.loggerProvider.log(r)},e}(),Ko=function(e){var t=e.localConfig,r=e.configKeys;return Fo(void 0,void 0,void 0,(function(){return Bo(this,(function(e){return[2,new Jo({localConfig:t,configKeys:r})]}))}))},Zo=function(){function e(e){this.config=e,this.config.loggerProvider.debug("Local configuration before merging with remote config",JSON.stringify(this.config,null,2))}return e.prototype.initialize=function(){return Yr(this,void 0,void 0,(function(){var e;return Hr(this,(function(t){switch(t.label){case 0:return e=this,[4,Ko({localConfig:this.config,configKeys:["analyticsSDK"]})];case 1:return e.remoteConfigFetch=t.sent(),[2]}}))}))},e.prototype.generateJoinedConfig=function(){var e,t,r,n;return Yr(this,void 0,void 0,(function(){var i,o,s;return Hr(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),(o=this.remoteConfigFetch)?[4,this.remoteConfigFetch.getRemoteConfig("analyticsSDK","browserSDK",this.config.sessionId)]:[3,2];case 1:o=a.sent(),a.label=2;case 2:return i=o,this.config.loggerProvider.debug("Remote configuration:",JSON.stringify(i,null,2)),i&&"autocapture"in i&&("boolean"==typeof i.autocapture&&(this.config.autocapture=i.autocapture),"object"==typeof i.autocapture&&(void 0===this.config.autocapture&&(this.config.autocapture=i.autocapture),"boolean"==typeof this.config.autocapture&&(this.config.autocapture=Kr({attribution:this.config.autocapture,fileDownloads:this.config.autocapture,formInteractions:this.config.autocapture,pageViews:this.config.autocapture,sessions:this.config.autocapture,elementInteractions:this.config.autocapture},i.autocapture)),"object"==typeof this.config.autocapture&&(this.config.autocapture=Kr(Kr({},this.config.autocapture),i.autocapture))),this.config.defaultTracking=this.config.autocapture),this.config.loggerProvider.debug("Joined configuration: ",JSON.stringify(this.config,null,2)),null!==(e=(n=this.config).requestMetadata)&&void 0!==e||(n.requestMetadata=new bn),(null===(t=this.remoteConfigFetch)||void 0===t?void 0:t.metrics.fetchTimeAPISuccess)&&this.config.requestMetadata.recordHistogram("remote_config_fetch_time_API_success",this.remoteConfigFetch.metrics.fetchTimeAPISuccess),(null===(r=this.remoteConfigFetch)||void 0===r?void 0:r.metrics.fetchTimeAPIFail)&&this.config.requestMetadata.recordHistogram("remote_config_fetch_time_API_fail",this.remoteConfigFetch.metrics.fetchTimeAPIFail),[3,4];case 3:return s=a.sent(),this.config.loggerProvider.error("Failed to fetch remote configuration because of error: ",s),[3,4];case 4:return[2,this.config]}}))}))},e}();var Yo=function(){return Yo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Yo.apply(this,arguments)};function Ho(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))}function Xo(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;function Qo(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function es(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function ts(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var rs=["a","button","input","select","textarea","label","video","audio",'[contenteditable="true" i]',"[data-amp-default-track]",".amp-default-track"],ns=["div","span","h1","h2","h3","h4","h5","h6"],is="[Amplitude] Element Clicked",os="[Amplitude] Element Tag",ss="[Amplitude] Element Text",as="[Amplitude] Element Selector",ls="[Amplitude] Page URL",us="https://app.amplitude.com",cs={US:us,EU:"https://app.eu.amplitude.com",STAGING:"https://apps.stag2.amplitude.com"},hs="amp-visual-tagging-selector-highlight",ds=function(e,t){return ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},ds(e,t)};function ps(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ds(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function fs(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))}function gs(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;function ms(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vs(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function ys(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function bs(e){return this instanceof bs?(this.v=e,this):new bs(e)}function ws(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{!function(e){e.value instanceof bs?Promise.resolve(e.value.v).then(l,u):c(o[0][2],e)}(i[e](t))}catch(e){c(o[0][3],e)}}function l(e){a("next",e)}function u(e){a("throw",e)}function c(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Ss(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=ms(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,i,(t=e[r](t)).done,t.value)}))}}}Object.create;var ks=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Is(e){return"function"==typeof e}function Cs(e){return Is(null==e?void 0:e.then)}function _s(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var xs=_s((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function Os(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var Es=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,r,n,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=ms(o),a=s.next();!a.done;a=s.next()){a.value.remove(this)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this);var l=this.initialTeardown;if(Is(l))try{l()}catch(e){i=e instanceof xs?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var c=ms(u),h=c.next();!h.done;h=c.next()){var d=h.value;try{Rs(d)}catch(e){i=null!=i?i:[],e instanceof xs?i=ys(ys([],vs(i)),vs(e.errors)):i.push(e)}}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}if(i)throw new xs(i)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)Rs(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(r=this._finalizers)&&void 0!==r?r:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Os(t,e)},e.prototype.remove=function(t){var r=this._finalizers;r&&Os(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();Es.EMPTY;function As(e){return e instanceof Es||e&&"closed"in e&&Is(e.remove)&&Is(e.add)&&Is(e.unsubscribe)}function Rs(e){Is(e)?e():e.unsubscribe()}var Ts={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ms={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=Ms.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,ys([e,t],vs(r))):setTimeout.apply(void 0,ys([e,t],vs(r)))},clearTimeout:function(e){var t=Ms.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Ps(e){Ms.setTimeout((function(){var t=Ts.onUnhandledError;if(!t)throw e;t(e)}))}function Ns(){}var Ls=Ds("C",void 0,void 0);function Ds(e,t,r){return{kind:e,value:t,error:r}}var js=null;var Us=function(e){function t(t){var r=e.call(this)||this;return r.isStopped=!1,t?(r.destination=t,As(t)&&t.add(r)):r.destination=Vs,r}return ps(t,e),t.create=function(e,t,r){return new zs(e,t,r)},t.prototype.next=function(e){this.isStopped?$s(function(e){return Ds("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?$s(Ds("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?$s(Ls,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Es),Fs=Function.prototype.bind;function Bs(e,t){return Fs.call(e,t)}var qs=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Ws(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Ws(e)}else Ws(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Ws(e)}},e}(),zs=function(e){function t(t,r,n){var i,o,s=e.call(this)||this;Is(t)||!t?i={next:null!=t?t:void 0,error:null!=r?r:void 0,complete:null!=n?n:void 0}:s&&Ts.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},i={next:t.next&&Bs(t.next,o),error:t.error&&Bs(t.error,o),complete:t.complete&&Bs(t.complete,o)}):i=t;return s.destination=new qs(i),s}return ps(t,e),t}(Us);function Ws(e){var t;Ts.useDeprecatedSynchronousErrorHandling?(t=e,Ts.useDeprecatedSynchronousErrorHandling&&js&&(js.errorThrown=!0,js.error=t)):Ps(e)}function $s(e,t){var r=Ts.onStoppedNotification;r&&Ms.setTimeout((function(){return r(e,t)}))}var Vs={closed:!0,next:Ns,error:function(e){throw e},complete:Ns},Gs="function"==typeof Symbol&&Symbol.observable||"@@observable";function Js(e){return e}function Ks(e){return 0===e.length?Js:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Zs=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n,i=this,o=(n=e)&&n instanceof Us||function(e){return e&&Is(e.next)&&Is(e.error)&&Is(e.complete)}(n)&&As(n)?e:new zs(e,t,r);return function(e){if(Ts.useDeprecatedSynchronousErrorHandling){var t=!js;if(t&&(js={errorThrown:!1,error:null}),e(),t){var r=js,n=r.errorThrown,i=r.error;if(js=null,n)throw i}}else e()}((function(){var e=i,t=e.operator,r=e.source;o.add(t?t.call(o,r):r?i._subscribe(o):i._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=Ys(t))((function(t,n){var i=new zs({next:function(t){try{e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:t});r.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Gs]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ks(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Ys(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function Ys(e){var t;return null!==(t=null!=e?e:Ts.Promise)&&void 0!==t?t:Promise}function Hs(e){return Is(e[Gs])}function Xs(e){return Symbol.asyncIterator&&Is(null==e?void 0:e[Symbol.asyncIterator])}function Qs(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ea="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function ta(e){return Is(null==e?void 0:e[ea])}function ra(e){return ws(this,arguments,(function(){var t,r,n;return gs(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,bs(t.read())];case 3:return r=i.sent(),n=r.value,r.done?[4,bs(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,bs(n)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function na(e){return Is(null==e?void 0:e.getReader)}function ia(e){if(e instanceof Zs)return e;if(null!=e){if(Hs(e))return i=e,new Zs((function(e){var t=i[Gs]();if(Is(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(ks(e))return n=e,new Zs((function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()}));if(Cs(e))return r=e,new Zs((function(e){r.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Ps)}));if(Xs(e))return oa(e);if(ta(e))return t=e,new Zs((function(e){var r,n;try{for(var i=ms(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}e.complete()}));if(na(e))return oa(ra(e))}var t,r,n,i;throw Qs(e)}function oa(e){return new Zs((function(t){(function(e,t){var r,n,i,o;return fs(this,void 0,void 0,(function(){var s,a;return gs(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),r=Ss(e),l.label=1;case 1:return[4,r.next()];case 2:if((n=l.sent()).done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),i={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),n&&!n.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function sa(e){return function(t){if(function(e){return Is(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function aa(e,t,r,n,i){return new la(e,t,r,n,i)}var la=function(e){function t(t,r,n,i,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return ps(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(Us);function ua(e,t){return sa((function(r,n){var i=0;r.subscribe(aa(n,(function(r){n.next(e.call(t,r,i++))})))}))}function ca(e,t,r,n,i){void 0===n&&(n=0),void 0===i&&(i=!1);var o=t.schedule((function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()}),n);if(e.add(o),!i)return o}function ha(e,t,r){return void 0===r&&(r=1/0),Is(t)?ha((function(r,n){return ua((function(e,i){return t(r,e,n,i)}))(ia(e(r,n)))}),r):("number"==typeof t&&(r=t),sa((function(t,n){return function(e,t,r,n,i,o,s,a){var l=[],u=0,c=0,h=!1,d=function(){!h||l.length||u||t.complete()},p=function(e){return u<n?f(e):l.push(e)},f=function(e){o&&t.next(e),u++;var a=!1;ia(r(e,c++)).subscribe(aa(t,(function(e){null==i||i(e),o?p(e):t.next(e)}),(function(){a=!0}),void 0,(function(){if(a)try{u--;for(var e=function(){var e=l.shift();s?ca(t,s,(function(){return f(e)})):f(e)};l.length&&u<n;)e();d()}catch(e){t.error(e)}})))};return e.subscribe(aa(t,p,(function(){h=!0,d()}))),function(){null==a||a()}}(t,n,e,r)})))}var da=Array.isArray;function pa(e){return ua((function(t){return function(e,t){return da(t)?e.apply(void 0,ys([],vs(t))):e(t)}(e,t)}))}var fa,ga,ma=["addListener","removeListener"],va=["addEventListener","removeEventListener"],ya=["on","off"];function ba(e,t,r,n){if(Is(r)&&(n=r,r=void 0),n)return ba(e,t,r).pipe(pa(n));var i=vs(function(e){return Is(e.addEventListener)&&Is(e.removeEventListener)}(e)?va.map((function(n){return function(i){return e[n](t,i,r)}})):function(e){return Is(e.addListener)&&Is(e.removeListener)}(e)?ma.map(wa(e,t)):function(e){return Is(e.on)&&Is(e.off)}(e)?ya.map(wa(e,t)):[],2),o=i[0],s=i[1];if(!o&&ks(e))return ha((function(e){return ba(e,t,r)}))(ia(e));if(!o)throw new TypeError("Invalid event target");return new Zs((function(e){var t=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.next(1<t.length?t:t[0])};return o(t),function(){return s(t)}}))}function wa(e,t){return function(r){return function(n){return e[r](t,n)}}}function Sa(e,t){if(e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return"html";var r={root:document.body,idName:function(e){return!0},className:function(e){return!0},tagName:function(e){return!0},attr:function(e,t){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4};fa=Yo(Yo({},r),t),ga=function(e,t){if(e.nodeType===Node.DOCUMENT_NODE)return e;if(e===t.root)return e.ownerDocument;return e}(fa.root,r);var n=ka(e,"all",(function(){return ka(e,"two",(function(){return ka(e,"one",(function(){return ka(e,"none")}))}))}));if(n){var i=Ma(Pa(n,e));return i.length>0&&(n=i[0]),Ca(n)}throw new Error("Selector was not found.")}function ka(e,t,r){for(var n=null,i=[],o=e,s=0,a=function(){var e,a,l=Aa(function(e){var t=e.getAttribute("id");if(t&&fa.idName(t))return{name:"#"+CSS.escape(t),penalty:0};return null}(o))||Aa.apply(void 0,ts([],es(function(e){var t=Array.from(e.attributes).filter((function(e){return fa.attr(e.name,e.value)}));return t.map((function(e){return{name:"[".concat(CSS.escape(e.name),'="').concat(CSS.escape(e.value),'"]'),penalty:.5}}))}(o)),!1))||Aa.apply(void 0,ts([],es(function(e){var t=Array.from(e.classList).filter(fa.className);return t.map((function(e){return{name:"."+CSS.escape(e),penalty:1}}))}(o)),!1))||Aa(function(e){var t=e.tagName.toLowerCase();if(fa.tagName(t))return{name:t,penalty:2};return null}(o))||[{name:"*",penalty:3}],u=function(e){var t=e.parentNode;if(!t)return null;var r=t.firstChild;if(!r)return null;var n=0;for(;r&&(r.nodeType===Node.ELEMENT_NODE&&n++,r!==e);)r=r.nextSibling;return n}(o);if("all"==t)u&&(l=l.concat(l.filter(Ea).map((function(e){return Oa(e,u)}))));else if("two"==t)l=l.slice(0,1),u&&(l=l.concat(l.filter(Ea).map((function(e){return Oa(e,u)}))));else if("one"==t){var c=es(l=l.slice(0,1),1)[0];u&&Ea(c)&&(l=[Oa(c,u)])}else"none"==t&&(l=[{name:"*",penalty:3}],u&&(l=[Oa(l[0],u)]));try{for(var h=(e=void 0,Qo(l)),d=h.next();!d.done;d=h.next()){(c=d.value).level=s}}catch(t){e={error:t}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(e)throw e.error}}if(i.push(l),i.length>=fa.seedMinLength&&(n=Ia(i,r)))return"break";o=o.parentElement,s++};o;){if("break"===a())break}return n||(n=Ia(i,r)),!n&&r?r():n}function Ia(e,t){var r,n,i=e.reduce((function(e,t){return e*t.length}),1);if(i>fa.threshold)return t?t():null;var o=Ma(Ta(e));try{for(var s=Qo(o),a=s.next();!a.done;a=s.next()){var l=a.value;if(xa(l))return l}}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return null}function Ca(e){for(var t=e[0],r=t.name,n=1;n<e.length;n++){var i=e[n].level||0;r=t.level===i-1?"".concat(e[n].name," > ").concat(r):"".concat(e[n].name," ").concat(r),t=e[n]}return r}function _a(e){return e.map((function(e){return e.penalty})).reduce((function(e,t){return e+t}),0)}function xa(e){var t=Ca(e);switch(ga.querySelectorAll(t).length){case 0:throw new Error("Can't select any node with this selector: ".concat(t));case 1:return!0;default:return!1}}function Oa(e,t){return{name:e.name+":nth-child(".concat(t,")"),penalty:e.penalty+1}}function Ea(e){return"html"!==e.name&&!e.name.startsWith("#")}function Aa(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.filter(Ra);return r.length>0?r:null}function Ra(e){return null!=e}function Ta(e,t){var r,n,i,o,s,a;return void 0===t&&(t=[]),Xo(this,(function(l){switch(l.label){case 0:if(!(e.length>0))return[3,9];l.label=1;case 1:l.trys.push([1,6,7,8]),r=Qo(e[0]),n=r.next(),l.label=2;case 2:return n.done?[3,5]:(i=n.value,[5,Qo(Ta(e.slice(1,e.length),t.concat(i)))]);case 3:l.sent(),l.label=4;case 4:return n=r.next(),[3,2];case 5:return[3,8];case 6:return o=l.sent(),s={error:o},[3,8];case 7:try{n&&!n.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}return[7];case 8:return[3,11];case 9:return[4,t];case 10:l.sent(),l.label=11;case 11:return[2]}}))}function Ma(e){return ts([],es(e),!1).sort((function(e,t){return _a(e)-_a(t)}))}function Pa(e,t,r){var n,i,o;return void 0===r&&(r={counter:0,visited:new Map}),Xo(this,(function(s){switch(s.label){case 0:if(!(e.length>2&&e.length>fa.optimizedMinLength))return[3,5];n=1,s.label=1;case 1:return n<e.length-1?r.counter>fa.maxNumberOfTries?[2]:(r.counter+=1,(i=ts([],es(e),!1)).splice(n,1),o=Ca(i),r.visited.has(o)?[2]:xa(i)&&function(e,t){return ga.querySelector(Ca(e))===t}(i,t)?[4,i]:[3,4]):[3,5];case 2:return s.sent(),r.visited.set(o,!0),[5,Qo(Pa(i,t,r))];case 3:s.sent(),s.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}var Na=["input","select","textarea"],La=function(e,t){return function(r,n){var i,o,s,a=e.pageUrlAllowlist,l=e.shouldTrackEventResolver,u=null===(o=null===(i=null==n?void 0:n.tagName)||void 0===i?void 0:i.toLowerCase)||void 0===o?void 0:o.call(i);if(!u)return!1;if(l)return l(r,n);if(!Ba(window.location.href,a))return!1;var c=String(null==n?void 0:n.getAttribute("type"))||"";if("string"==typeof c)switch(c.toLowerCase()){case"hidden":case"password":return!1}if(t){var h=t.some((function(e){var t;return!!(null===(t=null==n?void 0:n.matches)||void 0===t?void 0:t.call(n,e))}));if(!h)return!1}switch(u){case"input":case"select":case"textarea":return"change"===r||"click"===r;default:var d=null===(s=null===window||void 0===window?void 0:window.getComputedStyle)||void 0===s?void 0:s.call(window,n);return!(!d||"pointer"!==d.getPropertyValue("cursor")||"click"!==r)||"click"===r}}},Da=function(e){if(null==e)return!1;if("string"==typeof e){if(/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((e||"").replace(/[- ]/g,"")))return!1;if(/(^\d{3}-?\d{2}-?\d{4}$)/.test(e))return!1}return!0},ja=function(e){var t,r,n,i=null===(r=null===(t=null==e?void 0:e.tagName)||void 0===t?void 0:t.toLowerCase)||void 0===r?void 0:r.call(t),o=e instanceof HTMLElement&&"true"===(null===(n=e.getAttribute("contenteditable"))||void 0===n?void 0:n.toLowerCase());return!Na.includes(i)&&!o},Ua=function(e){var t="";return ja(e)&&e.childNodes&&e.childNodes.length&&e.childNodes.forEach((function(e){var r="";!function(e){return!!e&&3===e.nodeType}(e)?r=Ua(e):e.textContent&&(r=e.textContent),t+=r.split(/(\s+)/).filter(Da).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)})),t},Fa=function(e,t){var r,n,i="";try{return i=Sa(e,{className:function(e){return e!==hs},maxNumberOfTries:1e3})}catch(e){if(t){var o=e;t.warn("Failed to get selector with finder, use fallback strategy instead: ".concat(o.toString()))}}var s=null===(n=null===(r=null==e?void 0:e.tagName)||void 0===r?void 0:r.toLowerCase)||void 0===n?void 0:n.call(r);s&&(i=s);var a=e.getAttribute("id"),l=e.getAttribute("class");if(a)i="#".concat(a);else if(l){var u=l.split(" ").filter((function(e){return e!==hs})).join(".");u&&(i="".concat(i,".").concat(u))}return i},Ba=function(e,t){return!t||!t.length||t.some((function(t){return"string"==typeof t?e===t:e.match(t)}))},qa=function(e){return Object.keys(e).reduce((function(t,r){var n=e[r];return function(e){return null==e||"object"==typeof e&&0===Object.keys(e).length||"string"==typeof e&&0===e.trim().length}(n)||(t[r]=n),t}),{})},za=function(e){var t,r=e.parentElement;if(!r)return"";try{t=r.querySelector(":scope>span,h1,h2,h3,h4,h5,h6")}catch(e){t=null}if(t){var n=t.textContent||"";return Da(n)?n:""}return za(r)},Wa=function(e,t){return e?t.some((function(t){var r;return null===(r=null==e?void 0:e.matches)||void 0===r?void 0:r.call(e,t)}))?e:Wa(null==e?void 0:e.parentElement,t):null},$a=function(e,t){var r,n,i;if(!e)return{};var o=null===(i=null===(n=null==e?void 0:e.tagName)||void 0===n?void 0:n.toLowerCase)||void 0===i?void 0:i.call(n),s=Fa(e,t),a=((r={})[os]=o,r[ss]=Ua(e),r[as]=s,r[ls]=window.location.href.split("?")[0],r);return qa(a)};var Va=function(e){return!(null===e.event.target||!e.closestTrackedAncestor)},Ga=function(){function e(e){var t=(void 0===e?{}:e).origin,r=void 0===t?us:t,n=this;this.endpoint=us,this.requestCallbacks={},this.onSelect=function(e){n.notify({action:"element-selected",data:e})},this.onTrack=function(e,t){"selector-mode-changed"===e?n.notify({action:"track-selector-mode-changed",data:t}):"selector-moved"===e&&n.notify({action:"track-selector-moved",data:t})},this.endpoint=r}return e.prototype.notify=function(e){var t,r,n,i;null===(r=null===(t=this.logger)||void 0===t?void 0:t.debug)||void 0===r||r.call(t,"Message sent: ",JSON.stringify(e)),null===(i=null===(n=window.opener)||void 0===n?void 0:n.postMessage)||void 0===i||i.call(n,e,this.endpoint)},e.prototype.sendRequest=function(e,t,r){var n=this;void 0===r&&(r={timeout:15e3});var i="".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),o={id:i,action:e,args:t},s=new Promise((function(t,s){n.requestCallbacks[i]={resolve:t,reject:s},n.notify(o),(null==r?void 0:r.timeout)>0&&setTimeout((function(){s(new Error("".concat(e," timed out (id: ").concat(i,")"))),delete n.requestCallbacks[i]}),r.timeout)}));return s},e.prototype.handleResponse=function(e){var t;this.requestCallbacks[e.id]?(this.requestCallbacks[e.id].resolve(e.responseData),delete this.requestCallbacks[e.id]):null===(t=this.logger)||void 0===t||t.warn("No callback found for request id: ".concat(e.id))},e.prototype.setup=function(e){var t=this,r=void 0===e?{}:e,n=r.logger,i=r.endpoint,o=r.isElementSelectable,s=r.cssSelectorAllowlist,a=r.actionClickAllowlist;this.logger=n,i&&this.endpoint===us&&(this.endpoint=i);var l=null;window.addEventListener("message",(function(e){var r,n,i,u,c;if(null===(n=null===(r=t.logger)||void 0===r?void 0:r.debug)||void 0===n||n.call(r,"Message received: ",JSON.stringify(e)),t.endpoint===e.origin){var h,d=null==e?void 0:e.data,p=null==d?void 0:d.action;if(p)if("id"in d)null===(u=null===(i=t.logger)||void 0===i?void 0:i.debug)||void 0===u||u.call(i,"Received Response to previous request: ",JSON.stringify(e)),t.handleResponse(d);else if("ping"===p)t.notify({action:"pong"});else if("initialize-visual-tagging-selector"===p){var f=null==d?void 0:d.data;(h="https://cdn.amplitude.com/libs/visual-tagging-selector-1.0.0-alpha.js.gz",new Promise((function(e,t){var r;try{var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=h,n.addEventListener("load",(function(){e({status:!0})}),{once:!0}),n.addEventListener("error",(function(){t({status:!1,message:"Failed to load the script ".concat(h)})})),null===(r=document.head)||void 0===r||r.appendChild(n)}catch(e){t(e)}}))).then((function(){var e;l=null===(e=null===window||void 0===window?void 0:window.amplitudeVisualTaggingSelector)||void 0===e?void 0:e.call(window,{getEventTagProps:$a,isElementSelectable:function(e){return!o||o((null==f?void 0:f.actionType)||"click",e)},onTrack:t.onTrack,onSelect:t.onSelect,visualHighlightClass:hs,messenger:t,cssSelectorAllowlist:s,actionClickAllowlist:a}),t.notify({action:"selector-loaded"})})).catch((function(){var e;null===(e=t.logger)||void 0===e||e.warn("Failed to initialize visual tagging selector")}))}else"close-visual-tagging-selector"===p&&(null===(c=null==l?void 0:l.close)||void 0===c||c.call(l))}})),this.notify({action:"page-loaded"})},e}(),Ja=["id","class","style","value","onclick","onchange","oninput","onblur","onsubmit","onfocus","onkeydown","onkeyup","onkeypress","data-reactid","data-react-checksum","data-reactroot"],Ka=["type"],Za=["svg","path","g"],Ya=["password","hidden"];var Ha=function(e){var t;return e?(t=function(e,t){for(var r=0,n=0;n<e.length;n++){var i=e[n];if(null===i)r+=4;else{var o=Xa(i);r+=o?Array.from(o).length:4}if(r>t)return e.slice(0,n)}return e}(function(e){var t=[];if(!e)return t;t.push(e);for(var r=e.parentElement;r&&"HTML"!==r.tagName;)t.push(r),r=r.parentElement;return t}(e).map((function(e){return function(e){var t,r,n,i,o,s;if(null===e)return null;var a=String(e.tagName).toLowerCase(),l={tag:a},u=Array.from(null!==(i=null===(n=e.parentElement)||void 0===n?void 0:n.children)&&void 0!==i?i:[]);u.length&&(l.index=u.indexOf(e),l.indexOfType=u.filter((function(t){return t.tagName===e.tagName})).indexOf(e));var c=null===(s=null===(o=e.previousElementSibling)||void 0===o?void 0:o.tagName)||void 0===s?void 0:s.toLowerCase();c&&(l.prevSib=String(c));var h=e.getAttribute("id");h&&(l.id=String(h));var d=Array.from(e.classList);d.length&&(l.classes=d);var p={},f=Array.from(e.attributes).filter((function(e){return!Ja.includes(e.name)})),g=!ja(e);if(!Ya.includes(String(e.getAttribute("type")))&&!Za.includes(a))try{for(var m=Qo(f),v=m.next();!v.done;v=m.next()){var y=v.value;g&&!Ka.includes(y.name)||(p[y.name]=String(y.value).substring(0,128))}}catch(e){t={error:e}}finally{try{v&&!v.done&&(r=m.return)&&r.call(m)}finally{if(t)throw t.error}}return Object.keys(p).length&&(l.attrs=p),l}(e)})),1024),t):[]};function Xa(e,t){void 0===t&&(t=!1);try{if(null==e)return t?"None":null;if("string"==typeof e)return t?(e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")).includes('"')?"'".concat(e,"'"):e.includes("'")?'"'.concat(e.replace(/'/g,"\\'"),'"'):"'".concat(e,"'"):e;if("boolean"==typeof e)return e?"True":"False";if(Array.isArray(e)){var r=e.map((function(e){return Xa(e,!0)}));return"[".concat(r.join(", "),"]")}if("object"==typeof e){var n=Object.entries(e).filter((function(e){return null!=es(e,1)[0]})).map((function(e){var t=es(e,2),r=t[0],n=t[1];return"".concat(String(Xa(r,!0)),": ").concat(String(Xa(n,!0)))})),i="{".concat(n.join(", "),"}");return i.includes("\\'")&&(i=i.replace(/'/g,"'").replace(/'/g,"\\'")),i}return e.toString()}catch(e){return null}}function Qa(e,t){return sa((function(r,n){var i=0;r.subscribe(aa(n,(function(r){return e.call(t,r,i++)&&n.next(r)})))}))}var el=function(e){function t(t,r){return e.call(this)||this}return ps(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(Es),tl={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=tl.delegate;return(null==i?void 0:i.setInterval)?i.setInterval.apply(i,ys([e,t],vs(r))):setInterval.apply(void 0,ys([e,t],vs(r)))},clearInterval:function(e){var t=tl.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},rl=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return ps(t,e),t.prototype.schedule=function(e,t){var r;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),tl.setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&tl.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r,n=!1;try{this.work(e)}catch(e){n=!0,r=e||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,r=this.scheduler,n=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Os(n,this),null!=t&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(el),nl={now:function(){return(nl.delegate||Date).now()},delegate:void 0},il=function(){function e(t,r){void 0===r&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},e.now=nl.now,e}(),ol=function(e){function t(t,r){void 0===r&&(r=il.now);var n=e.call(this,t,r)||this;return n.actions=[],n._active=!1,n}return ps(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(il),sl=new ol(rl),al=sl;function ll(e){return void 0===e&&(e=1/0),ha(Js,e)}var ul=new Zs((function(e){return e.complete()}));function cl(e){return e&&Is(e.schedule)}function hl(e){return e[e.length-1]}function dl(e){return cl(hl(e))?e.pop():void 0}function pl(e,t){return void 0===t&&(t=0),sa((function(r,n){r.subscribe(aa(n,(function(r){return ca(n,e,(function(){return n.next(r)}),t)}),(function(){return ca(n,e,(function(){return n.complete()}),t)}),(function(r){return ca(n,e,(function(){return n.error(r)}),t)})))}))}function fl(e,t){return void 0===t&&(t=0),sa((function(r,n){n.add(e.schedule((function(){return r.subscribe(n)}),t))}))}function gl(e,t){if(!e)throw new Error("Iterable cannot be null");return new Zs((function(r){ca(r,t,(function(){var n=e[Symbol.asyncIterator]();ca(r,t,(function(){n.next().then((function(e){e.done?r.complete():r.next(e.value)}))}),0,!0)}))}))}function ml(e,t){if(null!=e){if(Hs(e))return function(e,t){return ia(e).pipe(fl(t),pl(t))}(e,t);if(ks(e))return function(e,t){return new Zs((function(r){var n=0;return t.schedule((function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())}))}))}(e,t);if(Cs(e))return function(e,t){return ia(e).pipe(fl(t),pl(t))}(e,t);if(Xs(e))return gl(e,t);if(ta(e))return function(e,t){return new Zs((function(r){var n;return ca(r,t,(function(){n=e[ea](),ca(r,t,(function(){var e,t,i;try{t=(e=n.next()).value,i=e.done}catch(e){return void r.error(e)}i?r.complete():r.next(t)}),0,!0)})),function(){return Is(null==n?void 0:n.return)&&n.return()}}))}(e,t);if(na(e))return function(e,t){return gl(ra(e),t)}(e,t)}throw Qs(e)}function vl(e,t){return t?ml(e,t):ia(e)}function yl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=dl(e),n=function(e,t){return"number"==typeof hl(e)?e.pop():t}(e,1/0),i=e;return i.length?1===i.length?ia(i[0]):ll(n)(vl(i,r)):ul}function bl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ll(1)(vl(e,dl(e)))}function wl(e){return e<=0?function(){return ul}:sa((function(t,r){var n=0;t.subscribe(aa(r,(function(t){++n<=e&&(r.next(t),e<=n&&r.complete())})))}))}function Sl(e,t){return t?function(r){return bl(t.pipe(wl(1),sa((function(e,t){e.subscribe(aa(t,Ns))}))),r.pipe(Sl(e)))}:ha((function(t,r){return ia(e(t,r)).pipe(wl(1),function(e){return ua((function(){return e}))}(t))}))}function kl(e){return e instanceof Date&&!isNaN(e)}function Il(e,t){void 0===t&&(t=sl);var r=function(e,t,r){void 0===e&&(e=0),void 0===r&&(r=al);var n=-1;return null!=t&&(cl(t)?r=t:n=t),new Zs((function(t){var i=kl(e)?+e-r.now():e;i<0&&(i=0);var o=0;return r.schedule((function(){t.closed||(t.next(o++),0<=n?this.schedule(void 0,n):t.complete())}),i)}))}(e,t);return Sl((function(){return r}))}function Cl(e){var t,r,n,i=e.amplitude,o=e.allObservables,s=e.options,a=e.shouldTrackEvent,l=o.clickObservable,u=l.pipe(sa((function(e,t){var r,n=!1;e.subscribe(aa(t,(function(e){var i=r;r=e,n&&t.next([i,e]),n=!0})))})),Qa((function(e){var t=es(e,2),r=t[0],n=t[1],i=r.event.target!==n.event.target,o=Math.abs(n.event.screenX-r.event.screenX)<=20&&Math.abs(n.event.screenY-r.event.screenY)<=20;return i&&!o}))),c=l.pipe((t=s.debounceTime,void 0===r&&(r=sl),sa((function(e,n){var i=null,o=null,s=null,a=function(){if(i){i.unsubscribe(),i=null;var e=o;o=null,n.next(e)}};function l(){var e=s+t,o=r.now();if(o<e)return i=this.schedule(void 0,e-o),void n.add(i);a()}e.subscribe(aa(n,(function(e){o=e,s=r.now(),i||(i=r.schedule(l,t),n.add(i))}),(function(){a(),n.complete()}),void 0,(function(){o=i=null})))}))),ua((function(){return"timeout"}))),h=yl(u,c);return l.pipe(Il(0),Qa(Va),Qa((function(e){return a("click",e.closestTrackedAncestor)})),(n=h,sa((function(e,t){var r=[];return e.subscribe(aa(t,(function(e){return r.push(e)}),(function(){t.next(r),t.complete()}))),ia(n).subscribe(aa(t,(function(){var e=r;r=[],t.next(e)}),Ns)),function(){r=null}})))).subscribe((function(e){var t,r,n=(e.length,is);try{for(var o=Qo(e),s=o.next();!s.done;s=o.next()){var a=s.value;null==i||i.track(n,a.targetElementProperties,{time:a.timestamp})}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}))}var _l,xl=_s((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}));function Ol(e){throw new xl(e)}function El(e){var t=e.amplitude,r=e.allObservables,n=e.options,i=e.getEventProperties,o=e.shouldTrackEvent,s=e.shouldTrackActionClick,a=r.clickObservable,l=r.mutationObservable,u=r.navigateObservable,c=a.pipe(Qa((function(e){return!o("click",e.closestTrackedAncestor)})),ua((function(e){var t=Wa(e.event.target,n.actionClickAllowlist);return e.closestTrackedAncestor=t,null!==e.closestTrackedAncestor&&(e.targetElementProperties=i(e.type,e.closestTrackedAncestor)),e})),Qa(Va),Qa((function(e){return s("click",e.closestTrackedAncestor)}))),h=[l];u&&h.push(u);var d,p,f=yl.apply(void 0,ts([],es(h),!1)),g=c.pipe((d=function(e){return f.pipe(wl(1),function(e,t){var r=kl(e)?{first:e}:"number"==typeof e?{each:e}:e,n=r.first,i=r.each,o=r.with,s=void 0===o?Ol:o,a=r.scheduler,l=void 0===a?null!=t?t:sl:a,u=r.meta,c=void 0===u?null:u;if(null==n&&null==i)throw new TypeError("No timeout provided.");return sa((function(e,t){var r,o,a=null,u=0,h=function(e){o=ca(t,l,(function(){try{r.unsubscribe(),ia(s({meta:c,lastValue:a,seen:u})).subscribe(t)}catch(e){t.error(e)}}),e)};r=e.subscribe(aa(t,(function(e){null==o||o.unsubscribe(),u++,t.next(a=e),i>0&&h(i)}),void 0,void 0,(function(){(null==o?void 0:o.closed)||null==o||o.unsubscribe(),a=null}))),!u&&h(null!=n?"number"==typeof n?n:+n-l.now():i)}))}({first:500,with:function(){return ul}}),ua((function(){return e})))},sa((function(e,t){var r=null,n=0,i=!1,o=function(){return i&&!r&&t.complete()};e.subscribe(aa(t,(function(e){null==r||r.unsubscribe();var i=0,s=n++;ia(d(e,s)).subscribe(r=aa(t,(function(r){return t.next(p?p(e,r,s,i++):r)}),(function(){r=null,o()})))}),(function(){i=!0,o()})))}))));return g.subscribe((function(e){null==t||t.track(is,i("click",e.closestTrackedAncestor),{time:e.timestamp})}))}!function(e){e.ClickObservable="clickObservable",e.ChangeObservable="changeObservable",e.NavigateObservable="navigateObservable",e.MutationObservable="mutationObservable"}(_l||(_l={}));var Al=function(e){var t,r,n;void 0===e&&(e={});var i=e.dataAttributePrefix,o=void 0===i?"data-amp-track-":i,s=e.visualTaggingOptions,a=void 0===s?{enabled:!0,messenger:new Ga}:s;e.cssSelectorAllowlist=null!==(t=e.cssSelectorAllowlist)&&void 0!==t?t:rs,e.actionClickAllowlist=null!==(r=e.actionClickAllowlist)&&void 0!==r?r:ns,e.debounceTime=null!==(n=e.debounceTime)&&void 0!==n?n:0;var l="@amplitude/plugin-autocapture-browser",u=[],c=void 0,h=function(e,t){var r,n,i,s=null===(i=null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.toLowerCase)||void 0===i?void 0:i.call(n),a="function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{left:null,top:null},l=t.getAttribute("aria-label"),u=function(e,t){return e.getAttributeNames().reduce((function(r,n){if(n.startsWith(t)){var i=n.replace(t,""),o=e.getAttribute(n);i&&(r[i]=o||"")}return r}),{})}(t,o),h=za(t),d=Fa(t,c),p=((r={})["[Amplitude] Element ID"]=t.getAttribute("id")||"",r["[Amplitude] Element Class"]=t.getAttribute("class"),r["[Amplitude] Element Hierarchy"]=Ha(t),r[os]=s,r[ss]=Ua(t),r["[Amplitude] Element Position Left"]=null==a.left?null:Math.round(a.left),r["[Amplitude] Element Position Top"]=null==a.top?null:Math.round(a.top),r["[Amplitude] Element Aria Label"]=l,r["[Amplitude] Element Attributes"]=u,r[as]=d,r["[Amplitude] Element Parent Label"]=h,r[ls]=window.location.href.split("?")[0],r["[Amplitude] Page Title"]="undefined"!=typeof document&&document.title||"",r["[Amplitude] Viewport Height"]=window.innerHeight,r["[Amplitude] Viewport Width"]=window.innerWidth,r);return"a"===s&&"click"===e&&t instanceof HTMLAnchorElement&&(p["[Amplitude] Element Href"]=t.href),qa(p)},d=function(t,r){var n={event:t,timestamp:Date.now(),type:r};if(function(e){return"click"===e.type||"change"===e.type}(n)&&null!==n.event.target){var i=Wa(n.event.target,e.cssSelectorAllowlist);return i&&(n.closestTrackedAncestor=i,n.targetElementProperties=h(n.type,i)),n}return n};return{name:l,type:"enrichment",setup:function(t,r){return Ho(void 0,void 0,void 0,(function(){var n,i,o,s,p,f,g,m,v,y;return Xo(this,(function(b){return c=t.loggerProvider,"undefined"==typeof document||(n=La(e,e.cssSelectorAllowlist),i=La(e,e.actionClickAllowlist),o=function(){var e,t,r=ba(document,"click",{capture:!0}).pipe(ua((function(e){return d(e,"click")}))),n=ba(document,"change",{capture:!0}).pipe(ua((function(e){return d(e,"change")})));window.navigation&&(t=ba(window.navigation,"navigate").pipe(ua((function(e){return d(e,"navigate")}))));var i=new Zs((function(e){var t=new MutationObserver((function(t){e.next(t)}));return t.observe(document.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),function(){return t.disconnect()}})).pipe(ua((function(e){return d(e,"mutation")})));return(e={})[_l.ClickObservable]=r,e[_l.ChangeObservable]=n,e[_l.NavigateObservable]=t,e[_l.MutationObservable]=i,e}(),s=Cl({allObservables:o,options:e,amplitude:r,shouldTrackEvent:n}),u.push(s),p=function(e){var t=e.amplitude,r=e.allObservables,n=e.getEventProperties,i=e.shouldTrackEvent;return r.changeObservable.pipe(Qa(Va),Qa((function(e){return i("change",e.closestTrackedAncestor)}))).subscribe((function(e){null==t||t.track("[Amplitude] Element Changed",n("change",e.closestTrackedAncestor))}))}({allObservables:o,getEventProperties:h,amplitude:r,shouldTrackEvent:n}),u.push(p),f=El({allObservables:o,options:e,getEventProperties:h,amplitude:r,shouldTrackEvent:n,shouldTrackActionClick:i}),u.push(f),null===(v=null==t?void 0:t.loggerProvider)||void 0===v||v.log("".concat(l," has been successfully added.")),window.opener&&a.enabled&&(g=e.cssSelectorAllowlist,m=e.actionClickAllowlist,null===(y=a.messenger)||void 0===y||y.setup(Yo(Yo({logger:null==t?void 0:t.loggerProvider},(null==t?void 0:t.serverZone)&&{endpoint:cs[t.serverZone]}),{isElementSelectable:La(e,ts(ts([],es(g),!1),es(m),!1)),cssSelectorAllowlist:g,actionClickAllowlist:m})))),[2]}))}))},execute:function(e){return Ho(void 0,void 0,void 0,(function(){return Xo(this,(function(t){return[2,e]}))}))},teardown:function(){return Ho(void 0,void 0,void 0,(function(){var e,t,r,n;return Xo(this,(function(i){try{for(e=Qo(u),t=e.next();!t.done;t=e.next())t.value.unsubscribe()}catch(e){r={error:e}}finally{try{t&&!t.done&&(n=e.return)&&n.call(e)}finally{if(r)throw r.error}}return[2]}))}))}}},Rl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Jr(t,e),t.prototype.init=function(e,t,r){var n,i;return void 0===e&&(e=""),arguments.length>2?(n=t,i=r):"string"==typeof t?(n=t,i=void 0):(n=null==t?void 0:t.userId,i=t),ln(this._init(Kr(Kr({},i),{userId:n,apiKey:e})))},t.prototype._init=function(t){var r,n,i;return Yr(this,void 0,void 0,(function(){var o,s,a,l,u,c=this;return Hr(this,(function(h){switch(h.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,Qi(t.apiKey,t,this)]);case 1:return o=h.sent(),t.fetchRemoteConfig?[4,(p=o,Yr(void 0,void 0,void 0,(function(){var e;return Hr(this,(function(t){switch(t.label){case 0:return[4,(e=new Zo(p)).initialize()];case 1:return t.sent(),[2,e]}}))})))]:[3,4];case 2:return[4,h.sent().generateJoinedConfig()];case 3:o=h.sent(),h.label=4;case 4:return[4,e.prototype._init.call(this,o)];case 5:return h.sent(),this.logBrowserOptions(o),Nn(this.config.defaultTracking)?(s=function(e){return Nn(e.defaultTracking)&&e.defaultTracking&&"object"==typeof e.defaultTracking&&e.defaultTracking.attribution&&"object"==typeof e.defaultTracking.attribution?Kr({},e.defaultTracking.attribution):{}}(this.config),this.webAttribution=new si(s,this.config),[4,this.webAttribution.init()]):[3,7];case 6:h.sent(),h.label=7;case 7:return a=ri(),l=Number.isNaN(Number(a.ampSessionId))?void 0:Number(a.ampSessionId),this.setSessionId(null!==(i=null!==(n=null!==(r=t.sessionId)&&void 0!==r?r:l)&&void 0!==n?n:this.config.sessionId)&&void 0!==i?i:Date.now()),(u=gi(t.instanceName)).identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),null===this.config.offline?[3,9]:[4,this.add(jo()).promise];case 8:h.sent(),h.label=9;case 9:return[4,this.add(new _n).promise];case 10:return h.sent(),[4,this.add(new wi).promise];case 11:return h.sent(),[4,this.add(new mi).promise];case 12:return h.sent(),function(e){Do||void 0!==e.defaultTracking||(e.loggerProvider.warn("`options.defaultTracking` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to `options.defaultTracking`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:\n\namplitude.init(<YOUR_API_KEY>, {\n  defaultTracking: true,\n});\n\nVisit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details."),Do=!0)}(this.config),d=this.config.defaultTracking,Pn(d,"fileDownloads")?(this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(Lo()).promise]):[3,14];case 13:h.sent(),h.label=14;case 14:return function(e){return Pn(e,"formInteractions")}(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add(Po()).promise]):[3,16];case 15:h.sent(),h.label=16;case 16:return Ln(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(Ao(Fn(this.config))).promise]):[3,18];case 17:h.sent(),h.label=18;case 18:return jn(this.config.autocapture)?(this.config.loggerProvider.debug("Adding user interactions plugin (autocapture plugin)"),[4,this.add(Al(Un(this.config))).promise]):[3,20];case 19:h.sent(),h.label=20;case 20:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 21:return h.sent(),u.eventBridge.setEventReceiver((function(e){c.track(e.eventType,e.eventProperties)})),[2]}var d,p}))}))},t.prototype.getUserId=function(){var e;return null===(e=this.config)||void 0===e?void 0:e.userId},t.prototype.setUserId=function(e){this.config?(this.config.loggerProvider.debug("function setUserId: ",e),e===this.config.userId&&void 0!==e||(this.config.userId=e,function(e,t){gi(t).identityStore.editIdentity().setUserId(e).commit()}(e,this.config.instanceName))):this.q.push(this.setUserId.bind(this,e))},t.prototype.getDeviceId=function(){var e;return null===(e=this.config)||void 0===e?void 0:e.deviceId},t.prototype.setDeviceId=function(e){this.config?(this.config.loggerProvider.debug("function setDeviceId: ",e),this.config.deviceId=e,function(e,t){gi(t).identityStore.editIdentity().setDeviceId(e).commit()}(e,this.config.instanceName)):this.q.push(this.setDeviceId.bind(this,e))},t.prototype.reset=function(){this.setDeviceId(wn()),this.setUserId(void 0)},t.prototype.getSessionId=function(){var e;return null===(e=this.config)||void 0===e?void 0:e.sessionId},t.prototype.setSessionId=function(e){var t,r=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,e)),ln(Promise.resolve());if(e===this.config.sessionId)return ln(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",e);var n=this.getSessionId(),i=this.config.lastEventTime,o=null!==(t=this.config.lastEventId)&&void 0!==t?t:-1;this.config.sessionId=e,this.config.lastEventTime=void 0,this.config.pageCounter=0,Dn(this.config.defaultTracking)&&(n&&i&&r.push(this.track(zi,void 0,{device_id:this.previousSessionDeviceId,event_id:++o,session_id:n,time:i+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var s=this.trackCampaignEventIfNeeded(++o,r);return Dn(this.config.defaultTracking)&&r.push(this.track(qi,void 0,{event_id:s?++o:o,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,ln(Promise.all(r))},t.prototype.extendSession=function(){this.config?this.config.lastEventTime=Date.now():this.q.push(this.extendSession.bind(this))},t.prototype.setTransport=function(e){this.config?this.config.transportProvider=to(e):this.q.push(this.setTransport.bind(this,e))},t.prototype.identify=function(t,r){if(yi(t)){var n=t._q;t._q=[],t=vi(new En,n)}return(null==r?void 0:r.user_id)&&this.setUserId(r.user_id),(null==r?void 0:r.device_id)&&this.setDeviceId(r.device_id),e.prototype.identify.call(this,t,r)},t.prototype.groupIdentify=function(t,r,n,i){if(yi(n)){var o=n._q;n._q=[],n=vi(new En,o)}return e.prototype.groupIdentify.call(this,t,r,n,i)},t.prototype.revenue=function(t,r){if(yi(t)){var n=t._q;t._q=[],t=vi(new An,n)}return e.prototype.revenue.call(this,t,r)},t.prototype.trackCampaignEventIfNeeded=function(e,t){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var r=this.webAttribution.generateCampaignEvent(e);return t?t.push(this.track(r).promise):this.track(r),this.config.loggerProvider.log("Tracking attribution."),!0},t.prototype.process=function(t){return Yr(this,void 0,void 0,(function(){var r,n,i;return Hr(this,(function(o){return r=Date.now(),n=oi(this.config.sessionTimeout,this.config.lastEventTime),i=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),t.event_type===qi||t.event_type===zi||t.session_id&&t.session_id!==this.getSessionId()||(n||i?(this.setSessionId(r),i&&this.config.loggerProvider.log("Created a new session for new campaign.")):n||this.trackCampaignEventIfNeeded()),[2,e.prototype.process.call(this,t)]}))}))},t.prototype.logBrowserOptions=function(e){try{var t=Kr(Kr({},e),{apiKey:e.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(t))}catch(e){this.config.loggerProvider.error("Error logging browser config",e)}},t}(Mn);const Tl=(Ml=new Rl,{init:an(Ml.init.bind(Ml),"init",nn(Ml),sn(Ml,["config"])),add:an(Ml.add.bind(Ml),"add",nn(Ml),sn(Ml,["config.apiKey","timeline.plugins"])),remove:an(Ml.remove.bind(Ml),"remove",nn(Ml),sn(Ml,["config.apiKey","timeline.plugins"])),track:an(Ml.track.bind(Ml),"track",nn(Ml),sn(Ml,["config.apiKey","timeline.queue.length"])),logEvent:an(Ml.logEvent.bind(Ml),"logEvent",nn(Ml),sn(Ml,["config.apiKey","timeline.queue.length"])),identify:an(Ml.identify.bind(Ml),"identify",nn(Ml),sn(Ml,["config.apiKey","timeline.queue.length"])),groupIdentify:an(Ml.groupIdentify.bind(Ml),"groupIdentify",nn(Ml),sn(Ml,["config.apiKey","timeline.queue.length"])),setGroup:an(Ml.setGroup.bind(Ml),"setGroup",nn(Ml),sn(Ml,["config.apiKey","timeline.queue.length"])),revenue:an(Ml.revenue.bind(Ml),"revenue",nn(Ml),sn(Ml,["config.apiKey","timeline.queue.length"])),flush:an(Ml.flush.bind(Ml),"flush",nn(Ml),sn(Ml,["config.apiKey","timeline.queue.length"])),getUserId:an(Ml.getUserId.bind(Ml),"getUserId",nn(Ml),sn(Ml,["config","config.userId"])),setUserId:an(Ml.setUserId.bind(Ml),"setUserId",nn(Ml),sn(Ml,["config","config.userId"])),getDeviceId:an(Ml.getDeviceId.bind(Ml),"getDeviceId",nn(Ml),sn(Ml,["config","config.deviceId"])),setDeviceId:an(Ml.setDeviceId.bind(Ml),"setDeviceId",nn(Ml),sn(Ml,["config","config.deviceId"])),reset:an(Ml.reset.bind(Ml),"reset",nn(Ml),sn(Ml,["config","config.userId","config.deviceId"])),getSessionId:an(Ml.getSessionId.bind(Ml),"getSessionId",nn(Ml),sn(Ml,["config"])),setSessionId:an(Ml.setSessionId.bind(Ml),"setSessionId",nn(Ml),sn(Ml,["config"])),extendSession:an(Ml.extendSession.bind(Ml),"extendSession",nn(Ml),sn(Ml,["config"])),setOptOut:an(Ml.setOptOut.bind(Ml),"setOptOut",nn(Ml),sn(Ml,["config"])),setTransport:an(Ml.setTransport.bind(Ml),"setTransport",nn(Ml),sn(Ml,["config"]))});var Ml,Pl=Tl.add,Nl=Tl.identify,Ll=Tl.init,Dl=Tl.setUserId,jl=Tl.track;var Ul=function(){return Ul=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ul.apply(this,arguments)};function Fl(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))}function Bl(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var ql;!function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Warn=2]="Warn",e[e.Verbose=3]="Verbose",e[e.Debug=4]="Debug"}(ql||(ql={}));var zl=function(e,t,r,n,i){return void 0===i&&(i=null),function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=r(),l=a.logger,u=a.logLevel;if(u&&u<ql.Debug||!u||!l)return e.apply(i,o);var c,h={type:"invoke public method",name:t,args:o,stacktrace:(c=1,void 0===c&&(c=0),((new Error).stack||"").split("\n").slice(2+c).map((function(e){return e.trim()}))),time:{start:(new Date).toISOString()},states:{}};n&&h.states&&(h.states.before=n());var d=e.apply(i,o);return d&&d.promise?d.promise.then((function(){n&&h.states&&(h.states.after=n()),h.time&&(h.time.end=(new Date).toISOString()),l.debug(JSON.stringify(h,null,2))})):(n&&h.states&&(h.states.after=n()),h.time&&(h.time.end=(new Date).toISOString()),l.debug(JSON.stringify(h,null,2))),d}},Wl=function(e,t){return Wl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Wl(e,t)};function $l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Wl(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var Vl=function(){return Vl=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Vl.apply(this,arguments)};function Gl(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))}function Jl(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;function Kl(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zl(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s}function Yl(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var Hl=function(e,t){return Hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},Hl(e,t)};function Xl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Hl(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function Ql(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))}function eu(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var tu,ru=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Xl(t,e),t.prototype.send=function(e,t){return Ql(this,void 0,void 0,(function(){var r,n,i;return eu(this,(function(o){switch(o.label){case 0:if("undefined"==typeof fetch)throw new Error("FetchTransport is not supported");return r={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(t),method:"POST"},[4,fetch(e,r)];case 1:return[4,(n=o.sent()).text()];case 2:i=o.sent();try{return[2,this.buildResponse(JSON.parse(i))]}catch(e){return[2,this.buildResponse({code:n.status})]}return[2]}}))}))},t}($o),nu="Amplitude Logger ",iu=function(){function e(){this.logLevel=ql.None}return e.prototype.disable=function(){this.logLevel=ql.None},e.prototype.enable=function(e){void 0===e&&(e=ql.Warn),this.logLevel=e},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<ql.Verbose||console.log("".concat(nu,"[Log]: ").concat(e.join(" ")))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<ql.Warn||console.warn("".concat(nu,"[Warn]: ").concat(e.join(" ")))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<ql.Error||console.error("".concat(nu,"[Error]: ").concat(e.join(" ")))},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logLevel<ql.Debug||console.log("".concat(nu,"[Debug]: ").concat(e.join(" ")))},e}(),ou="".concat("AMP","_unsent"),su="https://api2.amplitude.com/2/httpapi",au=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:ql.Warn,loggerProvider:new iu,offline:!1,optOut:!1,serverUrl:su,serverZone:"US",useBatch:!1}},lu=function(){function e(e){var t,r,n,i;this._optOut=!1;var o=au();this.apiKey=e.apiKey,this.flushIntervalMillis=null!==(t=e.flushIntervalMillis)&&void 0!==t?t:o.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||o.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||o.flushQueueSize,this.instanceName=e.instanceName||o.instanceName,this.loggerProvider=e.loggerProvider||o.loggerProvider,this.logLevel=null!==(r=e.logLevel)&&void 0!==r?r:o.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=void 0!==e.offline?e.offline:o.offline,this.optOut=null!==(n=e.optOut)&&void 0!==n?n:o.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||o.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=null!==(i=e.useBatch)&&void 0!==i?i:o.useBatch,this.loggerProvider.enable(this.logLevel);var s=cu(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=s.serverZone,this.serverUrl=s.serverUrl}return Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),e}(),uu=function(e,t){return"EU"===e?t?"https://api.eu.amplitude.com/batch":"https://api.eu.amplitude.com/2/httpapi":t?"https://api2.amplitude.com/batch":su},cu=function(e,t,r){if(void 0===e&&(e=""),void 0===t&&(t=au().serverZone),void 0===r&&(r=au().useBatch),e)return{serverUrl:e,serverZone:void 0};var n=["US","EU"].includes(t)?t:au().serverZone;return{serverZone:n,serverUrl:uu(n,r)}},hu=(function(){function e(){this.sdk={metrics:{histogram:{}}}}e.prototype.recordHistogram=function(e,t){this.sdk.metrics.histogram[e]=t}}(),"[Amplitude]"),du="".concat(hu," Session Replay ID"),pu=Wo.US,fu="".concat(hu," Session Replay Debug"),gu="amp-mask";"".concat("AMP","_replay_unsent");!function(e){e.GET_SR_PROPS="get-sr-props",e.DEBUG_INFO="debug-info"}(tu||(tu={}));var mu,vu=function(){return{flushMaxRetries:2,logLevel:ql.Warn,loggerProvider:new iu,transportProvider:new ru}},yu=function(e){function t(t,r){var n,i=this,o=vu();return(i=e.call(this,Vl(Vl({transportProvider:o.transportProvider},r),{apiKey:t}))||this).flushMaxRetries=void 0!==r.flushMaxRetries&&r.flushMaxRetries<=o.flushMaxRetries?r.flushMaxRetries:o.flushMaxRetries,i.apiKey=t,i.sampleRate=r.sampleRate||0,i.serverZone=r.serverZone||pu,i.configServerUrl=r.configServerUrl,i.trackServerUrl=r.trackServerUrl,i.shouldInlineStylesheet=r.shouldInlineStylesheet,i.version=r.version,i.performanceConfig=r.performanceConfig,i.storeType=null!==(n=r.storeType)&&void 0!==n?n:"idb",r.privacyConfig&&(i.privacyConfig=r.privacyConfig),r.debugMode&&(i.debugMode=r.debugMode),r.experimental&&(i.experimental=r.experimental),i}return $l(t,e),t}(lu),bu=function(){var e="ampIntegrationContext";return"undefined"!=typeof globalThis&&void 0!==globalThis[e]?globalThis[e]:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==r.g?r.g:void 0},wu=function(e){return void 0===e&&(e="$default_instance"),fi.getInstance(e)},Su=function(e){return{promise:e||Promise.resolve()}},ku=r(21781),Iu=Object.defineProperty,Cu=(e,t,r)=>((e,t,r)=>t in e?Iu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r),_u=Object.defineProperty,xu=(e,t,r)=>((e,t,r)=>t in e?_u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r),Ou=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Ou||{});const Eu={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Au={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Ru={};function Tu(e){if(Ru[e])return Ru[e];const t=globalThis[e],r=t.prototype,n=e in Eu?Eu[e]:void 0,i=Boolean(n&&n.every((e=>{var t,n;return Boolean(null==(n=null==(t=Object.getOwnPropertyDescriptor(r,e))?void 0:t.get)?void 0:n.toString().includes("[native code]"))}))),o=e in Au?Au[e]:void 0,s=Boolean(o&&o.every((e=>{var t;return"function"==typeof r[e]&&(null==(t=r[e])?void 0:t.toString().includes("[native code]"))})));if(i&&s)return Ru[e]=t.prototype,t.prototype;try{const n=document.createElement("iframe");document.body.appendChild(n);const i=n.contentWindow;if(!i)return t.prototype;const o=i[e].prototype;return document.body.removeChild(n),o?Ru[e]=o:r}catch{return r}}const Mu={};function Pu(e,t,r){var n;const i=`${e}.${String(r)}`;if(Mu[i])return Mu[i].call(t);const o=Tu(e),s=null==(n=Object.getOwnPropertyDescriptor(o,r))?void 0:n.get;return s?(Mu[i]=s,s.call(t)):t[r]}const Nu={};function Lu(e,t,r){const n=`${e}.${String(r)}`;if(Nu[n])return Nu[n].bind(t);const i=Tu(e)[r];return"function"!=typeof i?t[r]:(Nu[n]=i,i.bind(t))}const Du={childNodes:function(e){return Pu("Node",e,"childNodes")},parentNode:function(e){return Pu("Node",e,"parentNode")},parentElement:function(e){return Pu("Node",e,"parentElement")},textContent:function(e){return Pu("Node",e,"textContent")},contains:function(e,t){return Lu("Node",e,"contains")(t)},getRootNode:function(e){return Lu("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?Pu("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?Pu("Element",e,"shadowRoot"):null},querySelector:function(e,t){return Pu("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return Pu("Element",e,"querySelectorAll")(t)},mutationObserver:function(){return Tu("MutationObserver").constructor}};function ju(e){return e.nodeType===e.ELEMENT_NODE}function Uu(e){const t=e&&"host"in e&&"mode"in e&&Du.host(e)||null;return Boolean(t&&"shadowRoot"in t&&Du.shadowRoot(t)===e)}function Fu(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Bu(e){try{const r=e.rules||e.cssRules;if(!r)return null;const n=Array.from(r,(t=>qu(t,e.href))).join("");return(t=n).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t}catch(e){return null}var t}function qu(e,t){if(function(e){return"styleSheet"in e}(e)){let t;try{t=Bu(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const r=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?r.push("layer"):e.layerName&&r.push(`layer(${e.layerName})`),e.supportsText&&r.push(`supports(${e.supportsText})`),e.media.length&&r.push(e.media.mediaText),r.join(" ")+";"}(e)}catch(r){t=e.cssText}return e.styleSheet.href?Qu(t,e.styleSheet.href):t}{let r=e.cssText;return function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":")&&(r=function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(r)),t?Qu(r,t):r}}class zu{constructor(){xu(this,"idNodeMap",new Map),xu(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;return(null==(t=this.getMeta(e))?void 0:t.id)??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){const r=this.getNode(e);if(r){const e=this.nodeMetaMap.get(r);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Wu(){return new zu}function $u({element:e,maskInputOptions:t,tagName:r,type:n,value:i,maskInputFn:o}){let s=i||"";const a=n&&Vu(n);return(t[r.toLowerCase()]||a&&t[a])&&(s=o?o(s,e):"*".repeat(s.length)),s}function Vu(e){return e.toLowerCase()}const Gu="__rrweb_original__";function Ju(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Vu(t):null}function Ku(e,t){let r;try{r=new URL(e,t??window.location.href)}catch(e){return null}const n=r.pathname.match(/\.([0-9a-z]+)(?:$)/i);return(null==n?void 0:n[1])??null}const Zu=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Yu=/^(?:[a-z+]+:)?\/\//i,Hu=/^www\..*/i,Xu=/^(data:)([^,]*),(.*)/i;function Qu(e,t){return(e||"").replace(Zu,((e,r,n,i,o,s)=>{const a=n||o||s,l=r||i||"";if(!a)return e;if(Yu.test(a)||Hu.test(a))return`url(${l}${a}${l})`;if(Xu.test(a))return`url(${l}${a}${l})`;if("/"===a[0])return`url(${l}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${l})`;const u=t.split("/"),c=a.split("/");u.pop();for(const e of c)"."!==e&&(".."===e?u.pop():u.push(e));return`url(${l}${u.join("/")}${l})`}))}let ec=1;const tc=new RegExp("[^a-z0-9-_:]");function rc(){return ec++}let nc,ic;const oc=/^[^ \t\n\r\u000c]+/,sc=/^[, \t\n\r\u000c]+/;const ac=new WeakMap;function lc(e,t){return t&&""!==t.trim()?cc(e,t):t}function uc(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function cc(e,t){let r=ac.get(e);if(r||(r=e.createElement("a"),ac.set(e,r)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return r.setAttribute("href",t),r.href}function hc(e,t,r,n){return n?"src"===r||"href"===r&&("use"!==t||"#"!==n[0])||"xlink:href"===r&&"#"!==n[0]?lc(e,n):"background"!==r||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===r?function(e,t){if(""===t.trim())return t;let r=0;function n(e){let n;const i=e.exec(t.substring(r));return i?(n=i[0],r+=n.length,n):""}const i=[];for(;n(sc),!(r>=t.length);){let o=n(oc);if(","===o.slice(-1))o=lc(e,o.substring(0,o.length-1)),i.push(o);else{let n="";o=lc(e,o);let s=!1;for(;;){const e=t.charAt(r);if(""===e){i.push((o+n).trim());break}if(s)")"===e&&(s=!1);else{if(","===e){r+=1,i.push((o+n).trim());break}"("===e&&(s=!0)}n+=e,r+=1}}}return i.join(", ")}(e,n):"style"===r?Qu(n,cc(e)):"object"===t&&"data"===r?lc(e,n):n:lc(e,n):n}function dc(e,t,r){return("video"===e||"audio"===e)&&"autoplay"===t}function pc(e,t,r){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!r&&pc(Du.parentNode(e),t,r);for(let r=e.classList.length;r--;){const n=e.classList[r];if(t.test(n))return!0}return!!r&&pc(Du.parentNode(e),t,r)}function fc(e,t,r,n){let i;if(ju(e)){if(i=e,!Du.childNodes(i).length)return!1}else{if(null===Du.parentElement(e))return!1;i=Du.parentElement(e)}try{if("string"==typeof t){if(n){if(i.closest(`.${t}`))return!0}else if(i.classList.contains(t))return!0}else if(pc(i,t,n))return!0;if(r)if(n){if(i.closest(r))return!0}else if(i.matches(r))return!0}catch(e){}return!1}function gc(e,t){const{doc:r,mirror:n,blockClass:i,blockSelector:o,needsMask:s,inlineStylesheet:a,maskInputOptions:l={},maskTextFn:u,maskInputFn:c,dataURLOptions:h={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:f,newlyAddedElement:g=!1}=t,m=function(e,t){if(!t.hasNode(e))return;const r=t.getId(e);return 1===r?void 0:r}(r,n);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Ou.Document,childNodes:[],compatMode:e.compatMode}:{type:Ou.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Ou.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:m};case e.ELEMENT_NODE:return function(e,t){const{doc:r,blockClass:n,blockSelector:i,inlineStylesheet:o,maskInputOptions:s={},maskInputFn:a,dataURLOptions:l={},inlineImages:u,recordCanvas:c,keepIframeSrcFn:h,newlyAddedElement:d=!1,rootId:p}=t,f=function(e,t,r){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let r=e.classList.length;r--;){const n=e.classList[r];if(t.test(n))return!0}if(r)return e.matches(r)}catch(e){}return!1}(e,n,i),g=function(e){if(e instanceof HTMLFormElement)return"form";const t=Vu(e.tagName);return tc.test(t)?"div":t}(e);let m={};const v=e.attributes.length;for(let t=0;t<v;t++){const n=e.attributes[t];dc(g,n.name,n.value)||(m[n.name]=hc(r,g,Vu(n.name),n.value))}if("link"===g&&o){const t=Array.from(r.styleSheets).find((t=>t.href===e.href));let n=null;t&&(n=Bu(t)),n&&(delete m.rel,delete m.href,m._cssText=n)}if("style"===g&&e.sheet&&!(e.innerText||Du.textContent(e)||"").trim().length){const t=Bu(e.sheet);t&&(m._cssText=t)}if("input"===g||"textarea"===g||"select"===g){const t=e.value,r=e.checked;"radio"!==m.type&&"checkbox"!==m.type&&"submit"!==m.type&&"button"!==m.type&&t?m.value=$u({element:e,type:Ju(e),tagName:g,value:t,maskInputOptions:s,maskInputFn:a}):r&&(m.checked=r)}"option"===g&&(e.selected&&!s.select?m.selected=!0:delete m.selected);"dialog"===g&&e.open&&(m.rr_open_mode=e.matches("dialog:modal")?"modal":"non-modal");if("canvas"===g&&c)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let r=0;r<e.width;r+=50)for(let n=0;n<e.height;n+=50){const i=t.getImageData,o=Gu in i?i[Gu]:i;if(new Uint32Array(o.call(t,r,n,Math.min(50,e.width-r),Math.min(50,e.height-n)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(m.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const t=e.toDataURL(l.type,l.quality),n=r.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(l.type,l.quality)&&(m.rr_dataURL=t)}if("img"===g&&u){nc||(nc=r.createElement("canvas"),ic=nc.getContext("2d"));const t=e,n=t.currentSrc||t.getAttribute("src")||"<unknown-src>",i=t.crossOrigin,o=()=>{t.removeEventListener("load",o);try{nc.width=t.naturalWidth,nc.height=t.naturalHeight,ic.drawImage(t,0,0),m.rr_dataURL=nc.toDataURL(l.type,l.quality)}catch(e){if("anonymous"!==t.crossOrigin)return t.crossOrigin="anonymous",void(t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o));console.warn(`Cannot inline img src=${n}! Error: ${e}`)}"anonymous"===t.crossOrigin&&(i?m.crossOrigin=i:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?o():t.addEventListener("load",o)}if("audio"===g||"video"===g){const t=m;t.rr_mediaState=e.paused?"paused":"played",t.rr_mediaCurrentTime=e.currentTime,t.rr_mediaPlaybackRate=e.playbackRate,t.rr_mediaMuted=e.muted,t.rr_mediaLoop=e.loop,t.rr_mediaVolume=e.volume}d||(e.scrollLeft&&(m.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(m.rr_scrollTop=e.scrollTop));if(f){const{width:t,height:r}=e.getBoundingClientRect();m={class:m.class,rr_width:`${t}px`,rr_height:`${r}px`}}"iframe"!==g||h(m.src)||(e.contentDocument||(m.rr_src=m.src),delete m.src);let y;try{customElements.get(g)&&(y=!0)}catch(e){}return{type:Ou.Element,tagName:g,attributes:m,childNodes:[],isSVG:uc(e)||void 0,needBlock:f,rootId:p,isCustom:y}}(e,{doc:r,blockClass:i,blockSelector:o,inlineStylesheet:a,maskInputOptions:l,maskInputFn:c,dataURLOptions:h,inlineImages:d,recordCanvas:p,keepIframeSrcFn:f,newlyAddedElement:g,rootId:m});case e.TEXT_NODE:return function(e,t){var r;const{needsMask:n,maskTextFn:i,rootId:o}=t,s=Du.parentNode(e),a=s&&s.tagName;let l=Du.textContent(e);const u="STYLE"===a||void 0,c="SCRIPT"===a||void 0;if(u&&l){try{e.nextSibling||e.previousSibling||(null==(r=s.sheet)?void 0:r.cssRules)&&(l=Bu(s.sheet))}catch(t){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${t}`,e)}l=Qu(l,cc(t.doc))}c&&(l="SCRIPT_PLACEHOLDER");!u&&!c&&l&&n&&(l=i?i(l,Du.parentElement(e)):l.replace(/[\S]/g,"*"));return{type:Ou.Text,textContent:l||"",isStyle:u,rootId:o}}(e,{doc:r,needsMask:s,maskTextFn:u,rootId:m});case e.CDATA_SECTION_NODE:return{type:Ou.CDATA,textContent:"",rootId:m};case e.COMMENT_NODE:return{type:Ou.Comment,textContent:Du.textContent(e)||"",rootId:m};default:return!1}}function mc(e){return null==e?"":e.toLowerCase()}function vc(e,t){const{doc:r,mirror:n,blockClass:i,blockSelector:o,maskTextClass:s,maskTextSelector:a,skipChild:l=!1,inlineStylesheet:u=!0,maskInputOptions:c={},maskTextFn:h,maskInputFn:d,slimDOMOptions:p,dataURLOptions:f={},inlineImages:g=!1,recordCanvas:m=!1,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:b=5e3,onStylesheetLoad:w,stylesheetLoadTimeout:S=5e3,keepIframeSrcFn:k=()=>!1,newlyAddedElement:I=!1}=t;let{needsMask:C}=t,{preserveWhiteSpace:_=!0}=t;if(!C){C=fc(e,s,a,void 0===C)}const x=gc(e,{doc:r,mirror:n,blockClass:i,blockSelector:o,needsMask:C,inlineStylesheet:u,maskInputOptions:c,maskTextFn:h,maskInputFn:d,dataURLOptions:f,inlineImages:g,recordCanvas:m,keepIframeSrcFn:k,newlyAddedElement:I});if(!x)return console.warn(e,"not serialized"),null;let O;O=n.hasNode(e)?n.getId(e):!function(e,t){if(t.comment&&e.type===Ou.Comment)return!0;if(e.type===Ou.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&"js"===Ku(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(mc(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===mc(e.attributes.name)||"icon"===mc(e.attributes.rel)||"apple-touch-icon"===mc(e.attributes.rel)||"shortcut icon"===mc(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&mc(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(mc(e.attributes.property).match(/^(og|twitter|fb):/)||mc(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===mc(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===mc(e.attributes.name)||"googlebot"===mc(e.attributes.name)||"bingbot"===mc(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===mc(e.attributes.name)||"generator"===mc(e.attributes.name)||"framework"===mc(e.attributes.name)||"publisher"===mc(e.attributes.name)||"progid"===mc(e.attributes.name)||mc(e.attributes.property).match(/^article:/)||mc(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===mc(e.attributes.name)||"yandex-verification"===mc(e.attributes.name)||"csrf-token"===mc(e.attributes.name)||"p:domain_verify"===mc(e.attributes.name)||"verify-v1"===mc(e.attributes.name)||"verification"===mc(e.attributes.name)||"shopify-checkout-api-token"===mc(e.attributes.name)))return!0}}return!1}(x,p)&&(_||x.type!==Ou.Text||x.isStyle||x.textContent.replace(/^\s+|\s+$/gm,"").length)?rc():-2;const E=Object.assign(x,{id:O});if(n.add(e,E),-2===O)return null;v&&v(e);let A=!l;if(E.type===Ou.Element){A=A&&!E.needBlock,delete E.needBlock;const t=Du.shadowRoot(e);t&&Fu(t)&&(E.isShadowHost=!0)}if((E.type===Ou.Document||E.type===Ou.Element)&&A){p.headWhitespace&&E.type===Ou.Element&&"head"===E.tagName&&(_=!1);const t={doc:r,mirror:n,blockClass:i,blockSelector:o,needsMask:C,maskTextClass:s,maskTextSelector:a,skipChild:l,inlineStylesheet:u,maskInputOptions:c,maskTextFn:h,maskInputFn:d,slimDOMOptions:p,dataURLOptions:f,inlineImages:g,recordCanvas:m,preserveWhiteSpace:_,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:b,onStylesheetLoad:w,stylesheetLoadTimeout:S,keepIframeSrcFn:k};if(E.type===Ou.Element&&"textarea"===E.tagName&&void 0!==E.attributes.value);else for(const r of Array.from(Du.childNodes(e))){const e=vc(r,t);e&&E.childNodes.push(e)}let I=null;if(ju(e)&&(I=Du.shadowRoot(e)))for(const e of Array.from(Du.childNodes(I))){const r=vc(e,t);r&&(Fu(I)&&(r.isShadow=!0),E.childNodes.push(r))}}const R=Du.parentNode(e);return R&&Uu(R)&&Fu(R)&&(E.isShadow=!0),E.type===Ou.Element&&"iframe"===E.tagName&&function(e,t,r){const n=e.contentWindow;if(!n)return;let i,o=!1;try{i=n.document.readyState}catch(e){return}if("complete"!==i){const n=setTimeout((()=>{o||(t(),o=!0)}),r);return void e.addEventListener("load",(()=>{clearTimeout(n),o=!0,t()}))}const s="about:blank";if(n.location.href!==s||e.src===s||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&y){const r=vc(t,{doc:t,mirror:n,blockClass:i,blockSelector:o,needsMask:C,maskTextClass:s,maskTextSelector:a,skipChild:!1,inlineStylesheet:u,maskInputOptions:c,maskTextFn:h,maskInputFn:d,slimDOMOptions:p,dataURLOptions:f,inlineImages:g,recordCanvas:m,preserveWhiteSpace:_,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:b,onStylesheetLoad:w,stylesheetLoadTimeout:S,keepIframeSrcFn:k});r&&y(e,r)}}),b),E.type===Ou.Element&&"link"===E.tagName&&"string"==typeof E.attributes.rel&&("stylesheet"===E.attributes.rel||"preload"===E.attributes.rel&&"string"==typeof E.attributes.href&&"css"===Ku(E.attributes.href))&&function(e,t,r){let n,i=!1;try{n=e.sheet}catch(e){return}if(n)return;const o=setTimeout((()=>{i||(t(),i=!0)}),r);e.addEventListener("load",(()=>{clearTimeout(o),i=!0,t()}))}(e,(()=>{if(w){const t=vc(e,{doc:r,mirror:n,blockClass:i,blockSelector:o,needsMask:C,maskTextClass:s,maskTextSelector:a,skipChild:!1,inlineStylesheet:u,maskInputOptions:c,maskTextFn:h,maskInputFn:d,slimDOMOptions:p,dataURLOptions:f,inlineImages:g,recordCanvas:m,preserveWhiteSpace:_,onSerialize:v,onIframeLoad:y,iframeLoadTimeout:b,onStylesheetLoad:w,stylesheetLoadTimeout:S,keepIframeSrcFn:k});t&&w(e,t)}}),S),E}new RegExp(/(max|min)-device-(width|height)/.source,"g");function yc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function bc(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var wc={exports:{}},Sc=String,kc=function(){return{isColorSupported:!1,reset:Sc,bold:Sc,dim:Sc,italic:Sc,underline:Sc,inverse:Sc,hidden:Sc,strikethrough:Sc,black:Sc,red:Sc,green:Sc,yellow:Sc,blue:Sc,magenta:Sc,cyan:Sc,white:Sc,gray:Sc,bgBlack:Sc,bgRed:Sc,bgGreen:Sc,bgYellow:Sc,bgBlue:Sc,bgMagenta:Sc,bgCyan:Sc,bgWhite:Sc}};wc.exports=kc(),wc.exports.createColors=kc;var Ic=wc.exports;const Cc=bc(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));let _c=Ic,xc=Cc,Oc=class e extends Error{constructor(t,r,n,i,o,s){super(t),this.name="CssSyntaxError",this.reason=t,o&&(this.file=o),i&&(this.source=i),s&&(this.plugin=s),void 0!==r&&void 0!==n&&("number"==typeof r?(this.line=r,this.column=n):(this.line=r.line,this.column=r.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=_c.isColorSupported),xc&&e&&(t=xc(t));let r,n,i=t.split(/\r?\n/),o=Math.max(this.line-3,0),s=Math.min(this.line+2,i.length),a=String(s).length;if(e){let{bold:e,gray:t,red:i}=_c.createColors(!0);r=t=>e(i(t)),n=e=>t(e)}else r=n=e=>e;return i.slice(o,s).map(((e,t)=>{let i=o+1+t,s=" "+(" "+i).slice(-a)+" | ";if(i===this.line){let t=n(s.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return r(">")+n(s)+e+"\n "+t+r("^")}return" "+n(s)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}};var Ec=Oc;Oc.default=Oc;var Ac={};Ac.isClean=Symbol("isClean"),Ac.my=Symbol("my");const Rc={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};let Tc=class{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?r+=e.raws.afterName:n&&(r+=" "),e.nodes)this.block(e,r+n);else{let i=(e.raws.between||"")+(t?";":"");this.builder(r+n+i,e)}}beforeAfter(e,t){let r;r="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let n=e.parent,i=0;for(;n&&"root"!==n.type;)i+=1,n=n.parent;if(r.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<i;e++)r+=t}return r}block(e,t){let r,n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let r=this.raw(e,"semicolon");for(let n=0;n<e.nodes.length;n++){let i=e.nodes[n],o=this.raw(i,"before");o&&this.builder(o),this.stringify(i,t!==n||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),n=e.prop+r+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}document(e){this.body(e)}raw(e,t,r){let n;if(r||(r=t),t&&(n=e.raws[t],void 0!==n))return n;let i=e.parent;if("before"===r){if(!i||"root"===i.type&&i.first===e)return"";if(i&&"document"===i.type)return""}if(!i)return Rc[r];let o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[r])return o.rawCache[r];if("before"===r||"after"===r)return this.beforeAfter(e,r);{let i="raw"+((s=r)[0].toUpperCase()+s.slice(1));this[i]?n=this[i](o,e):o.walk((e=>{if(n=e.raws[t],void 0!==n)return!1}))}var s;return void 0===n&&(n=Rc[r]),o.rawCache[r]=n,n}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments((e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1})),void 0===r?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls((e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1})),void 0===r?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawBeforeRule(e){let t;return e.walk((r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&void 0!==r.raws.before)return t=r.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((r=>{let n=r.parent;if(n&&n!==e&&n.parent&&n.parent===e&&void 0!==r.raws.before){let e=r.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawValue(e,t){let r=e[t],n=e.raws[t];return n&&n.value===r?n.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var Mc=Tc;Tc.default=Tc;let Pc=Mc;function Nc(e,t){new Pc(t).stringify(e)}var Lc=Nc;Nc.default=Nc;let{isClean:Dc,my:jc}=Ac,Uc=Ec,Fc=Mc,Bc=Lc;function qc(e,t){let r=new e.constructor;for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;if("proxyCache"===n)continue;let i=e[n],o=typeof i;"parent"===n&&"object"===o?t&&(r[n]=t):"source"===n?r[n]=i:Array.isArray(i)?r[n]=i.map((e=>qc(e,r))):("object"===o&&null!==i&&(i=qc(i)),r[n]=i)}return r}let zc=class{constructor(e={}){this.raws={},this[Dc]=!1,this[jc]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let r of e[t])"function"==typeof r.clone?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=qc(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:n}=this.rangeBy(t);return this.source.input.error(e,{column:n.column,line:n.line},{column:r.column,line:r.line},t)}return new Uc(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markDirty(){if(this[Dc]){this[Dc]=!1;let e=this;for(;e=e.parent;)e[Dc]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){let n=(t=this.toString()).indexOf(e.word);-1!==n&&(r=this.positionInside(n,t))}return r}positionInside(e,t){let r=t||this.toString(),n=this.source.start.column,i=this.source.start.line;for(let t=0;t<e;t++)"\n"===r[t]?(n=1,i+=1):n+=1;return{column:n,line:i}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let n=this.toString(),i=n.indexOf(e.word);-1!==i&&(t=this.positionInside(i,n),r=this.positionInside(i+e.word.length,n))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return(new Fc).raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let n of e)n===this?r=!0:r?(this.parent.insertAfter(t,n),t=n):this.parent.insertBefore(t,n);r||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let r={},n=null==t;t=t||new Map;let i=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let n=this[e];if(Array.isArray(n))r[e]=n.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof n&&n.toJSON)r[e]=n.toJSON(null,t);else if("source"===e){let o=t.get(n.input);null==o&&(o=i,t.set(n.input,i),i++),r[e]={end:n.end,inputId:o,start:n.start}}else r[e]=n}return n&&(r.inputs=[...t.keys()].map((e=>e.toJSON()))),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=Bc){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}warn(e,t,r){let n={node:this};for(let e in r)n[e]=r[e];return e.warn(t,n)}get proxyOf(){return this}};var Wc=zc;zc.default=zc;let $c=Wc,Vc=class extends $c{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}};var Gc=Vc;Vc.default=Vc;var Jc={nanoid:(e=21)=>{let t="",r=e;for(;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(r=t)=>{let n="",i=r;for(;i--;)n+=e[Math.random()*e.length|0];return n}};let{SourceMapConsumer:Kc,SourceMapGenerator:Zc}=Cc,{existsSync:Yc,readFileSync:Hc}=Cc,{dirname:Xc,join:Qc}=Cc;let eh=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,n=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Xc(this.mapFile)),n&&(this.text=n)}consumer(){return this.consumerCache||(this.consumerCache=new Kc(this.text)),this.consumerCache}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(t,"base64").toString():window.atob(t);var t;let r=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+r)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),n=e.indexOf("*/",r);r>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,n)))}loadFile(e){if(this.root=Xc(e),Yc(e))return this.mapFile=e,Hc(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof Kc)return Zc.fromSourceMap(t).toString();if(t instanceof Zc)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let r=t(e);if(r){let e=this.loadFile(r);if(!e)throw new Error("Unable to load previous source map: "+r.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=Qc(Xc(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var th=eh;eh.default=eh;let{SourceMapConsumer:rh,SourceMapGenerator:nh}=Cc,{fileURLToPath:ih,pathToFileURL:oh}=Cc,{isAbsolute:sh,resolve:ah}=Cc,{nanoid:lh}=Jc,uh=Cc,ch=Ec,hh=th,dh=Symbol("fromOffsetCache"),ph=Boolean(rh&&nh),fh=Boolean(ah&&sh),gh=class{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!fh||/^\w+:\/\//.test(t.from)||sh(t.from)?this.file=t.from:this.file=ah(t.from)),fh&&ph){let e=new hh(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+lh(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,n={}){let i,o,s;if(t&&"object"==typeof t){let e=t,n=r;if("number"==typeof e.offset){let n=this.fromOffset(e.offset);t=n.line,r=n.col}else t=e.line,r=e.column;if("number"==typeof n.offset){let e=this.fromOffset(n.offset);o=e.line,s=e.col}else o=n.line,s=n.column}else if(!r){let e=this.fromOffset(t);t=e.line,r=e.col}let a=this.origin(t,r,o,s);return i=a?new ch(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,n.plugin):new ch(e,void 0===o?t:{column:r,line:t},void 0===o?r:{column:s,line:o},this.css,this.file,n.plugin),i.input={column:r,endColumn:s,endLine:o,line:t,source:this.css},this.file&&(oh&&(i.input.url=oh(this.file).toString()),i.input.file=this.file),i}fromOffset(e){let t,r;if(this[dh])r=this[dh];else{let e=this.css.split("\n");r=new Array(e.length);let t=0;for(let n=0,i=e.length;n<i;n++)r[n]=t,t+=e[n].length+1;this[dh]=r}t=r[r.length-1];let n=0;if(e>=t)n=r.length-1;else{let t,i=r.length-2;for(;n<i;)if(t=n+(i-n>>1),e<r[t])i=t-1;else{if(!(e>=r[t+1])){n=t;break}n=t+1}}return{col:e-r[n]+1,line:n+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:ah(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,n){if(!this.map)return!1;let i,o,s=this.map.consumer(),a=s.originalPositionFor({column:t,line:e});if(!a.source)return!1;"number"==typeof r&&(i=s.originalPositionFor({column:n,line:r})),o=sh(a.source)?oh(a.source):new URL(a.source,this.map.consumer().sourceRoot||oh(this.map.mapFile));let l={column:a.column,endColumn:i&&i.column,endLine:i&&i.line,line:a.line,url:o.toString()};if("file:"===o.protocol){if(!ih)throw new Error("file: protocol is not available in this PostCSS build");l.file=ih(o)}let u=s.sourceContentFor(a.source);return u&&(l.source=u),l}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var mh=gh;gh.default=gh,uh&&uh.registerInput&&uh.registerInput(gh);let{SourceMapConsumer:vh,SourceMapGenerator:yh}=Cc,{dirname:bh,relative:wh,resolve:Sh,sep:kh}=Cc,{pathToFileURL:Ih}=Cc,Ch=mh,_h=Boolean(vh&&yh),xh=Boolean(bh&&Sh&&wh&&kh);var Oh=class{constructor(e,t,r,n){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=n,this.originalCSS=n,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,r=this.toUrl(this.path(e.file)),n=e.root||bh(e.file);!1===this.mapOpts.sourcesContent?(t=new vh(e.text),t.sourcesContent&&(t.sourcesContent=null)):t=e.consumer(),this.map.applySourceMap(t,r,this.toUrl(this.path(n)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),xh&&_h&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=yh.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new yh({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new yh({file:this.outputFile(),ignoreInvalidMapping:!0});let e,t,r=1,n=1,i="<no source>",o={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,((s,a,l)=>{if(this.css+=s,a&&"end"!==l&&(o.generated.line=r,o.generated.column=n-1,a.source&&a.source.start?(o.source=this.sourcePath(a),o.original.line=a.source.start.line,o.original.column=a.source.start.column-1,this.map.addMapping(o)):(o.source=i,o.original.line=1,o.original.column=0,this.map.addMapping(o))),e=s.match(/\n/g),e?(r+=e.length,t=s.lastIndexOf("\n"),n=s.length-t):n+=s.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"===a.type||"atrule"===a.type&&!a.nodes)&&a===e.last&&!e.raws.semicolon||(a.source&&a.source.end?(o.source=this.sourcePath(a),o.original.line=a.source.end.line,o.original.column=a.source.end.column-1,o.generated.line=r,o.generated.column=n-2,this.map.addMapping(o)):(o.source=i,o.original.line=1,o.original.column=0,o.generated.line=r,o.generated.column=n-1,this.map.addMapping(o)))}}))}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?bh(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(r=bh(Sh(r,this.mapOpts.annotation)));let n=wh(r,e);return this.memoizedPaths.set(e,n),n}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}));else{let e=new Ch(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk((t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let n=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(n,t.source.input.css)}}}));else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(Ih){let t=Ih(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===kh&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}};let Eh=Wc,Ah=class extends Eh{constructor(e){super(e),this.type="comment"}};var Rh=Ah;Ah.default=Ah;let Th,Mh,Ph,Nh,{isClean:Lh,my:Dh}=Ac,jh=Gc,Uh=Rh,Fh=Wc;function Bh(e){return e.map((e=>(e.nodes&&(e.nodes=Bh(e.nodes)),delete e.source,e)))}function qh(e){if(e[Lh]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)qh(t)}let zh=class e extends Fh{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,r,n=this.getIterator();for(;this.indexes[n]<this.proxyOf.nodes.length&&(t=this.indexes[n],r=e(this.proxyOf.nodes[t],t),!1!==r);)this.indexes[n]+=1;return delete this.indexes[n],r}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...r)=>e[t](...r.map((e=>"function"==typeof e?(t,r)=>e(t.toProxy(),r):e))):"every"===t||"some"===t?r=>e[t](((e,...t)=>r(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r,n=this.index(e),i=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);for(let e of i)this.proxyOf.nodes.splice(n+1,0,e);for(let e in this.indexes)r=this.indexes[e],n<r&&(this.indexes[e]=r+i.length);return this.markDirty(),this}insertBefore(e,t){let r,n=this.index(e),i=0===n&&"prepend",o=this.normalize(t,this.proxyOf.nodes[n],i).reverse();n=this.index(e);for(let e of o)this.proxyOf.nodes.splice(n,0,e);for(let e in this.indexes)r=this.indexes[e],n<=r&&(this.indexes[e]=r+o.length);return this.markDirty(),this}normalize(t,r){if("string"==typeof t)t=Bh(Th(t).nodes);else if(void 0===t)t=[];else if(Array.isArray(t)){t=t.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if("root"===t.type&&"document"!==this.type){t=t.nodes.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if(t.type)t=[t];else if(t.prop){if(void 0===t.value)throw new Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new jh(t)]}else if(t.selector)t=[new Mh(t)];else if(t.name)t=[new Ph(t)];else{if(!t.text)throw new Error("Unknown node type in node creation");t=[new Uh(t)]}return t.map((t=>(t[Dh]||e.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[Lh]&&qh(t),void 0===t.raws.before&&r&&void 0!==r.raws.before&&(t.raws.before=r.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t)))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls((n=>{t.props&&!t.props.includes(n.prop)||t.fast&&!n.value.includes(t.fast)||(n.value=n.value.replace(e,r))})),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each(((t,r)=>{let n;try{n=e(t,r)}catch(e){throw t.addToError(e)}return!1!==n&&t.walk&&(n=t.walk(e)),n}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((r,n)=>{if("atrule"===r.type&&e.test(r.name))return t(r,n)})):this.walk(((r,n)=>{if("atrule"===r.type&&r.name===e)return t(r,n)})):(t=e,this.walk(((e,r)=>{if("atrule"===e.type)return t(e,r)})))}walkComments(e){return this.walk(((t,r)=>{if("comment"===t.type)return e(t,r)}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((r,n)=>{if("decl"===r.type&&e.test(r.prop))return t(r,n)})):this.walk(((r,n)=>{if("decl"===r.type&&r.prop===e)return t(r,n)})):(t=e,this.walk(((e,r)=>{if("decl"===e.type)return t(e,r)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((r,n)=>{if("rule"===r.type&&e.test(r.selector))return t(r,n)})):this.walk(((r,n)=>{if("rule"===r.type&&r.selector===e)return t(r,n)})):(t=e,this.walk(((e,r)=>{if("rule"===e.type)return t(e,r)})))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};zh.registerParse=e=>{Th=e},zh.registerRule=e=>{Mh=e},zh.registerAtRule=e=>{Ph=e},zh.registerRoot=e=>{Nh=e};var Wh=zh;zh.default=zh,zh.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,Ph.prototype):"rule"===e.type?Object.setPrototypeOf(e,Mh.prototype):"decl"===e.type?Object.setPrototypeOf(e,jh.prototype):"comment"===e.type?Object.setPrototypeOf(e,Uh.prototype):"root"===e.type&&Object.setPrototypeOf(e,Nh.prototype),e[Dh]=!0,e.nodes&&e.nodes.forEach((e=>{zh.rebuild(e)}))};let $h,Vh,Gh=Wh,Jh=class extends Gh{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new $h(new Vh,this,e).stringify()}};Jh.registerLazyResult=e=>{$h=e},Jh.registerProcessor=e=>{Vh=e};var Kh=Jh;Jh.default=Jh;let Zh=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var Yh=Zh;Zh.default=Zh;let Hh=Yh,Xh=class{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new Hh(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}};var Qh=Xh;Xh.default=Xh;const ed="'".charCodeAt(0),td='"'.charCodeAt(0),rd="\\".charCodeAt(0),nd="/".charCodeAt(0),id="\n".charCodeAt(0),od=" ".charCodeAt(0),sd="\f".charCodeAt(0),ad="\t".charCodeAt(0),ld="\r".charCodeAt(0),ud="[".charCodeAt(0),cd="]".charCodeAt(0),hd="(".charCodeAt(0),dd=")".charCodeAt(0),pd="{".charCodeAt(0),fd="}".charCodeAt(0),gd=";".charCodeAt(0),md="*".charCodeAt(0),vd=":".charCodeAt(0),yd="@".charCodeAt(0),bd=/[\t\n\f\r "#'()/;[\\\]{}]/g,wd=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,Sd=/.[\r\n"'(/\\]/,kd=/[\da-f]/i;let Id=Wh,Cd=class extends Id{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var _d=Cd;Cd.default=Cd,Id.registerAtRule(Cd);let xd,Od,Ed=Wh,Ad=class extends Ed{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let n=super.normalize(e);if(t)if("prepend"===r)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of n)e.raws.before=t.raws.before;return n}removeChild(e,t){let r=this.index(e);return!t&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new xd(new Od,this,e).stringify()}};Ad.registerLazyResult=e=>{xd=e},Ad.registerProcessor=e=>{Od=e};var Rd=Ad;Ad.default=Ad,Ed.registerRoot(Ad);let Td={comma:e=>Td.split(e,[","],!0),space:e=>Td.split(e,[" ","\n","\t"]),split(e,t,r){let n=[],i="",o=!1,s=0,a=!1,l="",u=!1;for(let r of e)u?u=!1:"\\"===r?u=!0:a?r===l&&(a=!1):'"'===r||"'"===r?(a=!0,l=r):"("===r?s+=1:")"===r?s>0&&(s-=1):0===s&&t.includes(r)&&(o=!0),o?(""!==i&&n.push(i.trim()),i="",o=!1):i+=r;return(r||""!==i)&&n.push(i.trim()),n}};var Md=Td;Td.default=Td;let Pd=Wh,Nd=Md,Ld=class extends Pd{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return Nd.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}};var Dd=Ld;Ld.default=Ld,Pd.registerRule(Ld);let jd=Gc,Ud=function(e,t={}){let r,n,i,o,s,a,l,u,c,h,d=e.css.valueOf(),p=t.ignoreErrors,f=d.length,g=0,m=[],v=[];function y(t){throw e.error("Unclosed "+t,g)}return{back:function(e){v.push(e)},endOfFile:function(){return 0===v.length&&g>=f},nextToken:function(e){if(v.length)return v.pop();if(g>=f)return;let t=!!e&&e.ignoreUnclosed;switch(r=d.charCodeAt(g),r){case id:case od:case ad:case ld:case sd:n=g;do{n+=1,r=d.charCodeAt(n)}while(r===od||r===id||r===ad||r===ld||r===sd);h=["space",d.slice(g,n)],g=n-1;break;case ud:case cd:case pd:case fd:case vd:case gd:case dd:{let e=String.fromCharCode(r);h=[e,e,g];break}case hd:if(u=m.length?m.pop()[1]:"",c=d.charCodeAt(g+1),"url"===u&&c!==ed&&c!==td&&c!==od&&c!==id&&c!==ad&&c!==sd&&c!==ld){n=g;do{if(a=!1,n=d.indexOf(")",n+1),-1===n){if(p||t){n=g;break}y("bracket")}for(l=n;d.charCodeAt(l-1)===rd;)l-=1,a=!a}while(a);h=["brackets",d.slice(g,n+1),g,n],g=n}else n=d.indexOf(")",g+1),o=d.slice(g,n+1),-1===n||Sd.test(o)?h=["(","(",g]:(h=["brackets",o,g,n],g=n);break;case ed:case td:i=r===ed?"'":'"',n=g;do{if(a=!1,n=d.indexOf(i,n+1),-1===n){if(p||t){n=g+1;break}y("string")}for(l=n;d.charCodeAt(l-1)===rd;)l-=1,a=!a}while(a);h=["string",d.slice(g,n+1),g,n],g=n;break;case yd:bd.lastIndex=g+1,bd.test(d),n=0===bd.lastIndex?d.length-1:bd.lastIndex-2,h=["at-word",d.slice(g,n+1),g,n],g=n;break;case rd:for(n=g,s=!0;d.charCodeAt(n+1)===rd;)n+=1,s=!s;if(r=d.charCodeAt(n+1),s&&r!==nd&&r!==od&&r!==id&&r!==ad&&r!==ld&&r!==sd&&(n+=1,kd.test(d.charAt(n)))){for(;kd.test(d.charAt(n+1));)n+=1;d.charCodeAt(n+1)===od&&(n+=1)}h=["word",d.slice(g,n+1),g,n],g=n;break;default:r===nd&&d.charCodeAt(g+1)===md?(n=d.indexOf("*/",g+2)+1,0===n&&(p||t?n=d.length:y("comment")),h=["comment",d.slice(g,n+1),g,n],g=n):(wd.lastIndex=g+1,wd.test(d),n=0===wd.lastIndex?d.length-1:wd.lastIndex-2,h=["word",d.slice(g,n+1),g,n],m.push(h),g=n)}return g++,h},position:function(){return g}}},Fd=Rh,Bd=_d,qd=Rd,zd=Dd;const Wd={empty:!0,space:!0};var $d=class{constructor(e){this.input=e,this.root=new qd,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,r,n,i=new Bd;i.name=e[1].slice(1),""===i.name&&this.unnamedAtrule(i,e),this.init(i,e[2]);let o=!1,s=!1,a=[],l=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?l.push("("===t?")":"]"):"{"===t&&l.length>0?l.push("}"):t===l[l.length-1]&&l.pop(),0===l.length){if(";"===t){i.source.end=this.getPosition(e[2]),i.source.end.offset++,this.semicolon=!0;break}if("{"===t){s=!0;break}if("}"===t){if(a.length>0){for(n=a.length-1,r=a[n];r&&"space"===r[0];)r=a[--n];r&&(i.source.end=this.getPosition(r[3]||r[2]),i.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}i.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(i.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(i,"params",a),o&&(e=a[a.length-1],i.source.end=this.getPosition(e[3]||e[2]),i.source.end.offset++,this.spaces=i.raws.between,i.raws.between="")):(i.raws.afterName="",i.params=""),s&&(i.nodes=[],this.current=i)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let r,n=0;for(let i=t-1;i>=0&&(r=e[i],"space"===r[0]||(n+=1,2!==n));i--);throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}colon(e){let t,r,n,i=0;for(let[o,s]of e.entries()){if(t=s,r=t[0],"("===r&&(i+=1),")"===r&&(i-=1),0===i&&":"===r){if(n){if("word"===n[0]&&"progid"===n[1])continue;return o}this.doubleColon(t)}n=t}return!1}comment(e){let t=new Fd;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let e=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=Ud(this.input)}decl(e,t){let r=new jd;this.init(r,e[0][2]);let n,i=e[e.length-1];for(";"===i[0]&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||function(e){for(let t=e.length-1;t>=0;t--){let r=e[t],n=r[3]||r[2];if(n)return n}}(e)),r.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;r.prop+=e.shift()[1]}for(r.raws.between="";e.length;){if(n=e.shift(),":"===n[0]){r.raws.between+=n[1];break}"word"===n[0]&&/\w/.test(n[1])&&this.unknownWord([n]),r.raws.between+=n[1]}"_"!==r.prop[0]&&"*"!==r.prop[0]||(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let o,s=[];for(;e.length&&(o=e[0][0],"space"===o||"comment"===o);)s.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(n=e[t],"!important"===n[1].toLowerCase()){r.important=!0;let n=this.stringFrom(e,t);n=this.spacesFromEnd(e)+n," !important"!==n&&(r.raws.important=n);break}if("important"===n[1].toLowerCase()){let n=e.slice(0),i="";for(let e=t;e>0;e--){let t=n[e][0];if(0===i.trim().indexOf("!")&&"space"!==t)break;i=n.pop()[1]+i}0===i.trim().indexOf("!")&&(r.important=!0,r.raws.important=i,e=n)}if("space"!==n[0]&&"comment"!==n[0])break}e.some((e=>"space"!==e[0]&&"comment"!==e[0]))&&(r.raws.between+=s.map((e=>e[1])).join(""),s=[]),this.raw(r,"value",s.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new zd;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,r=null,n=!1,i=null,o=[],s=e[1].startsWith("--"),a=[],l=e;for(;l;){if(r=l[0],a.push(l),"("===r||"["===r)i||(i=l),o.push("("===r?")":"]");else if(s&&n&&"{"===r)i||(i=l),o.push("}");else if(0===o.length){if(";"===r){if(n)return void this.decl(a,s);break}if("{"===r)return void this.rule(a);if("}"===r){this.tokenizer.back(a.pop()),t=!0;break}":"===r&&(n=!0)}else r===o[o.length-1]&&(o.pop(),0===o.length&&(i=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(i),t&&n){if(!s)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,s)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,n){let i,o,s,a,l=r.length,u="",c=!0;for(let e=0;e<l;e+=1)i=r[e],o=i[0],"space"!==o||e!==l-1||n?"comment"===o?(a=r[e-1]?r[e-1][0]:"empty",s=r[e+1]?r[e+1][0]:"empty",Wd[a]||Wd[s]||","===u.slice(-1)?c=!1:u+=i[1]):u+=i[1]:c=!1;if(!c){let n=r.reduce(((e,t)=>e+t[1]),"");e.raws[t]={raw:n,value:u}}e[t]=u}rule(e){e.pop();let t=new zd;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let n=t;n<e.length;n++)r+=e[n][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};let Vd=Wh,Gd=$d,Jd=mh;function Kd(e,t){let r=new Jd(e,t),n=new Gd(r);try{n.parse()}catch(e){throw e}return n.root}var Zd=Kd;Kd.default=Kd,Vd.registerParse(Kd);let{isClean:Yd,my:Hd}=Ac,Xd=Oh,Qd=Lc,ep=Wh,tp=Kh,rp=Qh,np=Zd,ip=Rd;const op={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},sp={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},ap={Once:!0,postcssPlugin:!0,prepare:!0};function lp(e){return"object"==typeof e&&"function"==typeof e.then}function up(e){let t=!1,r=op[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[r,r+"-"+t,0,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,0,r+"Exit"]:[r,r+"Exit"]}function cp(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:up(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function hp(e){return e[Yd]=!1,e.nodes&&e.nodes.forEach((e=>hp(e))),e}let dp={},pp=class e{constructor(t,r,n){let i;if(this.stringified=!1,this.processed=!1,"object"!=typeof r||null===r||"root"!==r.type&&"document"!==r.type)if(r instanceof e||r instanceof rp)i=hp(r.root),r.map&&(void 0===n.map&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=r.map);else{let e=np;n.syntax&&(e=n.syntax.parse),n.parser&&(e=n.parser),e.parse&&(e=e.parse);try{i=e(r,n)}catch(e){this.processed=!0,this.error=e}i&&!i[Hd]&&ep.rebuild(i)}else i=hp(r);this.result=new rp(t,i,n),this.helpers={...dp,postcss:dp,result:this.result},this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?r.postcssVersion:(e.plugin=r.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,r)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,r])};for(let t of this.plugins)if("object"==typeof t)for(let r in t){if(!sp[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!ap[r])if("object"==typeof t[r])for(let n in t[r])e(t,"*"===n?r:r+"-"+n.toLowerCase(),t[r][n]);else"function"==typeof t[r]&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(lp(r))try{await r}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Yd];){e[Yd]=!0;let t=[cp(e)];for(;t.length>0;){let e=this.visitTick(t);if(lp(e))try{await e}catch(e){let r=t[t.length-1].node;throw this.handleError(e,r)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map((e=>r(e,this.helpers)));await Promise.all(t)}else await r(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return lp(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=Qd;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new Xd(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(lp(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Yd];)e[Yd]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,n]of e){let e;this.result.lastPlugin=r;try{e=n(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(lp(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:n}=t;if("root"!==r.type&&"document"!==r.type&&!r.parent)return void e.pop();if(n.length>0&&t.visitorIndex<n.length){let[e,i]=n[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===n.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return i(r.toProxy(),this.helpers)}catch(e){throw this.handleError(e,r)}}if(0!==t.iterator){let n,i=t.iterator;for(;n=r.nodes[r.indexes[i]];)if(r.indexes[i]+=1,!n[Yd])return n[Yd]=!0,void e.push(cp(n));t.iterator=0,delete r.indexes[i]}let i=t.events;for(;t.eventIndex<i.length;){let e=i[t.eventIndex];if(t.eventIndex+=1,0===e)return void(r.nodes&&r.nodes.length&&(r[Yd]=!0,t.iterator=r.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[Yd]=!0;let t=up(e);for(let r of t)if(0===r)e.nodes&&e.each((e=>{e[Yd]||this.walkSync(e)}));else{let t=this.listeners[r];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};pp.registerPostcss=e=>{dp=e};var fp=pp;pp.default=pp,ip.registerLazyResult(pp),tp.registerLazyResult(pp);let gp=Oh,mp=Lc,vp=Zd;const yp=Qh;let bp=class{constructor(e,t,r){let n;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let i=mp;this.result=new yp(this._processor,n,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get:()=>o.root});let s=new gp(i,n,this._opts,t);if(s.isMap()){let[e,t]=s.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else s.clearAnnotation(),this.result.css=s.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=vp;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var wp=bp;bp.default=bp;let Sp=wp,kp=fp,Ip=Kh,Cp=Rd,_p=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"==typeof r&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if("object"==typeof r&&r.postcssPlugin)t.push(r);else if("function"==typeof r)t.push(r);else{if("object"!=typeof r||!r.parse&&!r.stringify)throw new Error(r+" is not a PostCSS plugin")}return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new kp(this,e,t):new Sp(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var xp=_p;_p.default=_p,Cp.registerProcessor(_p),Ip.registerProcessor(_p);let Op=Gc,Ep=th,Ap=Rh,Rp=_d,Tp=mh,Mp=Rd,Pp=Dd;function Np(e,t){if(Array.isArray(e))return e.map((e=>Np(e)));let{inputs:r,...n}=e;if(r){t=[];for(let e of r){let r={...e,__proto__:Tp.prototype};r.map&&(r.map={...r.map,__proto__:Ep.prototype}),t.push(r)}}if(n.nodes&&(n.nodes=e.nodes.map((e=>Np(e,t)))),n.source){let{inputId:e,...r}=n.source;n.source=r,null!=e&&(n.source.input=t[e])}if("root"===n.type)return new Mp(n);if("decl"===n.type)return new Op(n);if("rule"===n.type)return new Pp(n);if("comment"===n.type)return new Ap(n);if("atrule"===n.type)return new Rp(n);throw new Error("Unknown node type: "+e.type)}var Lp=Np;Np.default=Np;let Dp=Ec,jp=Gc,Up=fp,Fp=Wh,Bp=xp,qp=Lc,zp=Lp,Wp=Kh,$p=Yh,Vp=Rh,Gp=_d,Jp=Qh,Kp=mh,Zp=Zd,Yp=Md,Hp=Dd,Xp=Rd,Qp=Wc;function ef(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new Bp(e)}ef.plugin=function(e,t){let r,n=!1;function i(...r){console&&console.warn&&!n&&(n=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),ku.env.LANG&&ku.env.LANG.startsWith("cn")&&console.warn(e+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226"));let i=t(...r);return i.postcssPlugin=e,i.postcssVersion=(new Bp).version,i}return Object.defineProperty(i,"postcss",{get:()=>(r||(r=i()),r)}),i.process=function(e,t,r){return ef([i(r)]).process(e,t)},i},ef.stringify=qp,ef.parse=Zp,ef.fromJSON=zp,ef.list=Yp,ef.comment=e=>new Vp(e),ef.atRule=e=>new Gp(e),ef.decl=e=>new jp(e),ef.rule=e=>new Hp(e),ef.root=e=>new Xp(e),ef.document=e=>new Wp(e),ef.CssSyntaxError=Dp,ef.Declaration=jp,ef.Container=Fp,ef.Processor=Bp,ef.Document=Wp,ef.Comment=Vp,ef.Warning=$p,ef.AtRule=Gp,ef.Result=Jp,ef.Input=Kp,ef.Rule=Hp,ef.Root=Xp,ef.Node=Qp,Up.registerPostcss(ef);var tf=ef;ef.default=ef;const rf=yc(tf);rf.stringify,rf.fromJSON,rf.plugin,rf.parse,rf.list,rf.document,rf.comment,rf.atRule,rf.rule,rf.decl,rf.root,rf.CssSyntaxError,rf.Declaration,rf.Container,rf.Processor,rf.Document,rf.Comment,rf.Warning,rf.AtRule,rf.Result,rf.Input,rf.Rule,rf.Root,rf.Node;var nf=Object.defineProperty,of=(e,t,r)=>((e,t,r)=>t in e?nf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);Object.defineProperty;function sf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function af(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var lf={exports:{}},uf=String,cf=function(){return{isColorSupported:!1,reset:uf,bold:uf,dim:uf,italic:uf,underline:uf,inverse:uf,hidden:uf,strikethrough:uf,black:uf,red:uf,green:uf,yellow:uf,blue:uf,magenta:uf,cyan:uf,white:uf,gray:uf,bgBlack:uf,bgRed:uf,bgGreen:uf,bgYellow:uf,bgBlue:uf,bgMagenta:uf,bgCyan:uf,bgWhite:uf}};lf.exports=cf(),lf.exports.createColors=cf;var hf=lf.exports;const df=af(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));let pf=hf,ff=df,gf=class e extends Error{constructor(t,r,n,i,o,s){super(t),this.name="CssSyntaxError",this.reason=t,o&&(this.file=o),i&&(this.source=i),s&&(this.plugin=s),void 0!==r&&void 0!==n&&("number"==typeof r?(this.line=r,this.column=n):(this.line=r.line,this.column=r.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=pf.isColorSupported),ff&&e&&(t=ff(t));let r,n,i=t.split(/\r?\n/),o=Math.max(this.line-3,0),s=Math.min(this.line+2,i.length),a=String(s).length;if(e){let{bold:e,gray:t,red:i}=pf.createColors(!0);r=t=>e(i(t)),n=e=>t(e)}else r=n=e=>e;return i.slice(o,s).map(((e,t)=>{let i=o+1+t,s=" "+(" "+i).slice(-a)+" | ";if(i===this.line){let t=n(s.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return r(">")+n(s)+e+"\n "+t+r("^")}return" "+n(s)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}};var mf=gf;gf.default=gf;var vf={};vf.isClean=Symbol("isClean"),vf.my=Symbol("my");const yf={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};let bf=class{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?r+=e.raws.afterName:n&&(r+=" "),e.nodes)this.block(e,r+n);else{let i=(e.raws.between||"")+(t?";":"");this.builder(r+n+i,e)}}beforeAfter(e,t){let r;r="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let n=e.parent,i=0;for(;n&&"root"!==n.type;)i+=1,n=n.parent;if(r.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<i;e++)r+=t}return r}block(e,t){let r,n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let r=this.raw(e,"semicolon");for(let n=0;n<e.nodes.length;n++){let i=e.nodes[n],o=this.raw(i,"before");o&&this.builder(o),this.stringify(i,t!==n||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),n=e.prop+r+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}document(e){this.body(e)}raw(e,t,r){let n;if(r||(r=t),t&&(n=e.raws[t],void 0!==n))return n;let i=e.parent;if("before"===r){if(!i||"root"===i.type&&i.first===e)return"";if(i&&"document"===i.type)return""}if(!i)return yf[r];let o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[r])return o.rawCache[r];if("before"===r||"after"===r)return this.beforeAfter(e,r);{let i="raw"+((s=r)[0].toUpperCase()+s.slice(1));this[i]?n=this[i](o,e):o.walk((e=>{if(n=e.raws[t],void 0!==n)return!1}))}var s;return void 0===n&&(n=yf[r]),o.rawCache[r]=n,n}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments((e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1})),void 0===r?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls((e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1})),void 0===r?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawBeforeRule(e){let t;return e.walk((r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&void 0!==r.raws.before)return t=r.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((r=>{let n=r.parent;if(n&&n!==e&&n.parent&&n.parent===e&&void 0!==r.raws.before){let e=r.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawValue(e,t){let r=e[t],n=e.raws[t];return n&&n.value===r?n.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var wf=bf;bf.default=bf;let Sf=wf;function kf(e,t){new Sf(t).stringify(e)}var If=kf;kf.default=kf;let{isClean:Cf,my:_f}=vf,xf=mf,Of=wf,Ef=If;function Af(e,t){let r=new e.constructor;for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;if("proxyCache"===n)continue;let i=e[n],o=typeof i;"parent"===n&&"object"===o?t&&(r[n]=t):"source"===n?r[n]=i:Array.isArray(i)?r[n]=i.map((e=>Af(e,r))):("object"===o&&null!==i&&(i=Af(i)),r[n]=i)}return r}let Rf=class{constructor(e={}){this.raws={},this[Cf]=!1,this[_f]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let r of e[t])"function"==typeof r.clone?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=Af(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:n}=this.rangeBy(t);return this.source.input.error(e,{column:n.column,line:n.line},{column:r.column,line:r.line},t)}return new xf(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markDirty(){if(this[Cf]){this[Cf]=!1;let e=this;for(;e=e.parent;)e[Cf]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){let n=(t=this.toString()).indexOf(e.word);-1!==n&&(r=this.positionInside(n,t))}return r}positionInside(e,t){let r=t||this.toString(),n=this.source.start.column,i=this.source.start.line;for(let t=0;t<e;t++)"\n"===r[t]?(n=1,i+=1):n+=1;return{column:n,line:i}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let n=this.toString(),i=n.indexOf(e.word);-1!==i&&(t=this.positionInside(i,n),r=this.positionInside(i+e.word.length,n))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return(new Of).raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let n of e)n===this?r=!0:r?(this.parent.insertAfter(t,n),t=n):this.parent.insertBefore(t,n);r||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let r={},n=null==t;t=t||new Map;let i=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let n=this[e];if(Array.isArray(n))r[e]=n.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof n&&n.toJSON)r[e]=n.toJSON(null,t);else if("source"===e){let o=t.get(n.input);null==o&&(o=i,t.set(n.input,i),i++),r[e]={end:n.end,inputId:o,start:n.start}}else r[e]=n}return n&&(r.inputs=[...t.keys()].map((e=>e.toJSON()))),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=Ef){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}warn(e,t,r){let n={node:this};for(let e in r)n[e]=r[e];return e.warn(t,n)}get proxyOf(){return this}};var Tf=Rf;Rf.default=Rf;let Mf=Tf,Pf=class extends Mf{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}};var Nf=Pf;Pf.default=Pf;var Lf={nanoid:(e=21)=>{let t="",r=e;for(;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(r=t)=>{let n="",i=r;for(;i--;)n+=e[Math.random()*e.length|0];return n}};let{SourceMapConsumer:Df,SourceMapGenerator:jf}=df,{existsSync:Uf,readFileSync:Ff}=df,{dirname:Bf,join:qf}=df;let zf=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,n=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Bf(this.mapFile)),n&&(this.text=n)}consumer(){return this.consumerCache||(this.consumerCache=new Df(this.text)),this.consumerCache}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(t,"base64").toString():window.atob(t);var t;let r=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+r)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),n=e.indexOf("*/",r);r>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,n)))}loadFile(e){if(this.root=Bf(e),Uf(e))return this.mapFile=e,Ff(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof Df)return jf.fromSourceMap(t).toString();if(t instanceof jf)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let r=t(e);if(r){let e=this.loadFile(r);if(!e)throw new Error("Unable to load previous source map: "+r.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=qf(Bf(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var Wf=zf;zf.default=zf;let{SourceMapConsumer:$f,SourceMapGenerator:Vf}=df,{fileURLToPath:Gf,pathToFileURL:Jf}=df,{isAbsolute:Kf,resolve:Zf}=df,{nanoid:Yf}=Lf,Hf=df,Xf=mf,Qf=Wf,eg=Symbol("fromOffsetCache"),tg=Boolean($f&&Vf),rg=Boolean(Zf&&Kf),ng=class{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!rg||/^\w+:\/\//.test(t.from)||Kf(t.from)?this.file=t.from:this.file=Zf(t.from)),rg&&tg){let e=new Qf(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+Yf(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,n={}){let i,o,s;if(t&&"object"==typeof t){let e=t,n=r;if("number"==typeof e.offset){let n=this.fromOffset(e.offset);t=n.line,r=n.col}else t=e.line,r=e.column;if("number"==typeof n.offset){let e=this.fromOffset(n.offset);o=e.line,s=e.col}else o=n.line,s=n.column}else if(!r){let e=this.fromOffset(t);t=e.line,r=e.col}let a=this.origin(t,r,o,s);return i=a?new Xf(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,n.plugin):new Xf(e,void 0===o?t:{column:r,line:t},void 0===o?r:{column:s,line:o},this.css,this.file,n.plugin),i.input={column:r,endColumn:s,endLine:o,line:t,source:this.css},this.file&&(Jf&&(i.input.url=Jf(this.file).toString()),i.input.file=this.file),i}fromOffset(e){let t,r;if(this[eg])r=this[eg];else{let e=this.css.split("\n");r=new Array(e.length);let t=0;for(let n=0,i=e.length;n<i;n++)r[n]=t,t+=e[n].length+1;this[eg]=r}t=r[r.length-1];let n=0;if(e>=t)n=r.length-1;else{let t,i=r.length-2;for(;n<i;)if(t=n+(i-n>>1),e<r[t])i=t-1;else{if(!(e>=r[t+1])){n=t;break}n=t+1}}return{col:e-r[n]+1,line:n+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:Zf(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,n){if(!this.map)return!1;let i,o,s=this.map.consumer(),a=s.originalPositionFor({column:t,line:e});if(!a.source)return!1;"number"==typeof r&&(i=s.originalPositionFor({column:n,line:r})),o=Kf(a.source)?Jf(a.source):new URL(a.source,this.map.consumer().sourceRoot||Jf(this.map.mapFile));let l={column:a.column,endColumn:i&&i.column,endLine:i&&i.line,line:a.line,url:o.toString()};if("file:"===o.protocol){if(!Gf)throw new Error("file: protocol is not available in this PostCSS build");l.file=Gf(o)}let u=s.sourceContentFor(a.source);return u&&(l.source=u),l}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var ig=ng;ng.default=ng,Hf&&Hf.registerInput&&Hf.registerInput(ng);let{SourceMapConsumer:og,SourceMapGenerator:sg}=df,{dirname:ag,relative:lg,resolve:ug,sep:cg}=df,{pathToFileURL:hg}=df,dg=ig,pg=Boolean(og&&sg),fg=Boolean(ag&&ug&&lg&&cg);var gg=class{constructor(e,t,r,n){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=n,this.originalCSS=n,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,r=this.toUrl(this.path(e.file)),n=e.root||ag(e.file);!1===this.mapOpts.sourcesContent?(t=new og(e.text),t.sourcesContent&&(t.sourcesContent=null)):t=e.consumer(),this.map.applySourceMap(t,r,this.toUrl(this.path(n)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),fg&&pg&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=sg.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new sg({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new sg({file:this.outputFile(),ignoreInvalidMapping:!0});let e,t,r=1,n=1,i="<no source>",o={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,((s,a,l)=>{if(this.css+=s,a&&"end"!==l&&(o.generated.line=r,o.generated.column=n-1,a.source&&a.source.start?(o.source=this.sourcePath(a),o.original.line=a.source.start.line,o.original.column=a.source.start.column-1,this.map.addMapping(o)):(o.source=i,o.original.line=1,o.original.column=0,this.map.addMapping(o))),e=s.match(/\n/g),e?(r+=e.length,t=s.lastIndexOf("\n"),n=s.length-t):n+=s.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"===a.type||"atrule"===a.type&&!a.nodes)&&a===e.last&&!e.raws.semicolon||(a.source&&a.source.end?(o.source=this.sourcePath(a),o.original.line=a.source.end.line,o.original.column=a.source.end.column-1,o.generated.line=r,o.generated.column=n-2,this.map.addMapping(o)):(o.source=i,o.original.line=1,o.original.column=0,o.generated.line=r,o.generated.column=n-1,this.map.addMapping(o)))}}))}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?ag(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(r=ag(ug(r,this.mapOpts.annotation)));let n=lg(r,e);return this.memoizedPaths.set(e,n),n}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}));else{let e=new dg(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk((t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let n=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(n,t.source.input.css)}}}));else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(hg){let t=hg(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===cg&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}};let mg=Tf,vg=class extends mg{constructor(e){super(e),this.type="comment"}};var yg=vg;vg.default=vg;let bg,wg,Sg,kg,{isClean:Ig,my:Cg}=vf,_g=Nf,xg=yg,Og=Tf;function Eg(e){return e.map((e=>(e.nodes&&(e.nodes=Eg(e.nodes)),delete e.source,e)))}function Ag(e){if(e[Ig]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)Ag(t)}let Rg=class e extends Og{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,r,n=this.getIterator();for(;this.indexes[n]<this.proxyOf.nodes.length&&(t=this.indexes[n],r=e(this.proxyOf.nodes[t],t),!1!==r);)this.indexes[n]+=1;return delete this.indexes[n],r}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...r)=>e[t](...r.map((e=>"function"==typeof e?(t,r)=>e(t.toProxy(),r):e))):"every"===t||"some"===t?r=>e[t](((e,...t)=>r(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r,n=this.index(e),i=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);for(let e of i)this.proxyOf.nodes.splice(n+1,0,e);for(let e in this.indexes)r=this.indexes[e],n<r&&(this.indexes[e]=r+i.length);return this.markDirty(),this}insertBefore(e,t){let r,n=this.index(e),i=0===n&&"prepend",o=this.normalize(t,this.proxyOf.nodes[n],i).reverse();n=this.index(e);for(let e of o)this.proxyOf.nodes.splice(n,0,e);for(let e in this.indexes)r=this.indexes[e],n<=r&&(this.indexes[e]=r+o.length);return this.markDirty(),this}normalize(t,r){if("string"==typeof t)t=Eg(bg(t).nodes);else if(void 0===t)t=[];else if(Array.isArray(t)){t=t.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if("root"===t.type&&"document"!==this.type){t=t.nodes.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if(t.type)t=[t];else if(t.prop){if(void 0===t.value)throw new Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new _g(t)]}else if(t.selector)t=[new wg(t)];else if(t.name)t=[new Sg(t)];else{if(!t.text)throw new Error("Unknown node type in node creation");t=[new xg(t)]}return t.map((t=>(t[Cg]||e.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[Ig]&&Ag(t),void 0===t.raws.before&&r&&void 0!==r.raws.before&&(t.raws.before=r.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t)))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls((n=>{t.props&&!t.props.includes(n.prop)||t.fast&&!n.value.includes(t.fast)||(n.value=n.value.replace(e,r))})),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each(((t,r)=>{let n;try{n=e(t,r)}catch(e){throw t.addToError(e)}return!1!==n&&t.walk&&(n=t.walk(e)),n}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((r,n)=>{if("atrule"===r.type&&e.test(r.name))return t(r,n)})):this.walk(((r,n)=>{if("atrule"===r.type&&r.name===e)return t(r,n)})):(t=e,this.walk(((e,r)=>{if("atrule"===e.type)return t(e,r)})))}walkComments(e){return this.walk(((t,r)=>{if("comment"===t.type)return e(t,r)}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((r,n)=>{if("decl"===r.type&&e.test(r.prop))return t(r,n)})):this.walk(((r,n)=>{if("decl"===r.type&&r.prop===e)return t(r,n)})):(t=e,this.walk(((e,r)=>{if("decl"===e.type)return t(e,r)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((r,n)=>{if("rule"===r.type&&e.test(r.selector))return t(r,n)})):this.walk(((r,n)=>{if("rule"===r.type&&r.selector===e)return t(r,n)})):(t=e,this.walk(((e,r)=>{if("rule"===e.type)return t(e,r)})))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Rg.registerParse=e=>{bg=e},Rg.registerRule=e=>{wg=e},Rg.registerAtRule=e=>{Sg=e},Rg.registerRoot=e=>{kg=e};var Tg=Rg;Rg.default=Rg,Rg.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,Sg.prototype):"rule"===e.type?Object.setPrototypeOf(e,wg.prototype):"decl"===e.type?Object.setPrototypeOf(e,_g.prototype):"comment"===e.type?Object.setPrototypeOf(e,xg.prototype):"root"===e.type&&Object.setPrototypeOf(e,kg.prototype),e[Cg]=!0,e.nodes&&e.nodes.forEach((e=>{Rg.rebuild(e)}))};let Mg,Pg,Ng=Tg,Lg=class extends Ng{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new Mg(new Pg,this,e).stringify()}};Lg.registerLazyResult=e=>{Mg=e},Lg.registerProcessor=e=>{Pg=e};var Dg=Lg;Lg.default=Lg;let jg=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var Ug=jg;jg.default=jg;let Fg=Ug,Bg=class{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new Fg(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}};var qg=Bg;Bg.default=Bg;const zg="'".charCodeAt(0),Wg='"'.charCodeAt(0),$g="\\".charCodeAt(0),Vg="/".charCodeAt(0),Gg="\n".charCodeAt(0),Jg=" ".charCodeAt(0),Kg="\f".charCodeAt(0),Zg="\t".charCodeAt(0),Yg="\r".charCodeAt(0),Hg="[".charCodeAt(0),Xg="]".charCodeAt(0),Qg="(".charCodeAt(0),em=")".charCodeAt(0),tm="{".charCodeAt(0),rm="}".charCodeAt(0),nm=";".charCodeAt(0),im="*".charCodeAt(0),om=":".charCodeAt(0),sm="@".charCodeAt(0),am=/[\t\n\f\r "#'()/;[\\\]{}]/g,lm=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,um=/.[\r\n"'(/\\]/,cm=/[\da-f]/i;let hm=Tg,dm=class extends hm{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var pm=dm;dm.default=dm,hm.registerAtRule(dm);let fm,gm,mm=Tg,vm=class extends mm{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let n=super.normalize(e);if(t)if("prepend"===r)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of n)e.raws.before=t.raws.before;return n}removeChild(e,t){let r=this.index(e);return!t&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new fm(new gm,this,e).stringify()}};vm.registerLazyResult=e=>{fm=e},vm.registerProcessor=e=>{gm=e};var ym=vm;vm.default=vm,mm.registerRoot(vm);let bm={comma:e=>bm.split(e,[","],!0),space:e=>bm.split(e,[" ","\n","\t"]),split(e,t,r){let n=[],i="",o=!1,s=0,a=!1,l="",u=!1;for(let r of e)u?u=!1:"\\"===r?u=!0:a?r===l&&(a=!1):'"'===r||"'"===r?(a=!0,l=r):"("===r?s+=1:")"===r?s>0&&(s-=1):0===s&&t.includes(r)&&(o=!0),o?(""!==i&&n.push(i.trim()),i="",o=!1):i+=r;return(r||""!==i)&&n.push(i.trim()),n}};var wm=bm;bm.default=bm;let Sm=Tg,km=wm,Im=class extends Sm{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return km.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}};var Cm=Im;Im.default=Im,Sm.registerRule(Im);let _m=Nf,xm=function(e,t={}){let r,n,i,o,s,a,l,u,c,h,d=e.css.valueOf(),p=t.ignoreErrors,f=d.length,g=0,m=[],v=[];function y(t){throw e.error("Unclosed "+t,g)}return{back:function(e){v.push(e)},endOfFile:function(){return 0===v.length&&g>=f},nextToken:function(e){if(v.length)return v.pop();if(g>=f)return;let t=!!e&&e.ignoreUnclosed;switch(r=d.charCodeAt(g),r){case Gg:case Jg:case Zg:case Yg:case Kg:n=g;do{n+=1,r=d.charCodeAt(n)}while(r===Jg||r===Gg||r===Zg||r===Yg||r===Kg);h=["space",d.slice(g,n)],g=n-1;break;case Hg:case Xg:case tm:case rm:case om:case nm:case em:{let e=String.fromCharCode(r);h=[e,e,g];break}case Qg:if(u=m.length?m.pop()[1]:"",c=d.charCodeAt(g+1),"url"===u&&c!==zg&&c!==Wg&&c!==Jg&&c!==Gg&&c!==Zg&&c!==Kg&&c!==Yg){n=g;do{if(a=!1,n=d.indexOf(")",n+1),-1===n){if(p||t){n=g;break}y("bracket")}for(l=n;d.charCodeAt(l-1)===$g;)l-=1,a=!a}while(a);h=["brackets",d.slice(g,n+1),g,n],g=n}else n=d.indexOf(")",g+1),o=d.slice(g,n+1),-1===n||um.test(o)?h=["(","(",g]:(h=["brackets",o,g,n],g=n);break;case zg:case Wg:i=r===zg?"'":'"',n=g;do{if(a=!1,n=d.indexOf(i,n+1),-1===n){if(p||t){n=g+1;break}y("string")}for(l=n;d.charCodeAt(l-1)===$g;)l-=1,a=!a}while(a);h=["string",d.slice(g,n+1),g,n],g=n;break;case sm:am.lastIndex=g+1,am.test(d),n=0===am.lastIndex?d.length-1:am.lastIndex-2,h=["at-word",d.slice(g,n+1),g,n],g=n;break;case $g:for(n=g,s=!0;d.charCodeAt(n+1)===$g;)n+=1,s=!s;if(r=d.charCodeAt(n+1),s&&r!==Vg&&r!==Jg&&r!==Gg&&r!==Zg&&r!==Yg&&r!==Kg&&(n+=1,cm.test(d.charAt(n)))){for(;cm.test(d.charAt(n+1));)n+=1;d.charCodeAt(n+1)===Jg&&(n+=1)}h=["word",d.slice(g,n+1),g,n],g=n;break;default:r===Vg&&d.charCodeAt(g+1)===im?(n=d.indexOf("*/",g+2)+1,0===n&&(p||t?n=d.length:y("comment")),h=["comment",d.slice(g,n+1),g,n],g=n):(lm.lastIndex=g+1,lm.test(d),n=0===lm.lastIndex?d.length-1:lm.lastIndex-2,h=["word",d.slice(g,n+1),g,n],m.push(h),g=n)}return g++,h},position:function(){return g}}},Om=yg,Em=pm,Am=ym,Rm=Cm;const Tm={empty:!0,space:!0};var Mm=class{constructor(e){this.input=e,this.root=new Am,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,r,n,i=new Em;i.name=e[1].slice(1),""===i.name&&this.unnamedAtrule(i,e),this.init(i,e[2]);let o=!1,s=!1,a=[],l=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?l.push("("===t?")":"]"):"{"===t&&l.length>0?l.push("}"):t===l[l.length-1]&&l.pop(),0===l.length){if(";"===t){i.source.end=this.getPosition(e[2]),i.source.end.offset++,this.semicolon=!0;break}if("{"===t){s=!0;break}if("}"===t){if(a.length>0){for(n=a.length-1,r=a[n];r&&"space"===r[0];)r=a[--n];r&&(i.source.end=this.getPosition(r[3]||r[2]),i.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}i.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(i.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(i,"params",a),o&&(e=a[a.length-1],i.source.end=this.getPosition(e[3]||e[2]),i.source.end.offset++,this.spaces=i.raws.between,i.raws.between="")):(i.raws.afterName="",i.params=""),s&&(i.nodes=[],this.current=i)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let r,n=0;for(let i=t-1;i>=0&&(r=e[i],"space"===r[0]||(n+=1,2!==n));i--);throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}colon(e){let t,r,n,i=0;for(let[o,s]of e.entries()){if(t=s,r=t[0],"("===r&&(i+=1),")"===r&&(i-=1),0===i&&":"===r){if(n){if("word"===n[0]&&"progid"===n[1])continue;return o}this.doubleColon(t)}n=t}return!1}comment(e){let t=new Om;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let e=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=xm(this.input)}decl(e,t){let r=new _m;this.init(r,e[0][2]);let n,i=e[e.length-1];for(";"===i[0]&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||function(e){for(let t=e.length-1;t>=0;t--){let r=e[t],n=r[3]||r[2];if(n)return n}}(e)),r.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;r.prop+=e.shift()[1]}for(r.raws.between="";e.length;){if(n=e.shift(),":"===n[0]){r.raws.between+=n[1];break}"word"===n[0]&&/\w/.test(n[1])&&this.unknownWord([n]),r.raws.between+=n[1]}"_"!==r.prop[0]&&"*"!==r.prop[0]||(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let o,s=[];for(;e.length&&(o=e[0][0],"space"===o||"comment"===o);)s.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(n=e[t],"!important"===n[1].toLowerCase()){r.important=!0;let n=this.stringFrom(e,t);n=this.spacesFromEnd(e)+n," !important"!==n&&(r.raws.important=n);break}if("important"===n[1].toLowerCase()){let n=e.slice(0),i="";for(let e=t;e>0;e--){let t=n[e][0];if(0===i.trim().indexOf("!")&&"space"!==t)break;i=n.pop()[1]+i}0===i.trim().indexOf("!")&&(r.important=!0,r.raws.important=i,e=n)}if("space"!==n[0]&&"comment"!==n[0])break}e.some((e=>"space"!==e[0]&&"comment"!==e[0]))&&(r.raws.between+=s.map((e=>e[1])).join(""),s=[]),this.raw(r,"value",s.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Rm;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,r=null,n=!1,i=null,o=[],s=e[1].startsWith("--"),a=[],l=e;for(;l;){if(r=l[0],a.push(l),"("===r||"["===r)i||(i=l),o.push("("===r?")":"]");else if(s&&n&&"{"===r)i||(i=l),o.push("}");else if(0===o.length){if(";"===r){if(n)return void this.decl(a,s);break}if("{"===r)return void this.rule(a);if("}"===r){this.tokenizer.back(a.pop()),t=!0;break}":"===r&&(n=!0)}else r===o[o.length-1]&&(o.pop(),0===o.length&&(i=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(i),t&&n){if(!s)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,s)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,n){let i,o,s,a,l=r.length,u="",c=!0;for(let e=0;e<l;e+=1)i=r[e],o=i[0],"space"!==o||e!==l-1||n?"comment"===o?(a=r[e-1]?r[e-1][0]:"empty",s=r[e+1]?r[e+1][0]:"empty",Tm[a]||Tm[s]||","===u.slice(-1)?c=!1:u+=i[1]):u+=i[1]:c=!1;if(!c){let n=r.reduce(((e,t)=>e+t[1]),"");e.raws[t]={raw:n,value:u}}e[t]=u}rule(e){e.pop();let t=new Rm;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let n=t;n<e.length;n++)r+=e[n][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};let Pm=Tg,Nm=Mm,Lm=ig;function Dm(e,t){let r=new Lm(e,t),n=new Nm(r);try{n.parse()}catch(e){throw e}return n.root}var jm=Dm;Dm.default=Dm,Pm.registerParse(Dm);let{isClean:Um,my:Fm}=vf,Bm=gg,qm=If,zm=Tg,Wm=Dg,$m=qg,Vm=jm,Gm=ym;const Jm={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Km={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Zm={Once:!0,postcssPlugin:!0,prepare:!0};function Ym(e){return"object"==typeof e&&"function"==typeof e.then}function Hm(e){let t=!1,r=Jm[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[r,r+"-"+t,0,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,0,r+"Exit"]:[r,r+"Exit"]}function Xm(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:Hm(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function Qm(e){return e[Um]=!1,e.nodes&&e.nodes.forEach((e=>Qm(e))),e}let ev={},tv=class e{constructor(t,r,n){let i;if(this.stringified=!1,this.processed=!1,"object"!=typeof r||null===r||"root"!==r.type&&"document"!==r.type)if(r instanceof e||r instanceof $m)i=Qm(r.root),r.map&&(void 0===n.map&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=r.map);else{let e=Vm;n.syntax&&(e=n.syntax.parse),n.parser&&(e=n.parser),e.parse&&(e=e.parse);try{i=e(r,n)}catch(e){this.processed=!0,this.error=e}i&&!i[Fm]&&zm.rebuild(i)}else i=Qm(r);this.result=new $m(t,i,n),this.helpers={...ev,postcss:ev,result:this.result},this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?r.postcssVersion:(e.plugin=r.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,r)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,r])};for(let t of this.plugins)if("object"==typeof t)for(let r in t){if(!Km[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!Zm[r])if("object"==typeof t[r])for(let n in t[r])e(t,"*"===n?r:r+"-"+n.toLowerCase(),t[r][n]);else"function"==typeof t[r]&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(Ym(r))try{await r}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Um];){e[Um]=!0;let t=[Xm(e)];for(;t.length>0;){let e=this.visitTick(t);if(Ym(e))try{await e}catch(e){let r=t[t.length-1].node;throw this.handleError(e,r)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map((e=>r(e,this.helpers)));await Promise.all(t)}else await r(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return Ym(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=qm;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new Bm(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(Ym(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Um];)e[Um]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,n]of e){let e;this.result.lastPlugin=r;try{e=n(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(Ym(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:n}=t;if("root"!==r.type&&"document"!==r.type&&!r.parent)return void e.pop();if(n.length>0&&t.visitorIndex<n.length){let[e,i]=n[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===n.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return i(r.toProxy(),this.helpers)}catch(e){throw this.handleError(e,r)}}if(0!==t.iterator){let n,i=t.iterator;for(;n=r.nodes[r.indexes[i]];)if(r.indexes[i]+=1,!n[Um])return n[Um]=!0,void e.push(Xm(n));t.iterator=0,delete r.indexes[i]}let i=t.events;for(;t.eventIndex<i.length;){let e=i[t.eventIndex];if(t.eventIndex+=1,0===e)return void(r.nodes&&r.nodes.length&&(r[Um]=!0,t.iterator=r.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[Um]=!0;let t=Hm(e);for(let r of t)if(0===r)e.nodes&&e.each((e=>{e[Um]||this.walkSync(e)}));else{let t=this.listeners[r];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};tv.registerPostcss=e=>{ev=e};var rv=tv;tv.default=tv,Gm.registerLazyResult(tv),Wm.registerLazyResult(tv);let nv=gg,iv=If,ov=jm;const sv=qg;let av=class{constructor(e,t,r){let n;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let i=iv;this.result=new sv(this._processor,n,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get:()=>o.root});let s=new nv(i,n,this._opts,t);if(s.isMap()){let[e,t]=s.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else s.clearAnnotation(),this.result.css=s.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=ov;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var lv=av;av.default=av;let uv=lv,cv=rv,hv=Dg,dv=ym,pv=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"==typeof r&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if("object"==typeof r&&r.postcssPlugin)t.push(r);else if("function"==typeof r)t.push(r);else{if("object"!=typeof r||!r.parse&&!r.stringify)throw new Error(r+" is not a PostCSS plugin")}return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new cv(this,e,t):new uv(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var fv=pv;pv.default=pv,dv.registerProcessor(pv),hv.registerProcessor(pv);let gv=Nf,mv=Wf,vv=yg,yv=pm,bv=ig,wv=ym,Sv=Cm;function kv(e,t){if(Array.isArray(e))return e.map((e=>kv(e)));let{inputs:r,...n}=e;if(r){t=[];for(let e of r){let r={...e,__proto__:bv.prototype};r.map&&(r.map={...r.map,__proto__:mv.prototype}),t.push(r)}}if(n.nodes&&(n.nodes=e.nodes.map((e=>kv(e,t)))),n.source){let{inputId:e,...r}=n.source;n.source=r,null!=e&&(n.source.input=t[e])}if("root"===n.type)return new wv(n);if("decl"===n.type)return new gv(n);if("rule"===n.type)return new Sv(n);if("comment"===n.type)return new vv(n);if("atrule"===n.type)return new yv(n);throw new Error("Unknown node type: "+e.type)}var Iv=kv;kv.default=kv;let Cv=mf,_v=Nf,xv=rv,Ov=Tg,Ev=fv,Av=If,Rv=Iv,Tv=Dg,Mv=Ug,Pv=yg,Nv=pm,Lv=qg,Dv=ig,jv=jm,Uv=wm,Fv=Cm,Bv=ym,qv=Tf;function zv(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new Ev(e)}zv.plugin=function(e,t){let r,n=!1;function i(...r){console&&console.warn&&!n&&(n=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),ku.env.LANG&&ku.env.LANG.startsWith("cn")&&console.warn(e+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226"));let i=t(...r);return i.postcssPlugin=e,i.postcssVersion=(new Ev).version,i}return Object.defineProperty(i,"postcss",{get:()=>(r||(r=i()),r)}),i.process=function(e,t,r){return zv([i(r)]).process(e,t)},i},zv.stringify=Av,zv.parse=jv,zv.fromJSON=Rv,zv.list=Uv,zv.comment=e=>new Pv(e),zv.atRule=e=>new Nv(e),zv.decl=e=>new _v(e),zv.rule=e=>new Fv(e),zv.root=e=>new Bv(e),zv.document=e=>new Tv(e),zv.CssSyntaxError=Cv,zv.Declaration=_v,zv.Container=Ov,zv.Processor=Ev,zv.Document=Tv,zv.Comment=Pv,zv.Warning=Mv,zv.AtRule=Nv,zv.Result=Lv,zv.Input=Dv,zv.Rule=Fv,zv.Root=Bv,zv.Node=qv,xv.registerPostcss(zv);var Wv=zv;zv.default=zv;const $v=sf(Wv);$v.stringify,$v.fromJSON,$v.plugin,$v.parse,$v.list,$v.document,$v.comment,$v.atRule,$v.rule,$v.decl,$v.root,$v.CssSyntaxError,$v.Declaration,$v.Container,$v.Processor,$v.Document,$v.Comment,$v.Warning,$v.AtRule,$v.Result,$v.Input,$v.Rule,$v.Root,$v.Node;class Vv{constructor(...e){of(this,"parentElement",null),of(this,"parentNode",null),of(this,"ownerDocument"),of(this,"firstChild",null),of(this,"lastChild",null),of(this,"previousSibling",null),of(this,"nextSibling",null),of(this,"ELEMENT_NODE",1),of(this,"TEXT_NODE",3),of(this,"nodeType"),of(this,"nodeName"),of(this,"RRNodeType")}get childNodes(){const e=[];let t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(!(e instanceof Vv))return!1;if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}const Gv={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Jv={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Kv={};function Zv(e){if(Kv[e])return Kv[e];const t=globalThis[e],r=t.prototype,n=e in Gv?Gv[e]:void 0,i=Boolean(n&&n.every((e=>{var t,n;return Boolean(null==(n=null==(t=Object.getOwnPropertyDescriptor(r,e))?void 0:t.get)?void 0:n.toString().includes("[native code]"))}))),o=e in Jv?Jv[e]:void 0,s=Boolean(o&&o.every((e=>{var t;return"function"==typeof r[e]&&(null==(t=r[e])?void 0:t.toString().includes("[native code]"))})));if(i&&s)return Kv[e]=t.prototype,t.prototype;try{const n=document.createElement("iframe");document.body.appendChild(n);const i=n.contentWindow;if(!i)return t.prototype;const o=i[e].prototype;return document.body.removeChild(n),o?Kv[e]=o:r}catch{return r}}const Yv={};function Hv(e,t,r){var n;const i=`${e}.${String(r)}`;if(Yv[i])return Yv[i].call(t);const o=Zv(e),s=null==(n=Object.getOwnPropertyDescriptor(o,r))?void 0:n.get;return s?(Yv[i]=s,s.call(t)):t[r]}const Xv={};function Qv(e,t,r){const n=`${e}.${String(r)}`;if(Xv[n])return Xv[n].bind(t);const i=Zv(e)[r];return"function"!=typeof i?t[r]:(Xv[n]=i,i.bind(t))}function ey(){return Zv("MutationObserver").constructor}const ty={childNodes:function(e){return Hv("Node",e,"childNodes")},parentNode:function(e){return Hv("Node",e,"parentNode")},parentElement:function(e){return Hv("Node",e,"parentElement")},textContent:function(e){return Hv("Node",e,"textContent")},contains:function(e,t){return Qv("Node",e,"contains")(t)},getRootNode:function(e){return Qv("Node",e,"getRootNode")()},host:function(e){return e&&"host"in e?Hv("ShadowRoot",e,"host"):null},styleSheets:function(e){return e.styleSheets},shadowRoot:function(e){return e&&"shadowRoot"in e?Hv("Element",e,"shadowRoot"):null},querySelector:function(e,t){return Hv("Element",e,"querySelector")(t)},querySelectorAll:function(e,t){return Hv("Element",e,"querySelectorAll")(t)},mutationObserver:ey};function ry(e,t,r=document){const n={capture:!0,passive:!0};return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}const ny="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let iy={map:{},getId:()=>(console.error(ny),-1),getNode:()=>(console.error(ny),null),removeNodeFromMap(){console.error(ny)},has:()=>(console.error(ny),!1),reset(){console.error(ny)}};function oy(e,t,r={}){let n=null,i=0;return function(...o){const s=Date.now();i||!1!==r.leading||(i=s);const a=t-(s-i),l=this;a<=0||a>t?(n&&(clearTimeout(n),n=null),i=s,e.apply(l,o)):n||!1===r.trailing||(n=setTimeout((()=>{i=!1===r.leading?0:Date.now(),n=null,e.apply(l,o)}),a))}}function sy(e,t,r,n,i=window){const o=i.Object.getOwnPropertyDescriptor(e,t);return i.Object.defineProperty(e,t,n?r:{set(e){setTimeout((()=>{r.set.call(this,e)}),0),o&&o.set&&o.set.call(this,e)}}),()=>sy(e,t,o||{},!0)}function ay(e,t,r){try{if(!(t in e))return()=>{};const n=e[t],i=r(n);return"function"==typeof i&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:n}})),e[t]=i,()=>{e[t]=n}}catch{return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(iy=new Proxy(iy,{get:(e,t,r)=>("map"===t&&console.error(ny),Reflect.get(e,t,r))}));let ly=Date.now;function uy(e){var t,r,n,i;const o=e.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:o.documentElement.scrollLeft||(null==o?void 0:o.body)&&(null==(t=ty.parentElement(o.body))?void 0:t.scrollLeft)||(null==(r=null==o?void 0:o.body)?void 0:r.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==o?void 0:o.documentElement.scrollTop)||(null==o?void 0:o.body)&&(null==(n=ty.parentElement(o.body))?void 0:n.scrollTop)||(null==(i=null==o?void 0:o.body)?void 0:i.scrollTop)||0}}function cy(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function hy(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function dy(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:ty.parentElement(e)}function py(e,t,r,n){if(!e)return!1;const i=dy(e);if(!i)return!1;try{if("string"==typeof t){if(i.classList.contains(t))return!0;if(n&&null!==i.closest("."+t))return!0}else if(pc(i,t,n))return!0}catch(e){}if(r){if(i.matches(r))return!0;if(n&&null!==i.closest(r))return!0}return!1}function fy(e,t){return-1!==t.getId(e)}function gy(e,t,r){return!("TITLE"!==e.tagName||!r.headTitleMutations)||-2===t.getId(e)}function my(e,t){if(Uu(e))return!1;const r=t.getId(e);if(!t.has(r))return!0;const n=ty.parentNode(e);return(!n||n.nodeType!==e.DOCUMENT_NODE)&&(!n||my(n,t))}function vy(e){return Boolean(e.changedTouches)}function yy(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach)}function by(e){const t={},r=(e,r)=>{const n={value:e,parent:r,children:[]};return t[e.node.id]=n,n},n=[];for(const i of e){const{nextId:e,parentId:o}=i;if(e&&e in t){const o=t[e];if(o.parent){const e=o.parent.children.indexOf(o);o.parent.children.splice(e,0,r(i,o.parent))}else{const e=n.indexOf(o);n.splice(e,0,r(i,null))}}else if(o in t){const e=t[o];e.children.push(r(i,e))}else n.push(r(i,null))}return n}function wy(e,t){t(e.value);for(let r=e.children.length-1;r>=0;r--)wy(e.children[r],t)}function Sy(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function ky(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function Iy(e,t){var r,n;const i=null==(n=null==(r=e.ownerDocument)?void 0:r.defaultView)?void 0:n.frameElement;if(!i||i===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};const o=i.getBoundingClientRect(),s=Iy(i,t),a=o.height/i.clientHeight;return{x:o.x*s.relativeScale+s.x,y:o.y*s.relativeScale+s.y,relativeScale:a,absoluteScale:s.absoluteScale*a}}function Cy(e){return!!e&&(e instanceof Vv&&"shadowRoot"in e?Boolean(e.shadowRoot):Boolean(ty.shadowRoot(e)))}function _y(e,t){const r=e[t[0]];return 1===t.length?r:_y(r.cssRules[t[1]].cssRules,t.slice(2))}function xy(e){const t=[...e],r=t.pop();return{positions:t,index:r}}function Oy(e){const t=new Set,r=[];for(let n=e.length;n--;){const i=e[n];t.has(i.id)||(r.push(i),t.add(i.id))}return r}/[1-9][0-9]{12}/.test(Date.now().toString())||(ly=()=>(new Date).getTime());class Ey{constructor(){Cu(this,"id",1),Cu(this,"styleIDMap",new WeakMap),Cu(this,"idStyleMap",new Map)}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let r;return r=void 0===t?this.id++:t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Ay(e){var t;let r=null;return"getRootNode"in e&&(null==(t=ty.getRootNode(e))?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&ty.host(ty.getRootNode(e))&&(r=ty.host(ty.getRootNode(e))),r}function Ry(e){let t,r=e;for(;t=Ay(r);)r=t;return r}function Ty(e){const t=e.ownerDocument;if(!t)return!1;const r=Ry(e);return ty.contains(t,r)}function My(e){const t=e.ownerDocument;return!!t&&(ty.contains(t,e)||Ty(e))}const Py=Object.freeze(Object.defineProperty({__proto__:null,StyleSheetMirror:Ey,get _mirror(){return iy},closestElementOfNode:dy,getBaseDimension:Iy,getNestedRule:_y,getPositionsAndIndex:xy,getRootShadowHost:Ry,getShadowHost:Ay,getWindowHeight:cy,getWindowScroll:uy,getWindowWidth:hy,hasShadowRoot:Cy,hookSetter:sy,inDom:My,isAncestorRemoved:my,isBlocked:py,isIgnored:gy,isSerialized:fy,isSerializedIframe:Sy,isSerializedStylesheet:ky,iterateResolveTree:wy,legacy_isTouchEvent:vy,get nowTimestamp(){return ly},on:ry,patch:ay,polyfill:yy,queueToResolveTrees:by,shadowHostInDom:Ty,throttle:oy,uniqueTextMutations:Oy},Symbol.toStringTag,{value:"Module"}));var Ny=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Ny||{}),Ly=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Ly||{}),Dy=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Dy||{}),jy=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(jy||{}),Uy=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Uy||{}),Fy=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Fy||{});function By(e){return"__ln"in e}class qy{constructor(){Cu(this,"length",0),Cu(this,"head",null),Cu(this,"tail",null)}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let r=0;r<e;r++)t=(null==t?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&By(e.previousSibling)){const r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else if(e.nextSibling&&By(e.nextSibling)&&e.nextSibling.__ln.previous){const r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const zy=(e,t)=>`${e}@${t}`;class Wy{constructor(){Cu(this,"frozen",!1),Cu(this,"locked",!1),Cu(this,"texts",[]),Cu(this,"attributes",[]),Cu(this,"attributeMap",new WeakMap),Cu(this,"removes",[]),Cu(this,"mapRemoves",[]),Cu(this,"movedMap",{}),Cu(this,"addedSet",new Set),Cu(this,"movedSet",new Set),Cu(this,"droppedSet",new Set),Cu(this,"mutationCb"),Cu(this,"blockClass"),Cu(this,"blockSelector"),Cu(this,"maskTextClass"),Cu(this,"maskTextSelector"),Cu(this,"inlineStylesheet"),Cu(this,"maskInputOptions"),Cu(this,"maskTextFn"),Cu(this,"maskInputFn"),Cu(this,"keepIframeSrcFn"),Cu(this,"recordCanvas"),Cu(this,"inlineImages"),Cu(this,"slimDOMOptions"),Cu(this,"dataURLOptions"),Cu(this,"doc"),Cu(this,"mirror"),Cu(this,"iframeManager"),Cu(this,"stylesheetManager"),Cu(this,"shadowDomManager"),Cu(this,"canvasManager"),Cu(this,"processedNodeManager"),Cu(this,"unattachedDoc"),Cu(this,"processMutations",(e=>{e.forEach(this.processMutation),this.emit()})),Cu(this,"emit",(()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,r=new qy,n=e=>{let t=e,r=-2;for(;-2===r;)t=t&&t.nextSibling,r=t&&this.mirror.getId(t);return r},i=i=>{const o=ty.parentNode(i);if(!o||!My(i)||"TEXTAREA"===o.tagName)return;const s=Uu(o)?this.mirror.getId(Ay(i)):this.mirror.getId(o),a=n(i);if(-1===s||-1===a)return r.addNode(i);const l=vc(i,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Sy(e,this.mirror)&&this.iframeManager.addIframe(e),ky(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),Cy(i)&&this.shadowDomManager.addShadowRoot(ty.shadowRoot(i),this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});l&&(e.push({parentId:s,nextId:a,node:l}),t.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)Vy(this.removes,e,this.mirror)&&!this.movedSet.has(ty.parentNode(e))||i(e);for(const e of this.addedSet)Gy(this.droppedSet,e)||Vy(this.removes,e,this.mirror)?Gy(this.movedSet,e)?i(e):this.droppedSet.add(e):i(e);let o=null;for(;r.length;){let e=null;if(o){const t=this.mirror.getId(ty.parentNode(o.value)),r=n(o.value);-1!==t&&-1!==r&&(e=o)}if(!e){let t=r.tail;for(;t;){const r=t;if(t=t.previous,r){const t=this.mirror.getId(ty.parentNode(r.value));if(-1===n(r.value))continue;if(-1!==t){e=r;break}{const t=r.value,n=ty.parentNode(t);if(n&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const t=ty.host(n);if(-1!==this.mirror.getId(t)){e=r;break}}}}}}if(!e){for(;r.head;)r.removeNode(r.head.value);break}o=e.previous,r.removeNode(e.value),i(e.value)}const s={texts:this.texts.map((e=>{const t=e.node,r=ty.parentNode(t);return r&&"TEXTAREA"===r.tagName&&this.genTextAreaValueMutation(r),{id:this.mirror.getId(t),value:e.value}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const r=JSON.stringify(e.styleDiff),n=JSON.stringify(e._unchangedStyles);r.length<t.style.length&&(r+n).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(s.texts.length||s.attributes.length||s.removes.length||s.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))})),Cu(this,"genTextAreaValueMutation",(e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t)),t.attributes.value=Array.from(ty.childNodes(e),(e=>ty.textContent(e)||"")).join("")})),Cu(this,"processMutation",(e=>{if(!gy(e.target,this.mirror,this.slimDOMOptions))switch(e.type){case"characterData":{const t=ty.textContent(e.target);py(e.target,this.blockClass,this.blockSelector,!1)||t===e.oldValue||this.texts.push({value:fc(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,dy(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let r=e.attributeName,n=e.target.getAttribute(r);if("value"===r){const e=Ju(t);n=$u({element:t,maskInputOptions:this.maskInputOptions,tagName:t.tagName,type:e,value:n,maskInputFn:this.maskInputFn})}if(py(e.target,this.blockClass,this.blockSelector,!1)||n===e.oldValue)return;let i=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===r&&!this.keepIframeSrcFn(n)){if(t.contentDocument)return;r="rr_src"}if(i||(i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(e.target,i)),"type"===r&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!dc(t.tagName,r))if(i.attributes[r]=hc(this.doc,Vu(t.tagName),Vu(r),n),"style"===r){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const r=this.unattachedDoc.createElement("span");e.oldValue&&r.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const n=t.style.getPropertyValue(e),o=t.style.getPropertyPriority(e);n!==r.style.getPropertyValue(e)||o!==r.style.getPropertyPriority(e)?i.styleDiff[e]=""===o?n:[n,o]:i._unchangedStyles[e]=[n,o]}for(const e of Array.from(r.style))""===t.style.getPropertyValue(e)&&(i.styleDiff[e]=!1)}else"open"===r&&"DIALOG"===t.tagName&&(t.matches("dialog:modal")?i.attributes.rr_open_mode="modal":i.attributes.rr_open_mode="non-modal");break}case"childList":if(py(e.target,this.blockClass,this.blockSelector,!0))return;if("TEXTAREA"===e.target.tagName)return void this.genTextAreaValueMutation(e.target);e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const r=this.mirror.getId(t),n=Uu(e.target)?this.mirror.getId(ty.host(e.target)):this.mirror.getId(e.target);py(e.target,this.blockClass,this.blockSelector,!1)||gy(t,this.mirror,this.slimDOMOptions)||!fy(t,this.mirror)||(this.addedSet.has(t)?($y(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===r||my(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[zy(r,n)]?$y(this.movedSet,t):this.removes.push({parentId:n,id:r,isShadow:!(!Uu(e.target)||!Fu(e.target))||void 0})),this.mapRemoves.push(t))}))}})),Cu(this,"genAdds",((e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(gy(e,this.mirror,this.slimDOMOptions))return;this.movedSet.add(e);let r=null;t&&this.mirror.hasNode(t)&&(r=this.mirror.getId(t)),r&&-1!==r&&(this.movedMap[zy(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);py(e,this.blockClass,this.blockSelector,!1)||(ty.childNodes(e).forEach((e=>this.genAdds(e))),Cy(e)&&ty.childNodes(ty.shadowRoot(e)).forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}))}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function $y(e,t){e.delete(t),ty.childNodes(t).forEach((t=>$y(e,t)))}function Vy(e,t,r){return 0!==e.length&&function(e,t,r){let n=ty.parentNode(t);for(;n;){const t=r.getId(n);if(e.some((e=>e.id===t)))return!0;n=ty.parentNode(n)}return!1}(e,t,r)}function Gy(e,t){return 0!==e.size&&Jy(e,t)}function Jy(e,t){const r=ty.parentNode(t);return!!r&&(!!e.has(r)||Jy(e,r))}let Ky;const Zy=e=>{if(!Ky)return e;return(...t)=>{try{return e(...t)}catch(e){if(Ky&&!0===Ky(e))return;throw e}}};function Yy(e){return(...t)=>{try{return e(...t)}catch(e){try{e._external_=!0}catch{}throw e}}}const Hy=[];function Xy(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function Qy(e,t){const r=new Wy;Hy.push(r),r.init(e);const n=new(ey())(Zy(r.processMutations.bind(r)));return n.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),n}function eb({mouseInteractionCb:e,doc:t,mirror:r,blockClass:n,blockSelector:i,sampling:o}){if(!1===o.mouseInteraction)return()=>{};const s=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,a=[];let l=null;return Object.keys(Dy).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==s[e])).forEach((o=>{let s=Vu(o);const u=(t=>o=>{const s=Xy(o);if(py(s,n,i,!0))return;let a=null,u=t;if("pointerType"in o){switch(o.pointerType){case"mouse":a=jy.Mouse;break;case"touch":a=jy.Touch;break;case"pen":a=jy.Pen}a===jy.Touch?Dy[t]===Dy.MouseDown?u="TouchStart":Dy[t]===Dy.MouseUp&&(u="TouchEnd"):jy.Pen}else vy(o)&&(a=jy.Touch);null!==a?(l=a,(u.startsWith("Touch")&&a===jy.Touch||u.startsWith("Mouse")&&a===jy.Mouse)&&(a=null)):Dy[t]===Dy.Click&&(a=l,l=null);const c=vy(o)?o.changedTouches[0]:o;if(!c)return;const h=r.getId(s),{clientX:d,clientY:p}=c;Zy(e)({type:Dy[u],id:h,x:d,y:p,...null!==a&&{pointerType:a}})})(o);if(window.PointerEvent)switch(Dy[o]){case Dy.MouseDown:case Dy.MouseUp:s=s.replace("mouse","pointer");break;case Dy.TouchStart:case Dy.TouchEnd:return}a.push(ry(s,u,t))})),Zy((()=>{a.forEach((e=>e()))}))}function tb({scrollCb:e,doc:t,mirror:r,blockClass:n,blockSelector:i,sampling:o}){const s=Zy(oy(Zy((o=>{const s=Xy(o);if(!s||py(s,n,i,!0))return;const a=r.getId(s);if(s===t&&t.defaultView){const r=uy(t.defaultView);e({id:a,x:r.left,y:r.top})}else e({id:a,x:s.scrollLeft,y:s.scrollTop})})),o.scroll||100));return ry("scroll",s,t)}const rb=["INPUT","TEXTAREA","SELECT"],nb=new WeakMap;function ib(e){return function(e,t){if(lb("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||lb("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||lb("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||lb("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const r=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(r)}else if(e.parentStyleSheet){const r=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(r)}return t}(e,[])}function ob(e,t,r){let n,i;return e?(e.ownerNode?n=t.getId(e.ownerNode):i=r.getId(e),{styleId:i,id:n}):{}}function sb({mirror:e,stylesheetManager:t},r){var n,i,o;let s=null;s="#document"===r.nodeName?e.getId(r):e.getId(ty.host(r));const a="#document"===r.nodeName?null==(n=r.defaultView)?void 0:n.Document:null==(o=null==(i=r.ownerDocument)?void 0:i.defaultView)?void 0:o.ShadowRoot,l=(null==a?void 0:a.prototype)?Object.getOwnPropertyDescriptor(null==a?void 0:a.prototype,"adoptedStyleSheets"):void 0;return null!==s&&-1!==s&&a&&l?(Object.defineProperty(r,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get(){var e;return null==(e=l.get)?void 0:e.call(this)},set(e){var r;const n=null==(r=l.set)?void 0:r.call(this,e);if(null!==s&&-1!==s)try{t.adoptStyleSheets(e,s)}catch(e){}return n}}),Zy((()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get:l.get,set:l.set})}))):()=>{}}function ab(e,t={}){const r=e.doc.defaultView;if(!r)return()=>{};let n;!function(e,t){const{mutationCb:r,mousemoveCb:n,mouseInteractionCb:i,scrollCb:o,viewportResizeCb:s,inputCb:a,mediaInteractionCb:l,styleSheetRuleCb:u,styleDeclarationCb:c,canvasMutationCb:h,fontCb:d,selectionCb:p,customElementCb:f}=e;e.mutationCb=(...e)=>{t.mutation&&t.mutation(...e),r(...e)},e.mousemoveCb=(...e)=>{t.mousemove&&t.mousemove(...e),n(...e)},e.mouseInteractionCb=(...e)=>{t.mouseInteraction&&t.mouseInteraction(...e),i(...e)},e.scrollCb=(...e)=>{t.scroll&&t.scroll(...e),o(...e)},e.viewportResizeCb=(...e)=>{t.viewportResize&&t.viewportResize(...e),s(...e)},e.inputCb=(...e)=>{t.input&&t.input(...e),a(...e)},e.mediaInteractionCb=(...e)=>{t.mediaInteaction&&t.mediaInteaction(...e),l(...e)},e.styleSheetRuleCb=(...e)=>{t.styleSheetRule&&t.styleSheetRule(...e),u(...e)},e.styleDeclarationCb=(...e)=>{t.styleDeclaration&&t.styleDeclaration(...e),c(...e)},e.canvasMutationCb=(...e)=>{t.canvasMutation&&t.canvasMutation(...e),h(...e)},e.fontCb=(...e)=>{t.font&&t.font(...e),d(...e)},e.selectionCb=(...e)=>{t.selection&&t.selection(...e),p(...e)},e.customElementCb=(...e)=>{t.customElement&&t.customElement(...e),f(...e)}}(e,t),e.recordDOM&&(n=Qy(e,e.doc));const i=function({mousemoveCb:e,sampling:t,doc:r,mirror:n}){if(!1===t.mousemove)return()=>{};const i="number"==typeof t.mousemove?t.mousemove:50,o="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let s,a=[];const l=oy(Zy((t=>{const r=Date.now()-s;e(a.map((e=>(e.timeOffset-=r,e))),t),a=[],s=null})),o),u=Zy(oy(Zy((e=>{const t=Xy(e),{clientX:r,clientY:i}=vy(e)?e.changedTouches[0]:e;s||(s=ly()),a.push({x:r,y:i,id:n.getId(t),timeOffset:ly()-s}),l("undefined"!=typeof DragEvent&&e instanceof DragEvent?Ly.Drag:e instanceof MouseEvent?Ly.MouseMove:Ly.TouchMove)})),i,{trailing:!1})),c=[ry("mousemove",u,r),ry("touchmove",u,r),ry("drag",u,r)];return Zy((()=>{c.forEach((e=>e()))}))}(e),o=eb(e),s=tb(e),a=function({viewportResizeCb:e},{win:t}){let r=-1,n=-1;return ry("resize",Zy(oy(Zy((()=>{const t=cy(),i=hy();r===t&&n===i||(e({width:Number(i),height:Number(t)}),r=t,n=i)})),200)),t)}(e,{win:r}),l=function({inputCb:e,doc:t,mirror:r,blockClass:n,blockSelector:i,ignoreClass:o,ignoreSelector:s,maskInputOptions:a,maskInputFn:l,sampling:u,userTriggeredOnInput:c}){function h(e){let r=Xy(e);const u=e.isTrusted,h=r&&r.tagName;if(r&&"OPTION"===h&&(r=ty.parentElement(r)),!r||!h||rb.indexOf(h)<0||py(r,n,i,!0))return;if(r.classList.contains(o)||s&&r.matches(s))return;let p=r.value,f=!1;const g=Ju(r)||"";"radio"===g||"checkbox"===g?f=r.checked:(a[h.toLowerCase()]||a[g])&&(p=$u({element:r,maskInputOptions:a,tagName:h,type:g,value:p,maskInputFn:l})),d(r,c?{text:p,isChecked:f,userTriggered:u}:{text:p,isChecked:f});const m=r.name;"radio"===g&&m&&f&&t.querySelectorAll(`input[type="radio"][name="${m}"]`).forEach((e=>{if(e!==r){const t=e.value;d(e,c?{text:t,isChecked:!f,userTriggered:!1}:{text:t,isChecked:!f})}}))}function d(t,n){const i=nb.get(t);if(!i||i.text!==n.text||i.isChecked!==n.isChecked){nb.set(t,n);const i=r.getId(t);Zy(e)({...n,id:i})}}const p=("last"===u.input?["change"]:["input","change"]).map((e=>ry(e,Zy(h),t))),f=t.defaultView;if(!f)return()=>{p.forEach((e=>e()))};const g=f.Object.getOwnPropertyDescriptor(f.HTMLInputElement.prototype,"value"),m=[[f.HTMLInputElement.prototype,"value"],[f.HTMLInputElement.prototype,"checked"],[f.HTMLSelectElement.prototype,"value"],[f.HTMLTextAreaElement.prototype,"value"],[f.HTMLSelectElement.prototype,"selectedIndex"],[f.HTMLOptionElement.prototype,"selected"]];return g&&g.set&&p.push(...m.map((e=>sy(e[0],e[1],{set(){Zy(h)({target:this,isTrusted:!1})}},!1,f)))),Zy((()=>{p.forEach((e=>e()))}))}(e),u=function({mediaInteractionCb:e,blockClass:t,blockSelector:r,mirror:n,sampling:i,doc:o}){const s=Zy((o=>oy(Zy((i=>{const s=Xy(i);if(!s||py(s,t,r,!0))return;const{currentTime:a,volume:l,muted:u,playbackRate:c,loop:h}=s;e({type:o,id:n.getId(s),currentTime:a,volume:l,muted:u,playbackRate:c,loop:h})})),i.media||500))),a=[ry("play",s(Fy.Play),o),ry("pause",s(Fy.Pause),o),ry("seeked",s(Fy.Seeked),o),ry("volumechange",s(Fy.VolumeChange),o),ry("ratechange",s(Fy.RateChange),o)];return Zy((()=>{a.forEach((e=>e()))}))}(e);let c=()=>{},h=()=>{},d=()=>{},p=()=>{};e.recordDOM&&(c=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:r},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};const i=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:Zy(((n,i,o)=>{const[s,a]=o,{id:l,styleId:u}=ob(i,t,r.styleMirror);return(l&&-1!==l||u&&-1!==u)&&e({id:l,styleId:u,adds:[{rule:s,index:a}]}),Yy((()=>n.apply(i,o)))()}))}),n.CSSStyleSheet.prototype.addRule=function(e,t,r=this.cssRules.length){const i=`${e} { ${t} }`;return n.CSSStyleSheet.prototype.insertRule.apply(this,[i,r])};const o=n.CSSStyleSheet.prototype.deleteRule;let s,a;n.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:Zy(((n,i,o)=>{const[s]=o,{id:a,styleId:l}=ob(i,t,r.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,removes:[{index:s}]}),Yy((()=>n.apply(i,o)))()}))}),n.CSSStyleSheet.prototype.removeRule=function(e){return n.CSSStyleSheet.prototype.deleteRule.apply(this,[e])},n.CSSStyleSheet.prototype.replace&&(s=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:Zy(((n,i,o)=>{const[s]=o,{id:a,styleId:l}=ob(i,t,r.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,replace:s}),n.apply(i,o)}))})),n.CSSStyleSheet.prototype.replaceSync&&(a=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Zy(((n,i,o)=>{const[s]=o,{id:a,styleId:l}=ob(i,t,r.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,replaceSync:s}),n.apply(i,o)}))}));const l={};ub("CSSGroupingRule")?l.CSSGroupingRule=n.CSSGroupingRule:(ub("CSSMediaRule")&&(l.CSSMediaRule=n.CSSMediaRule),ub("CSSConditionRule")&&(l.CSSConditionRule=n.CSSConditionRule),ub("CSSSupportsRule")&&(l.CSSSupportsRule=n.CSSSupportsRule));const u={};return Object.entries(l).forEach((([n,i])=>{u[n]={insertRule:i.prototype.insertRule,deleteRule:i.prototype.deleteRule},i.prototype.insertRule=new Proxy(u[n].insertRule,{apply:Zy(((n,i,o)=>{const[s,a]=o,{id:l,styleId:u}=ob(i.parentStyleSheet,t,r.styleMirror);return(l&&-1!==l||u&&-1!==u)&&e({id:l,styleId:u,adds:[{rule:s,index:[...ib(i),a||0]}]}),n.apply(i,o)}))}),i.prototype.deleteRule=new Proxy(u[n].deleteRule,{apply:Zy(((n,i,o)=>{const[s]=o,{id:a,styleId:l}=ob(i.parentStyleSheet,t,r.styleMirror);return(a&&-1!==a||l&&-1!==l)&&e({id:a,styleId:l,removes:[{index:[...ib(i),s]}]}),n.apply(i,o)}))})})),Zy((()=>{n.CSSStyleSheet.prototype.insertRule=i,n.CSSStyleSheet.prototype.deleteRule=o,s&&(n.CSSStyleSheet.prototype.replace=s),a&&(n.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach((([e,t])=>{t.prototype.insertRule=u[e].insertRule,t.prototype.deleteRule=u[e].deleteRule}))}))}(e,{win:r}),h=sb(e,e.doc),d=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:r,stylesheetManager:n},{win:i}){const o=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:Zy(((i,s,a)=>{var l;const[u,c,h]=a;if(r.has(u))return o.apply(s,[u,c,h]);const{id:d,styleId:p}=ob(null==(l=s.parentRule)?void 0:l.parentStyleSheet,t,n.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:u,value:c,priority:h},index:ib(s.parentRule)}),i.apply(s,a)}))});const s=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:Zy(((i,o,a)=>{var l;const[u]=a;if(r.has(u))return s.apply(o,[u]);const{id:c,styleId:h}=ob(null==(l=o.parentRule)?void 0:l.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||h&&-1!==h)&&e({id:c,styleId:h,remove:{property:u},index:ib(o.parentRule)}),i.apply(o,a)}))}),Zy((()=>{i.CSSStyleDeclaration.prototype.setProperty=o,i.CSSStyleDeclaration.prototype.removeProperty=s}))}(e,{win:r}),e.collectFonts&&(p=function({fontCb:e,doc:t}){const r=t.defaultView;if(!r)return()=>{};const n=[],i=new WeakMap,o=r.FontFace;r.FontFace=function(e,t,r){const n=new o(e,t,r);return i.set(n,{family:e,buffer:"string"!=typeof t,descriptors:r,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),n};const s=ay(t.fonts,"add",(function(t){return function(r){return setTimeout(Zy((()=>{const t=i.get(r);t&&(e(t),i.delete(r))})),0),t.apply(this,[r])}}));return n.push((()=>{r.FontFace=o})),n.push(s),Zy((()=>{n.forEach((e=>e()))}))}(e)));const f=function(e){const{doc:t,mirror:r,blockClass:n,blockSelector:i,selectionCb:o}=e;let s=!0;const a=Zy((()=>{const e=t.getSelection();if(!e||s&&(null==e?void 0:e.isCollapsed))return;s=e.isCollapsed||!1;const a=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const o=e.getRangeAt(t),{startContainer:s,startOffset:l,endContainer:u,endOffset:c}=o;py(s,n,i,!0)||py(u,n,i,!0)||a.push({start:r.getId(s),startOffset:l,end:r.getId(u),endOffset:c})}o({ranges:a})}));return a(),ry("selectionchange",a)}(e),g=function({doc:e,customElementCb:t}){const r=e.defaultView;return r&&r.customElements?ay(r.customElements,"define",(function(e){return function(r,n,i){try{t({define:{name:r}})}catch(e){console.warn(`Custom element callback failed for ${r}`)}return e.apply(this,[r,n,i])}})):()=>{}}(e),m=[];for(const t of e.plugins)m.push(t.observer(t.callback,r,t.options));return Zy((()=>{Hy.forEach((e=>e.reset())),null==n||n.disconnect(),i(),o(),s(),a(),l(),u(),c(),h(),d(),p(),f(),g(),m.forEach((e=>e()))}))}function lb(e){return void 0!==window[e]}function ub(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class cb{constructor(e){Cu(this,"iframeIdToRemoteIdMap",new WeakMap),Cu(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}getId(e,t,r,n){const i=r||this.getIdToRemoteIdMap(e),o=n||this.getRemoteIdToIdMap(e);let s=i.get(t);return s||(s=this.generateIdFn(),i.set(t,s),o.set(s,t)),s}getIds(e,t){const r=this.getIdToRemoteIdMap(e),n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,r,n)))}getRemoteId(e,t,r){const n=r||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const i=n.get(t);return i||-1}getRemoteIds(e,t){const r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,r)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class hb{constructor(e){Cu(this,"iframes",new WeakMap),Cu(this,"crossOriginIframeMap",new WeakMap),Cu(this,"crossOriginIframeMirror",new cb(rc)),Cu(this,"crossOriginIframeStyleMirror"),Cu(this,"crossOriginIframeRootIdMap",new WeakMap),Cu(this,"mirror"),Cu(this,"mutationCb"),Cu(this,"wrappedEmit"),Cu(this,"loadListener"),Cu(this,"stylesheetManager"),Cu(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new cb(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var r,n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null==(r=e.contentWindow)||r.addEventListener("message",this.handleMessage.bind(this))),null==(n=this.loadListener)||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const r=this.crossOriginIframeMap.get(e.source);if(!r)return;const n=this.transformCrossOriginEvent(r,t.data.event);n&&this.wrappedEmit(n,t.data.isCheckout)}transformCrossOriginEvent(e,t){var r;switch(t.type){case Ny.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const r=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,r),this.patchRootIdOnNode(t.data.node,r),{timestamp:t.timestamp,type:Ny.IncrementalSnapshot,data:{source:Ly.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Ny.Meta:case Ny.Load:case Ny.DomContentLoaded:return!1;case Ny.Plugin:return t;case Ny.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case Ny.IncrementalSnapshot:switch(t.data.source){case Ly.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const r=this.crossOriginIframeRootIdMap.get(e);r&&this.patchRootIdOnNode(t.node,r)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Ly.Drag:case Ly.TouchMove:case Ly.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case Ly.ViewportResize:return!1;case Ly.MediaInteraction:case Ly.MouseInteraction:case Ly.Scroll:case Ly.CanvasMutation:case Ly.Input:return this.replaceIds(t.data,e,["id"]),t;case Ly.StyleSheetRule:case Ly.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Ly.Font:return t;case Ly.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case Ly.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null==(r=t.data.styles)||r.forEach((t=>{this.replaceStyleIds(t,e,["styleId"])})),t}}return!1}replace(e,t,r,n){for(const i of n)(Array.isArray(t[i])||"number"==typeof t[i])&&(Array.isArray(t[i])?t[i]=e.getIds(r,t[i]):t[i]=e.getId(r,t[i]));return t}replaceIds(e,t,r){return this.replace(this.crossOriginIframeMirror,e,t,r)}replaceStyleIds(e,t,r){return this.replace(this.crossOriginIframeStyleMirror,e,t,r)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===Ou.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class db{constructor(e){Cu(this,"shadowDoms",new WeakSet),Cu(this,"mutationCb"),Cu(this,"scrollCb"),Cu(this,"bypassOptions"),Cu(this,"mirror"),Cu(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!Fu(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const r=Qy({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>r.disconnect())),this.restoreHandlers.push(tb({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(ty.host(e))),this.restoreHandlers.push(sb({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const r=this;this.restoreHandlers.push(ay(e.prototype,"attachShadow",(function(e){return function(n){const i=e.call(this,n),o=ty.shadowRoot(this);return o&&My(this)&&r.addShadowRoot(o,t),i}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var pb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fb="undefined"==typeof Uint8Array?[]:new Uint8Array(256),gb=0;gb<64;gb++)fb[pb.charCodeAt(gb)]=gb;const mb=new Map;const vb=(e,t,r)=>{if(!e||!wb(e,t)&&"object"!=typeof e)return;const n=function(e,t){let r=mb.get(e);return r||(r=new Map,mb.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}(r,e.constructor.name);let i=n.indexOf(e);return-1===i&&(i=n.length,n.push(e)),i};function yb(e,t,r){if(e instanceof Array)return e.map((e=>yb(e,t,r)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){return{rr_type:e.constructor.name,base64:function(e){var t,r=new Uint8Array(e),n=r.length,i="";for(t=0;t<n;t+=3)i+=pb[r[t]>>2],i+=pb[(3&r[t])<<4|r[t+1]>>4],i+=pb[(15&r[t+1])<<2|r[t+2]>>6],i+=pb[63&r[t+2]];return n%3==2?i=i.substring(0,i.length-1)+"=":n%3==1&&(i=i.substring(0,i.length-2)+"=="),i}(e)}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[yb(e.buffer,t,r),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:r}=e;return{rr_type:t,src:r}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[yb(e.data,t,r),e.width,e.height]}}if(wb(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:vb(e,t,r)}}return e}const bb=(e,t,r)=>e.map((e=>yb(e,t,r))),wb=(e,t)=>{const r=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(r.find((r=>e instanceof t[r])))};function Sb(e,t,r,n){const i=[];try{const o=ay(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(i,...o){if(!py(this,t,r,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(i);if("__context"in this||(this.__context=e),n&&["webgl","webgl2"].includes(e))if(o[0]&&"object"==typeof o[0]){const e=o[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else o.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[i,...o])}}));i.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach((e=>e()))}}function kb(e,t,r,n,i,o){const s=[],a=Object.getOwnPropertyNames(e);for(const l of a)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(l))try{if("function"!=typeof e[l])continue;const a=ay(e,l,(function(e){return function(...s){const a=e.apply(this,s);if(vb(a,o,this),"tagName"in this.canvas&&!py(this.canvas,n,i,!0)){const e=bb(s,o,this),n={type:t,property:l,args:e};r(this.canvas,n)}return a}}));s.push(a)}catch{const n=sy(e,l,{set(e){r(this.canvas,{type:t,property:l,args:[e],setter:!0})}});s.push(n)}return s}const Ib="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",Cb="undefined"!=typeof window&&window.Blob&&new Blob([(_b=Ib,Uint8Array.from(atob(_b),(e=>e.charCodeAt(0))))],{type:"text/javascript;charset=utf-8"});var _b;function xb(e){let t;try{if(t=Cb&&(window.URL||window.webkitURL).createObjectURL(Cb),!t)throw"";const r=new Worker(t,{name:null==e?void 0:e.name});return r.addEventListener("error",(()=>{(window.URL||window.webkitURL).revokeObjectURL(t)})),r}catch(t){return new Worker("data:text/javascript;base64,"+Ib,{name:null==e?void 0:e.name})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}class Ob{constructor(e){Cu(this,"pendingCanvasMutations",new Map),Cu(this,"rafStamps",{latestId:0,invokeId:null}),Cu(this,"mirror"),Cu(this,"mutationCb"),Cu(this,"resetObservers"),Cu(this,"frozen",!1),Cu(this,"locked",!1),Cu(this,"processMutation",((e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)}));const{sampling:t="all",win:r,blockClass:n,blockSelector:i,recordCanvas:o,dataURLOptions:s}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,o&&"all"===t&&this.initCanvasMutationObserver(r,n,i),o&&"number"==typeof t&&this.initCanvasFPSObserver(t,r,n,i,{dataURLOptions:s})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,r,n,i){const o=Sb(t,r,n,!0),s=new Map,a=new xb;a.onmessage=e=>{const{id:t}=e.data;if(s.set(t,!1),!("base64"in e.data))return;const{base64:r,type:n,width:i,height:o}=e.data;this.mutationCb({id:t,type:Uy["2D"],commands:[{property:"clearRect",args:[0,0,i,o]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:n}]},0,0]}]})};const l=1e3/e;let u,c=0;const h=e=>{c&&e-c<l||(c=e,(()=>{const e=[];return t.document.querySelectorAll("canvas").forEach((t=>{py(t,r,n,!0)||e.push(t)})),e})().forEach((async e=>{var t;const r=this.mirror.getId(e);if(s.get(r))return;if(0===e.width||0===e.height)return;if(s.set(r,!0),["webgl","webgl2"].includes(e.__context)){const r=e.getContext(e.__context);!1===(null==(t=null==r?void 0:r.getContextAttributes())?void 0:t.preserveDrawingBuffer)&&r.clear(r.COLOR_BUFFER_BIT)}const n=await createImageBitmap(e);a.postMessage({id:r,bitmap:n,width:e.width,height:e.height,dataURLOptions:i.dataURLOptions},[n])}))),u=requestAnimationFrame(h)};u=requestAnimationFrame(h),this.resetObservers=()=>{o(),cancelAnimationFrame(u)}}initCanvasMutationObserver(e,t,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const n=Sb(e,t,r,!1),i=function(e,t,r,n){const i=[],o=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const s of o)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[s])continue;const o=ay(t.CanvasRenderingContext2D.prototype,s,(function(i){return function(...o){return py(this.canvas,r,n,!0)||setTimeout((()=>{const r=bb(o,t,this);e(this.canvas,{type:Uy["2D"],property:s,args:r})}),0),i.apply(this,o)}}));i.push(o)}catch{const r=sy(t.CanvasRenderingContext2D.prototype,s,{set(t){e(this.canvas,{type:Uy["2D"],property:s,args:[t],setter:!0})}});i.push(r)}return()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,r),o=function(e,t,r,n){const i=[];return i.push(...kb(t.WebGLRenderingContext.prototype,Uy.WebGL,e,r,n,t)),void 0!==t.WebGL2RenderingContext&&i.push(...kb(t.WebGL2RenderingContext.prototype,Uy.WebGL2,e,r,n,t)),()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,r);this.resetObservers=()=>{n(),i(),o()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const r=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,r)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(e);if(!r||-1===t)return;const n=r.map((e=>{const{type:t,...r}=e;return r})),{type:i}=r[0];this.mutationCb({id:t,type:i,commands:n}),this.pendingCanvasMutations.delete(e)}}class Eb{constructor(e){Cu(this,"trackedLinkElements",new WeakSet),Cu(this,"mutationCb"),Cu(this,"adoptedStyleSheetCb"),Cu(this,"styleMirror",new Ey),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const r={id:t,styleIds:[]},n=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),n.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,r)=>({rule:qu(e,t.href),index:r})))})),r.styleIds.push(e)}n.length>0&&(r.styles=n),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class Ab{constructor(){Cu(this,"nodeMap",new WeakMap),Cu(this,"active",!1)}inOtherBuffer(e,t){const r=this.nodeMap.get(e);return r&&Array.from(r).some((e=>e!==t))}add(e,t){this.active||(this.active=!0,requestAnimationFrame((()=>{this.nodeMap=new WeakMap,this.active=!1}))),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let Rb,Tb,Mb,Pb=!1;try{if(2!==Array.from([1],(e=>2*e))[0]){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=(null==(mu=e.contentWindow)?void 0:mu.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const Nb=Wu();function Lb(e={}){const{emit:t,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:i="rr-block",blockSelector:o=null,ignoreClass:s="rr-ignore",ignoreSelector:a=null,maskTextClass:l="rr-mask",maskTextSelector:u=null,inlineStylesheet:c=!0,maskAllInputs:h,maskInputOptions:d,slimDOMOptions:p,maskInputFn:f,maskTextFn:g,hooks:m,packFn:v,sampling:y={},dataURLOptions:b={},mousemoveWait:w,recordDOM:S=!0,recordCanvas:k=!1,recordCrossOriginIframes:I=!1,recordAfter:C=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:_=!1,collectFonts:x=!1,inlineImages:O=!1,plugins:E,keepIframeSrcFn:A=()=>!1,ignoreCSSAttributes:R=new Set([]),errorHandler:T}=e;Ky=T;const M=!I||window.parent===window;let P=!1;if(!M)try{window.parent.document&&(P=!1)}catch(e){P=!0}if(M&&!t)throw new Error("emit function is required");if(!M&&!P)return()=>{};void 0!==w&&void 0===y.mousemove&&(y.mousemove=w),Nb.reset();const N=!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==d?d:{password:!0},L=!0===p||"all"===p?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===p,headMetaDescKeywords:"all"===p,headTitleMutations:"all"===p}:p||{};let D;yy();let j=0;const U=e=>{for(const t of E||[])t.eventProcessor&&(e=t.eventProcessor(e));return v&&!P&&(e=v(e)),e};Rb=(e,i)=>{var o;const s=e;if(s.timestamp=ly(),!(null==(o=Hy[0])?void 0:o.isFrozen())||s.type===Ny.FullSnapshot||s.type===Ny.IncrementalSnapshot&&s.data.source===Ly.Mutation||Hy.forEach((e=>e.unfreeze())),M)null==t||t(U(s),i);else if(P){const e={type:"rrweb",event:U(s),origin:window.location.origin,isCheckout:i};window.parent.postMessage(e,"*")}if(s.type===Ny.FullSnapshot)D=s,j=0;else if(s.type===Ny.IncrementalSnapshot){if(s.data.source===Ly.Mutation&&s.data.isAttachIframe)return;j++;const e=n&&j>=n,t=r&&s.timestamp-D.timestamp>r;(e||t)&&Tb(!0)}};const F=e=>{Rb({type:Ny.IncrementalSnapshot,data:{source:Ly.Mutation,...e}})},B=e=>Rb({type:Ny.IncrementalSnapshot,data:{source:Ly.Scroll,...e}}),q=e=>Rb({type:Ny.IncrementalSnapshot,data:{source:Ly.CanvasMutation,...e}}),z=new Eb({mutationCb:F,adoptedStyleSheetCb:e=>Rb({type:Ny.IncrementalSnapshot,data:{source:Ly.AdoptedStyleSheet,...e}})}),W=new hb({mirror:Nb,mutationCb:F,stylesheetManager:z,recordCrossOriginIframes:I,wrappedEmit:Rb});for(const e of E||[])e.getMirror&&e.getMirror({nodeMirror:Nb,crossOriginIframeMirror:W.crossOriginIframeMirror,crossOriginIframeStyleMirror:W.crossOriginIframeStyleMirror});const $=new Ab;Mb=new Ob({recordCanvas:k,mutationCb:q,win:window,blockClass:i,blockSelector:o,mirror:Nb,sampling:y.canvas,dataURLOptions:b});const V=new db({mutationCb:F,scrollCb:B,bypassOptions:{blockClass:i,blockSelector:o,maskTextClass:l,maskTextSelector:u,inlineStylesheet:c,maskInputOptions:N,dataURLOptions:b,maskTextFn:g,maskInputFn:f,recordCanvas:k,inlineImages:O,sampling:y,slimDOMOptions:L,iframeManager:W,stylesheetManager:z,canvasManager:Mb,keepIframeSrcFn:A,processedNodeManager:$},mirror:Nb});Tb=(e=!1)=>{if(!S)return;Rb({type:Ny.Meta,data:{href:window.location.href,width:hy(),height:cy()}},e),z.reset(),V.init(),Hy.forEach((e=>e.lock()));const t=function(e,t){const{mirror:r=new zu,blockClass:n="rr-block",blockSelector:i=null,maskTextClass:o="rr-mask",maskTextSelector:s=null,inlineStylesheet:a=!0,inlineImages:l=!1,recordCanvas:u=!1,maskAllInputs:c=!1,maskTextFn:h,maskInputFn:d,slimDOM:p=!1,dataURLOptions:f,preserveWhiteSpace:g,onSerialize:m,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:S=()=>!1}=t||{};return vc(e,{doc:e,mirror:r,blockClass:n,blockSelector:i,maskTextClass:o,maskTextSelector:s,skipChild:!1,inlineStylesheet:a,maskInputOptions:!0===c?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===c?{password:!0}:c,maskTextFn:h,maskInputFn:d,slimDOMOptions:!0===p||"all"===p?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===p,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===p?{}:p,dataURLOptions:f,inlineImages:l,recordCanvas:u,preserveWhiteSpace:g,onSerialize:m,onIframeLoad:v,iframeLoadTimeout:y,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:S,newlyAddedElement:!1})}(document,{mirror:Nb,blockClass:i,blockSelector:o,maskTextClass:l,maskTextSelector:u,inlineStylesheet:c,maskAllInputs:N,maskTextFn:g,maskInputFn:f,slimDOM:L,dataURLOptions:b,recordCanvas:k,inlineImages:O,onSerialize:e=>{Sy(e,Nb)&&W.addIframe(e),ky(e,Nb)&&z.trackLinkElement(e),Cy(e)&&V.addShadowRoot(ty.shadowRoot(e),document)},onIframeLoad:(e,t)=>{W.attachIframe(e,t),V.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{z.attachLinkElement(e,t)},keepIframeSrcFn:A});if(!t)return console.warn("Failed to snapshot the document");Rb({type:Ny.FullSnapshot,data:{node:t,initialOffset:uy(window)}},e),Hy.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&z.adoptStyleSheets(document.adoptedStyleSheets,Nb.getId(document))};try{const e=[],t=e=>{var t;return Zy(ab)({mutationCb:F,mousemoveCb:(e,t)=>Rb({type:Ny.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>Rb({type:Ny.IncrementalSnapshot,data:{source:Ly.MouseInteraction,...e}}),scrollCb:B,viewportResizeCb:e=>Rb({type:Ny.IncrementalSnapshot,data:{source:Ly.ViewportResize,...e}}),inputCb:e=>Rb({type:Ny.IncrementalSnapshot,data:{source:Ly.Input,...e}}),mediaInteractionCb:e=>Rb({type:Ny.IncrementalSnapshot,data:{source:Ly.MediaInteraction,...e}}),styleSheetRuleCb:e=>Rb({type:Ny.IncrementalSnapshot,data:{source:Ly.StyleSheetRule,...e}}),styleDeclarationCb:e=>Rb({type:Ny.IncrementalSnapshot,data:{source:Ly.StyleDeclaration,...e}}),canvasMutationCb:q,fontCb:e=>Rb({type:Ny.IncrementalSnapshot,data:{source:Ly.Font,...e}}),selectionCb:e=>{Rb({type:Ny.IncrementalSnapshot,data:{source:Ly.Selection,...e}})},customElementCb:e=>{Rb({type:Ny.IncrementalSnapshot,data:{source:Ly.CustomElement,...e}})},blockClass:i,ignoreClass:s,ignoreSelector:a,maskTextClass:l,maskTextSelector:u,maskInputOptions:N,inlineStylesheet:c,sampling:y,recordDOM:S,recordCanvas:k,inlineImages:O,userTriggeredOnInput:_,collectFonts:x,doc:e,maskInputFn:f,maskTextFn:g,keepIframeSrcFn:A,blockSelector:o,slimDOMOptions:L,dataURLOptions:b,mirror:Nb,iframeManager:W,stylesheetManager:z,shadowDomManager:V,processedNodeManager:$,canvasManager:Mb,ignoreCSSAttributes:R,plugins:(null==(t=null==E?void 0:E.filter((e=>e.observer)))?void 0:t.map((e=>({observer:e.observer,options:e.options,callback:t=>Rb({type:Ny.Plugin,data:{plugin:e.name,payload:t}})}))))||[]},m)};W.addLoadListener((r=>{try{e.push(t(r.contentDocument))}catch(e){console.warn(e)}}));const r=()=>{Tb(),e.push(t(document)),Pb=!0};return"interactive"===document.readyState||"complete"===document.readyState?r():(e.push(ry("DOMContentLoaded",(()=>{Rb({type:Ny.DomContentLoaded,data:{}}),"DOMContentLoaded"===C&&r()}))),e.push(ry("load",(()=>{Rb({type:Ny.Load,data:{}}),"load"===C&&r()}),window))),()=>{e.forEach((e=>e())),$.destroy(),Pb=!1,Ky=void 0}}catch(e){console.warn(e)}}function Db(e){return{all:e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map((function(e){e(r)})),e.get("*")&&n.slice().map((function(e){e(t,r)}))}}}Lb.addCustomEvent=(e,t)=>{if(!Pb)throw new Error("please add custom event after start recording");Rb({type:Ny.Custom,data:{tag:e,payload:t}})},Lb.freezePage=()=>{Hy.forEach((e=>e.freeze()))},Lb.takeFullSnapshot=e=>{if(!Pb)throw new Error("please take full snapshot after start recording");Tb(e)},Lb.mirror=Nb;Symbol.toStringTag;var jb,Ub;(Ub=jb||(jb={}))[Ub.NotStarted=0]="NotStarted",Ub[Ub.Running=1]="Running",Ub[Ub.Stopped=2]="Stopped";const{addCustomEvent:Fb}=Lb,{freezePage:Bb}=Lb,{takeFullSnapshot:qb}=Lb;var zb="Remote config fetch rejected due to timeout after 5 seconds",Wb="Unexpected error occurred",$b=function(){function e(e){var t=e.localConfig,r=e.configKeys,n=this;this.retryTimeout=1e3,this.attempts=0,this.sessionTargetingMatch=!1,this.metrics={},this.getRemoteConfig=function(e,t,r){return Gl(n,void 0,void 0,(function(){var n,i,o;return Jl(this,(function(s){switch(s.label){case 0:return n=Date.now(),[4,this.fetchWithTimeout(r)];case 1:return(i=s.sent())&&(o=i.configs&&i.configs[e])?(this.metrics.fetchTimeAPISuccess=Date.now()-n,[2,o[t]]):(this.metrics.fetchTimeAPIFail=Date.now()-n,[2,void 0])}}))}))},this.fetchWithTimeout=function(e){return Gl(n,void 0,void 0,(function(){var t,r,n;return Jl(this,(function(i){switch(i.label){case 0:return t=new AbortController,r=setTimeout((function(){return t.abort()}),5e3),[4,this.fetchRemoteConfig(t.signal,e)];case 1:return n=i.sent(),clearTimeout(r),[2,n]}}))}))},this.fetchRemoteConfig=function(e,t){return Gl(n,void 0,void 0,(function(){var r,n,i,o,s,a,l,u,c,h,d,p;return Jl(this,(function(f){switch(f.label){case 0:if(t===this.lastFetchedSessionId&&this.attempts>=this.localConfig.flushMaxRetries)return[2,this.completeRequest({err:"Remote config fetch rejected due to exceeded retry count"})];if(e.aborted)return[2,this.completeRequest({err:zb})];t!==this.lastFetchedSessionId&&(this.lastFetchedSessionId=t,this.attempts=0),f.label=1;case 1:f.trys.push([1,3,,4]),r=new URLSearchParams({api_key:this.localConfig.apiKey});try{for(n=Kl(this.configKeys),i=n.next();!i.done;i=n.next())o=i.value,r.append("config_keys",o)}catch(e){h={error:e}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(h)throw h.error}}return t&&r.set("session_id",String(t)),s={headers:{Accept:"*/*"},method:"GET"},a="".concat(this.getServerUrl(),"?").concat(r.toString()),this.attempts+=1,[4,fetch(a,Vl(Vl({},s),{signal:e}))];case 2:if(null===(l=f.sent()))return[2,this.completeRequest({err:Wb})];switch((new $o).buildStatus(l.status)){case zo.Success:return this.attempts=0,[2,this.parseAndStoreConfig(l)];case zo.Failed:return[2,this.retryFetch(e,t)];default:return[2,this.completeRequest({err:"Network error occurred, remote config fetch failed"})]}return[3,4];case 3:return u=f.sent(),c=u,e.aborted?[2,this.completeRequest({err:zb})]:[2,this.completeRequest({err:null!==(p=c.message)&&void 0!==p?p:Wb})];case 4:return[2]}}))}))},this.retryFetch=function(e,t){return Gl(n,void 0,void 0,(function(){var r=this;return Jl(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(e){return setTimeout(e,r.attempts*r.retryTimeout)}))];case 1:return n.sent(),[2,this.fetchRemoteConfig(e,t)]}}))}))},this.parseAndStoreConfig=function(e){return Gl(n,void 0,void 0,(function(){var t;return Jl(this,(function(r){switch(r.label){case 0:return[4,e.json()];case 1:return t=r.sent(),this.completeRequest({success:"Remote config successfully fetched"}),[2,t]}}))}))},this.localConfig=t,this.configKeys=r}return e.prototype.getServerUrl=function(){return this.localConfig.configServerUrl?this.localConfig.configServerUrl:this.localConfig.serverZone===Wo.STAGING?"https://sr-client-cfg.stag2.amplitude.com/config":this.localConfig.serverZone===Wo.EU?"https://sr-client-cfg.eu.amplitude.com/config":"https://sr-client-cfg.amplitude.com/config"},e.prototype.completeRequest=function(e){var t=e.err,r=e.success;if(t)throw new Error(t);r&&this.localConfig.loggerProvider.log(r)},e}(),Vb=function(e){var t=e.localConfig,r=e.configKeys;return Gl(void 0,void 0,void 0,(function(){return Jl(this,(function(e){return[2,new $b({localConfig:t,configKeys:r})]}))}))},Gb=r(21781);Object.defineProperty;function Jb(e){return e.toLowerCase()}function Kb(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Jb(t):null}new RegExp(/(max|min)-device-(width|height)/.source,"g");function Zb(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Yb(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var Hb={exports:{}},Xb=String,Qb=function(){return{isColorSupported:!1,reset:Xb,bold:Xb,dim:Xb,italic:Xb,underline:Xb,inverse:Xb,hidden:Xb,strikethrough:Xb,black:Xb,red:Xb,green:Xb,yellow:Xb,blue:Xb,magenta:Xb,cyan:Xb,white:Xb,gray:Xb,bgBlack:Xb,bgRed:Xb,bgGreen:Xb,bgYellow:Xb,bgBlue:Xb,bgMagenta:Xb,bgCyan:Xb,bgWhite:Xb}};Hb.exports=Qb(),Hb.exports.createColors=Qb;var ew=Hb.exports;const tw=Yb(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));let rw=ew,nw=tw,iw=class e extends Error{constructor(t,r,n,i,o,s){super(t),this.name="CssSyntaxError",this.reason=t,o&&(this.file=o),i&&(this.source=i),s&&(this.plugin=s),void 0!==r&&void 0!==n&&("number"==typeof r?(this.line=r,this.column=n):(this.line=r.line,this.column=r.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=rw.isColorSupported),nw&&e&&(t=nw(t));let r,n,i=t.split(/\r?\n/),o=Math.max(this.line-3,0),s=Math.min(this.line+2,i.length),a=String(s).length;if(e){let{bold:e,gray:t,red:i}=rw.createColors(!0);r=t=>e(i(t)),n=e=>t(e)}else r=n=e=>e;return i.slice(o,s).map(((e,t)=>{let i=o+1+t,s=" "+(" "+i).slice(-a)+" | ";if(i===this.line){let t=n(s.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return r(">")+n(s)+e+"\n "+t+r("^")}return" "+n(s)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}};var ow=iw;iw.default=iw;var sw={};sw.isClean=Symbol("isClean"),sw.my=Symbol("my");const aw={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};let lw=class{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?r+=e.raws.afterName:n&&(r+=" "),e.nodes)this.block(e,r+n);else{let i=(e.raws.between||"")+(t?";":"");this.builder(r+n+i,e)}}beforeAfter(e,t){let r;r="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let n=e.parent,i=0;for(;n&&"root"!==n.type;)i+=1,n=n.parent;if(r.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<i;e++)r+=t}return r}block(e,t){let r,n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let r=this.raw(e,"semicolon");for(let n=0;n<e.nodes.length;n++){let i=e.nodes[n],o=this.raw(i,"before");o&&this.builder(o),this.stringify(i,t!==n||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),n=e.prop+r+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}document(e){this.body(e)}raw(e,t,r){let n;if(r||(r=t),t&&(n=e.raws[t],void 0!==n))return n;let i=e.parent;if("before"===r){if(!i||"root"===i.type&&i.first===e)return"";if(i&&"document"===i.type)return""}if(!i)return aw[r];let o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[r])return o.rawCache[r];if("before"===r||"after"===r)return this.beforeAfter(e,r);{let i="raw"+((s=r)[0].toUpperCase()+s.slice(1));this[i]?n=this[i](o,e):o.walk((e=>{if(n=e.raws[t],void 0!==n)return!1}))}var s;return void 0===n&&(n=aw[r]),o.rawCache[r]=n,n}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments((e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1})),void 0===r?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls((e=>{if(void 0!==e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1})),void 0===r?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawBeforeRule(e){let t;return e.walk((r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&void 0!==r.raws.before)return t=r.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((r=>{let n=r.parent;if(n&&n!==e&&n.parent&&n.parent===e&&void 0!==r.raws.before){let e=r.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawValue(e,t){let r=e[t],n=e.raws[t];return n&&n.value===r?n.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};var uw=lw;lw.default=lw;let cw=uw;function hw(e,t){new cw(t).stringify(e)}var dw=hw;hw.default=hw;let{isClean:pw,my:fw}=sw,gw=ow,mw=uw,vw=dw;function yw(e,t){let r=new e.constructor;for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;if("proxyCache"===n)continue;let i=e[n],o=typeof i;"parent"===n&&"object"===o?t&&(r[n]=t):"source"===n?r[n]=i:Array.isArray(i)?r[n]=i.map((e=>yw(e,r))):("object"===o&&null!==i&&(i=yw(i)),r[n]=i)}return r}let bw=class{constructor(e={}){this.raws={},this[pw]=!1,this[fw]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let r of e[t])"function"==typeof r.clone?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=yw(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:n}=this.rangeBy(t);return this.source.input.error(e,{column:n.column,line:n.line},{column:r.column,line:r.line},t)}return new gw(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markDirty(){if(this[pw]){this[pw]=!1;let e=this;for(;e=e.parent;)e[pw]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){let n=(t=this.toString()).indexOf(e.word);-1!==n&&(r=this.positionInside(n,t))}return r}positionInside(e,t){let r=t||this.toString(),n=this.source.start.column,i=this.source.start.line;for(let t=0;t<e;t++)"\n"===r[t]?(n=1,i+=1):n+=1;return{column:n,line:i}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let n=this.toString(),i=n.indexOf(e.word);-1!==i&&(t=this.positionInside(i,n),r=this.positionInside(i+e.word.length,n))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:"number"==typeof e.endIndex?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return(new mw).raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let n of e)n===this?r=!0:r?(this.parent.insertAfter(t,n),t=n):this.parent.insertBefore(t,n);r||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let r={},n=null==t;t=t||new Map;let i=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let n=this[e];if(Array.isArray(n))r[e]=n.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof n&&n.toJSON)r[e]=n.toJSON(null,t);else if("source"===e){let o=t.get(n.input);null==o&&(o=i,t.set(n.input,i),i++),r[e]={end:n.end,inputId:o,start:n.start}}else r[e]=n}return n&&(r.inputs=[...t.keys()].map((e=>e.toJSON()))),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=vw){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}warn(e,t,r){let n={node:this};for(let e in r)n[e]=r[e];return e.warn(t,n)}get proxyOf(){return this}};var ww=bw;bw.default=bw;let Sw=ww,kw=class extends Sw{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}};var Iw=kw;kw.default=kw;var Cw={nanoid:(e=21)=>{let t="",r=e;for(;r--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(r=t)=>{let n="",i=r;for(;i--;)n+=e[Math.random()*e.length|0];return n}};let{SourceMapConsumer:_w,SourceMapGenerator:xw}=tw,{existsSync:Ow,readFileSync:Ew}=tw,{dirname:Aw,join:Rw}=tw;let Tw=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,n=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Aw(this.mapFile)),n&&(this.text=n)}consumer(){return this.consumerCache||(this.consumerCache=new _w(this.text)),this.consumerCache}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(t,"base64").toString():window.atob(t);var t;let r=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+r)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),n=e.indexOf("*/",r);r>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,n)))}loadFile(e){if(this.root=Aw(e),Ow(e))return this.mapFile=e,Ew(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof _w)return xw.fromSourceMap(t).toString();if(t instanceof xw)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let r=t(e);if(r){let e=this.loadFile(r);if(!e)throw new Error("Unable to load previous source map: "+r.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=Rw(Aw(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};var Mw=Tw;Tw.default=Tw;let{SourceMapConsumer:Pw,SourceMapGenerator:Nw}=tw,{fileURLToPath:Lw,pathToFileURL:Dw}=tw,{isAbsolute:jw,resolve:Uw}=tw,{nanoid:Fw}=Cw,Bw=tw,qw=ow,zw=Mw,Ww=Symbol("fromOffsetCache"),$w=Boolean(Pw&&Nw),Vw=Boolean(Uw&&jw),Gw=class{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||""===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!Vw||/^\w+:\/\//.test(t.from)||jw(t.from)?this.file=t.from:this.file=Uw(t.from)),Vw&&$w){let e=new zw(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+Fw(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,n={}){let i,o,s;if(t&&"object"==typeof t){let e=t,n=r;if("number"==typeof e.offset){let n=this.fromOffset(e.offset);t=n.line,r=n.col}else t=e.line,r=e.column;if("number"==typeof n.offset){let e=this.fromOffset(n.offset);o=e.line,s=e.col}else o=n.line,s=n.column}else if(!r){let e=this.fromOffset(t);t=e.line,r=e.col}let a=this.origin(t,r,o,s);return i=a?new qw(e,void 0===a.endLine?a.line:{column:a.column,line:a.line},void 0===a.endLine?a.column:{column:a.endColumn,line:a.endLine},a.source,a.file,n.plugin):new qw(e,void 0===o?t:{column:r,line:t},void 0===o?r:{column:s,line:o},this.css,this.file,n.plugin),i.input={column:r,endColumn:s,endLine:o,line:t,source:this.css},this.file&&(Dw&&(i.input.url=Dw(this.file).toString()),i.input.file=this.file),i}fromOffset(e){let t,r;if(this[Ww])r=this[Ww];else{let e=this.css.split("\n");r=new Array(e.length);let t=0;for(let n=0,i=e.length;n<i;n++)r[n]=t,t+=e[n].length+1;this[Ww]=r}t=r[r.length-1];let n=0;if(e>=t)n=r.length-1;else{let t,i=r.length-2;for(;n<i;)if(t=n+(i-n>>1),e<r[t])i=t-1;else{if(!(e>=r[t+1])){n=t;break}n=t+1}}return{col:e-r[n]+1,line:n+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:Uw(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,n){if(!this.map)return!1;let i,o,s=this.map.consumer(),a=s.originalPositionFor({column:t,line:e});if(!a.source)return!1;"number"==typeof r&&(i=s.originalPositionFor({column:n,line:r})),o=jw(a.source)?Dw(a.source):new URL(a.source,this.map.consumer().sourceRoot||Dw(this.map.mapFile));let l={column:a.column,endColumn:i&&i.column,endLine:i&&i.line,line:a.line,url:o.toString()};if("file:"===o.protocol){if(!Lw)throw new Error("file: protocol is not available in this PostCSS build");l.file=Lw(o)}let u=s.sourceContentFor(a.source);return u&&(l.source=u),l}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};var Jw=Gw;Gw.default=Gw,Bw&&Bw.registerInput&&Bw.registerInput(Gw);let{SourceMapConsumer:Kw,SourceMapGenerator:Zw}=tw,{dirname:Yw,relative:Hw,resolve:Xw,sep:Qw}=tw,{pathToFileURL:eS}=tw,tS=Jw,rS=Boolean(Kw&&Zw),nS=Boolean(Yw&&Xw&&Hw&&Qw);var iS=class{constructor(e,t,r,n){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=n,this.originalCSS=n,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,r=this.toUrl(this.path(e.file)),n=e.root||Yw(e.file);!1===this.mapOpts.sourcesContent?(t=new Kw(e.text),t.sourcesContent&&(t.sourcesContent=null)):t=e.consumer(),this.map.applySourceMap(t,r,this.toUrl(this.path(n)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),nS&&rS&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Zw.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Zw({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Zw({file:this.outputFile(),ignoreInvalidMapping:!0});let e,t,r=1,n=1,i="<no source>",o={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,((s,a,l)=>{if(this.css+=s,a&&"end"!==l&&(o.generated.line=r,o.generated.column=n-1,a.source&&a.source.start?(o.source=this.sourcePath(a),o.original.line=a.source.start.line,o.original.column=a.source.start.column-1,this.map.addMapping(o)):(o.source=i,o.original.line=1,o.original.column=0,this.map.addMapping(o))),e=s.match(/\n/g),e?(r+=e.length,t=s.lastIndexOf("\n"),n=s.length-t):n+=s.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"===a.type||"atrule"===a.type&&!a.nodes)&&a===e.last&&!e.raws.semicolon||(a.source&&a.source.end?(o.source=this.sourcePath(a),o.original.line=a.source.end.line,o.original.column=a.source.end.column-1,o.generated.line=r,o.generated.column=n-2,this.map.addMapping(o)):(o.source=i,o.original.line=1,o.original.column=0,o.generated.line=r,o.generated.column=n-1,this.map.addMapping(o)))}}))}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?Yw(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(r=Yw(Xw(r,this.mapOpts.annotation)));let n=Hw(r,e);return this.memoizedPaths.set(e,n),n}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}));else{let e=new tS(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk((t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let n=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(n,t.source.input.css)}}}));else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(eS){let t=eS(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===Qw&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}};let oS=ww,sS=class extends oS{constructor(e){super(e),this.type="comment"}};var aS=sS;sS.default=sS;let lS,uS,cS,hS,{isClean:dS,my:pS}=sw,fS=Iw,gS=aS,mS=ww;function vS(e){return e.map((e=>(e.nodes&&(e.nodes=vS(e.nodes)),delete e.source,e)))}function yS(e){if(e[dS]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)yS(t)}let bS=class e extends mS{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,r,n=this.getIterator();for(;this.indexes[n]<this.proxyOf.nodes.length&&(t=this.indexes[n],r=e(this.proxyOf.nodes[t],t),!1!==r);)this.indexes[n]+=1;return delete this.indexes[n],r}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...r)=>e[t](...r.map((e=>"function"==typeof e?(t,r)=>e(t.toProxy(),r):e))):"every"===t||"some"===t?r=>e[t](((e,...t)=>r(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,r)=>(e[t]===r||(e[t]=r,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r,n=this.index(e),i=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);for(let e of i)this.proxyOf.nodes.splice(n+1,0,e);for(let e in this.indexes)r=this.indexes[e],n<r&&(this.indexes[e]=r+i.length);return this.markDirty(),this}insertBefore(e,t){let r,n=this.index(e),i=0===n&&"prepend",o=this.normalize(t,this.proxyOf.nodes[n],i).reverse();n=this.index(e);for(let e of o)this.proxyOf.nodes.splice(n,0,e);for(let e in this.indexes)r=this.indexes[e],n<=r&&(this.indexes[e]=r+o.length);return this.markDirty(),this}normalize(t,r){if("string"==typeof t)t=vS(lS(t).nodes);else if(void 0===t)t=[];else if(Array.isArray(t)){t=t.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if("root"===t.type&&"document"!==this.type){t=t.nodes.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if(t.type)t=[t];else if(t.prop){if(void 0===t.value)throw new Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new fS(t)]}else if(t.selector)t=[new uS(t)];else if(t.name)t=[new cS(t)];else{if(!t.text)throw new Error("Unknown node type in node creation");t=[new gS(t)]}let n=t.map((t=>(t[pS]||e.rebuild(t),(t=t.proxyOf).parent&&t.parent.removeChild(t),t[dS]&&yS(t),void 0===t.raws.before&&r&&void 0!==r.raws.before&&(t.raws.before=r.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t)));return n}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls((n=>{t.props&&!t.props.includes(n.prop)||t.fast&&!n.value.includes(t.fast)||(n.value=n.value.replace(e,r))})),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each(((t,r)=>{let n;try{n=e(t,r)}catch(e){throw t.addToError(e)}return!1!==n&&t.walk&&(n=t.walk(e)),n}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((r,n)=>{if("atrule"===r.type&&e.test(r.name))return t(r,n)})):this.walk(((r,n)=>{if("atrule"===r.type&&r.name===e)return t(r,n)})):(t=e,this.walk(((e,r)=>{if("atrule"===e.type)return t(e,r)})))}walkComments(e){return this.walk(((t,r)=>{if("comment"===t.type)return e(t,r)}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((r,n)=>{if("decl"===r.type&&e.test(r.prop))return t(r,n)})):this.walk(((r,n)=>{if("decl"===r.type&&r.prop===e)return t(r,n)})):(t=e,this.walk(((e,r)=>{if("decl"===e.type)return t(e,r)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((r,n)=>{if("rule"===r.type&&e.test(r.selector))return t(r,n)})):this.walk(((r,n)=>{if("rule"===r.type&&r.selector===e)return t(r,n)})):(t=e,this.walk(((e,r)=>{if("rule"===e.type)return t(e,r)})))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};bS.registerParse=e=>{lS=e},bS.registerRule=e=>{uS=e},bS.registerAtRule=e=>{cS=e},bS.registerRoot=e=>{hS=e};var wS=bS;bS.default=bS,bS.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,cS.prototype):"rule"===e.type?Object.setPrototypeOf(e,uS.prototype):"decl"===e.type?Object.setPrototypeOf(e,fS.prototype):"comment"===e.type?Object.setPrototypeOf(e,gS.prototype):"root"===e.type&&Object.setPrototypeOf(e,hS.prototype),e[pS]=!0,e.nodes&&e.nodes.forEach((e=>{bS.rebuild(e)}))};let SS,kS,IS=wS,CS=class extends IS{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new SS(new kS,this,e).stringify()}};CS.registerLazyResult=e=>{SS=e},CS.registerProcessor=e=>{kS=e};var _S=CS;CS.default=CS;let xS=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};var OS=xS;xS.default=xS;let ES=OS,AS=class{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new ES(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}};var RS=AS;AS.default=AS;const TS="'".charCodeAt(0),MS='"'.charCodeAt(0),PS="\\".charCodeAt(0),NS="/".charCodeAt(0),LS="\n".charCodeAt(0),DS=" ".charCodeAt(0),jS="\f".charCodeAt(0),US="\t".charCodeAt(0),FS="\r".charCodeAt(0),BS="[".charCodeAt(0),qS="]".charCodeAt(0),zS="(".charCodeAt(0),WS=")".charCodeAt(0),$S="{".charCodeAt(0),VS="}".charCodeAt(0),GS=";".charCodeAt(0),JS="*".charCodeAt(0),KS=":".charCodeAt(0),ZS="@".charCodeAt(0),YS=/[\t\n\f\r "#'()/;[\\\]{}]/g,HS=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,XS=/.[\r\n"'(/\\]/,QS=/[\da-f]/i;let ek=wS,tk=class extends ek{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};var rk=tk;tk.default=tk,ek.registerAtRule(tk);let nk,ik,ok=wS,sk=class extends ok{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let n=super.normalize(e);if(t)if("prepend"===r)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of n)e.raws.before=t.raws.before;return n}removeChild(e,t){let r=this.index(e);return!t&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new nk(new ik,this,e).stringify()}};sk.registerLazyResult=e=>{nk=e},sk.registerProcessor=e=>{ik=e};var ak=sk;sk.default=sk,ok.registerRoot(sk);let lk={comma:e=>lk.split(e,[","],!0),space:e=>lk.split(e,[" ","\n","\t"]),split(e,t,r){let n=[],i="",o=!1,s=0,a=!1,l="",u=!1;for(let r of e)u?u=!1:"\\"===r?u=!0:a?r===l&&(a=!1):'"'===r||"'"===r?(a=!0,l=r):"("===r?s+=1:")"===r?s>0&&(s-=1):0===s&&t.includes(r)&&(o=!0),o?(""!==i&&n.push(i.trim()),i="",o=!1):i+=r;return(r||""!==i)&&n.push(i.trim()),n}};var uk=lk;lk.default=lk;let ck=wS,hk=uk,dk=class extends ck{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return hk.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}};var pk=dk;dk.default=dk,ck.registerRule(dk);let fk=Iw,gk=function(e,t={}){let r,n,i,o,s,a,l,u,c,h,d=e.css.valueOf(),p=t.ignoreErrors,f=d.length,g=0,m=[],v=[];function y(t){throw e.error("Unclosed "+t,g)}return{back:function(e){v.push(e)},endOfFile:function(){return 0===v.length&&g>=f},nextToken:function(e){if(v.length)return v.pop();if(g>=f)return;let t=!!e&&e.ignoreUnclosed;switch(r=d.charCodeAt(g),r){case LS:case DS:case US:case FS:case jS:n=g;do{n+=1,r=d.charCodeAt(n)}while(r===DS||r===LS||r===US||r===FS||r===jS);h=["space",d.slice(g,n)],g=n-1;break;case BS:case qS:case $S:case VS:case KS:case GS:case WS:{let e=String.fromCharCode(r);h=[e,e,g];break}case zS:if(u=m.length?m.pop()[1]:"",c=d.charCodeAt(g+1),"url"===u&&c!==TS&&c!==MS&&c!==DS&&c!==LS&&c!==US&&c!==jS&&c!==FS){n=g;do{if(a=!1,n=d.indexOf(")",n+1),-1===n){if(p||t){n=g;break}y("bracket")}for(l=n;d.charCodeAt(l-1)===PS;)l-=1,a=!a}while(a);h=["brackets",d.slice(g,n+1),g,n],g=n}else n=d.indexOf(")",g+1),o=d.slice(g,n+1),-1===n||XS.test(o)?h=["(","(",g]:(h=["brackets",o,g,n],g=n);break;case TS:case MS:i=r===TS?"'":'"',n=g;do{if(a=!1,n=d.indexOf(i,n+1),-1===n){if(p||t){n=g+1;break}y("string")}for(l=n;d.charCodeAt(l-1)===PS;)l-=1,a=!a}while(a);h=["string",d.slice(g,n+1),g,n],g=n;break;case ZS:YS.lastIndex=g+1,YS.test(d),n=0===YS.lastIndex?d.length-1:YS.lastIndex-2,h=["at-word",d.slice(g,n+1),g,n],g=n;break;case PS:for(n=g,s=!0;d.charCodeAt(n+1)===PS;)n+=1,s=!s;if(r=d.charCodeAt(n+1),s&&r!==NS&&r!==DS&&r!==LS&&r!==US&&r!==FS&&r!==jS&&(n+=1,QS.test(d.charAt(n)))){for(;QS.test(d.charAt(n+1));)n+=1;d.charCodeAt(n+1)===DS&&(n+=1)}h=["word",d.slice(g,n+1),g,n],g=n;break;default:r===NS&&d.charCodeAt(g+1)===JS?(n=d.indexOf("*/",g+2)+1,0===n&&(p||t?n=d.length:y("comment")),h=["comment",d.slice(g,n+1),g,n],g=n):(HS.lastIndex=g+1,HS.test(d),n=0===HS.lastIndex?d.length-1:HS.lastIndex-2,h=["word",d.slice(g,n+1),g,n],m.push(h),g=n)}return g++,h},position:function(){return g}}},mk=aS,vk=rk,yk=ak,bk=pk;const wk={empty:!0,space:!0};var Sk=class{constructor(e){this.input=e,this.root=new yk,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,r,n,i=new vk;i.name=e[1].slice(1),""===i.name&&this.unnamedAtrule(i,e),this.init(i,e[2]);let o=!1,s=!1,a=[],l=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?l.push("("===t?")":"]"):"{"===t&&l.length>0?l.push("}"):t===l[l.length-1]&&l.pop(),0===l.length){if(";"===t){i.source.end=this.getPosition(e[2]),i.source.end.offset++,this.semicolon=!0;break}if("{"===t){s=!0;break}if("}"===t){if(a.length>0){for(n=a.length-1,r=a[n];r&&"space"===r[0];)r=a[--n];r&&(i.source.end=this.getPosition(r[3]||r[2]),i.source.end.offset++)}this.end(e);break}a.push(e)}else a.push(e);if(this.tokenizer.endOfFile()){o=!0;break}}i.raws.between=this.spacesAndCommentsFromEnd(a),a.length?(i.raws.afterName=this.spacesAndCommentsFromStart(a),this.raw(i,"params",a),o&&(e=a[a.length-1],i.source.end=this.getPosition(e[3]||e[2]),i.source.end.offset++,this.spaces=i.raws.between,i.raws.between="")):(i.raws.afterName="",i.params=""),s&&(i.nodes=[],this.current=i)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let r,n=0;for(let i=t-1;i>=0&&(r=e[i],"space"===r[0]||(n+=1,2!==n));i--);throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}colon(e){let t,r,n,i=0;for(let[o,s]of e.entries()){if(t=s,r=t[0],"("===r&&(i+=1),")"===r&&(i-=1),0===i&&":"===r){if(n){if("word"===n[0]&&"progid"===n[1])continue;return o}this.doubleColon(t)}n=t}return!1}comment(e){let t=new mk;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let e=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=gk(this.input)}decl(e,t){let r=new fk;this.init(r,e[0][2]);let n,i=e[e.length-1];for(";"===i[0]&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||function(e){for(let t=e.length-1;t>=0;t--){let r=e[t],n=r[3]||r[2];if(n)return n}}(e)),r.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;r.prop+=e.shift()[1]}for(r.raws.between="";e.length;){if(n=e.shift(),":"===n[0]){r.raws.between+=n[1];break}"word"===n[0]&&/\w/.test(n[1])&&this.unknownWord([n]),r.raws.between+=n[1]}"_"!==r.prop[0]&&"*"!==r.prop[0]||(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let o,s=[];for(;e.length&&(o=e[0][0],"space"===o||"comment"===o);)s.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(n=e[t],"!important"===n[1].toLowerCase()){r.important=!0;let n=this.stringFrom(e,t);n=this.spacesFromEnd(e)+n," !important"!==n&&(r.raws.important=n);break}if("important"===n[1].toLowerCase()){let n=e.slice(0),i="";for(let e=t;e>0;e--){let t=n[e][0];if(0===i.trim().indexOf("!")&&"space"!==t)break;i=n.pop()[1]+i}0===i.trim().indexOf("!")&&(r.important=!0,r.raws.important=i,e=n)}if("space"!==n[0]&&"comment"!==n[0])break}let a=e.some((e=>"space"!==e[0]&&"comment"!==e[0]));a&&(r.raws.between+=s.map((e=>e[1])).join(""),s=[]),this.raw(r,"value",s.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new bk;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,r=null,n=!1,i=null,o=[],s=e[1].startsWith("--"),a=[],l=e;for(;l;){if(r=l[0],a.push(l),"("===r||"["===r)i||(i=l),o.push("("===r?")":"]");else if(s&&n&&"{"===r)i||(i=l),o.push("}");else if(0===o.length){if(";"===r){if(n)return void this.decl(a,s);break}if("{"===r)return void this.rule(a);if("}"===r){this.tokenizer.back(a.pop()),t=!0;break}":"===r&&(n=!0)}else r===o[o.length-1]&&(o.pop(),0===o.length&&(i=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(i),t&&n){if(!s)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,s)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,n){let i,o,s,a,l=r.length,u="",c=!0;for(let e=0;e<l;e+=1)i=r[e],o=i[0],"space"!==o||e!==l-1||n?"comment"===o?(a=r[e-1]?r[e-1][0]:"empty",s=r[e+1]?r[e+1][0]:"empty",wk[a]||wk[s]||","===u.slice(-1)?c=!1:u+=i[1]):u+=i[1]:c=!1;if(!c){let n=r.reduce(((e,t)=>e+t[1]),"");e.raws[t]={raw:n,value:u}}e[t]=u}rule(e){e.pop();let t=new bk;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let n=t;n<e.length;n++)r+=e[n][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};let kk=wS,Ik=Sk,Ck=Jw;function _k(e,t){let r=new Ck(e,t),n=new Ik(r);try{n.parse()}catch(e){throw e}return n.root}var xk=_k;_k.default=_k,kk.registerParse(_k);let{isClean:Ok,my:Ek}=sw,Ak=iS,Rk=dw,Tk=wS,Mk=_S,Pk=RS,Nk=xk,Lk=ak;const Dk={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},jk={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},Uk={Once:!0,postcssPlugin:!0,prepare:!0};function Fk(e){return"object"==typeof e&&"function"==typeof e.then}function Bk(e){let t=!1,r=Dk[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[r,r+"-"+t,0,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,0,r+"Exit"]:[r,r+"Exit"]}function qk(e){let t;return t="document"===e.type?["Document",0,"DocumentExit"]:"root"===e.type?["Root",0,"RootExit"]:Bk(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function zk(e){return e[Ok]=!1,e.nodes&&e.nodes.forEach((e=>zk(e))),e}let Wk={},$k=class e{constructor(t,r,n){let i;if(this.stringified=!1,this.processed=!1,"object"!=typeof r||null===r||"root"!==r.type&&"document"!==r.type)if(r instanceof e||r instanceof Pk)i=zk(r.root),r.map&&(void 0===n.map&&(n.map={}),n.map.inline||(n.map.inline=!1),n.map.prev=r.map);else{let e=Nk;n.syntax&&(e=n.syntax.parse),n.parser&&(e=n.parser),e.parse&&(e=e.parse);try{i=e(r,n)}catch(e){this.processed=!0,this.error=e}i&&!i[Ek]&&Tk.rebuild(i)}else i=zk(r);this.result=new Pk(t,i,n),this.helpers={...Wk,postcss:Wk,result:this.result},this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?r.postcssVersion:(e.plugin=r.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,r)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,r])};for(let t of this.plugins)if("object"==typeof t)for(let r in t){if(!jk[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!Uk[r])if("object"==typeof t[r])for(let n in t[r])e(t,"*"===n?r:r+"-"+n.toLowerCase(),t[r][n]);else"function"==typeof t[r]&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(Fk(r))try{await r}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Ok];){e[Ok]=!0;let t=[qk(e)];for(;t.length>0;){let e=this.visitTick(t);if(Fk(e))try{await e}catch(e){let r=t[t.length-1].node;throw this.handleError(e,r)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map((e=>r(e,this.helpers)));await Promise.all(t)}else await r(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return Fk(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=Rk;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new Ak(t,this.result.root,this.result.opts).generate();return this.result.css=r[0],this.result.map=r[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){if(Fk(this.runOnRoot(e)))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Ok];)e[Ok]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,n]of e){let e;this.result.lastPlugin=r;try{e=n(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(Fk(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:n}=t;if("root"!==r.type&&"document"!==r.type&&!r.parent)return void e.pop();if(n.length>0&&t.visitorIndex<n.length){let[e,i]=n[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===n.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return i(r.toProxy(),this.helpers)}catch(e){throw this.handleError(e,r)}}if(0!==t.iterator){let n,i=t.iterator;for(;n=r.nodes[r.indexes[i]];)if(r.indexes[i]+=1,!n[Ok])return n[Ok]=!0,void e.push(qk(n));t.iterator=0,delete r.indexes[i]}let i=t.events;for(;t.eventIndex<i.length;){let e=i[t.eventIndex];if(t.eventIndex+=1,0===e)return void(r.nodes&&r.nodes.length&&(r[Ok]=!0,t.iterator=r.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[Ok]=!0;let t=Bk(e);for(let r of t)if(0===r)e.nodes&&e.each((e=>{e[Ok]||this.walkSync(e)}));else{let t=this.listeners[r];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};$k.registerPostcss=e=>{Wk=e};var Vk=$k;$k.default=$k,Lk.registerLazyResult($k),Mk.registerLazyResult($k);let Gk=iS,Jk=dw,Kk=xk;const Zk=RS;let Yk=class{constructor(e,t,r){let n;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let i=Jk;this.result=new Zk(this._processor,n,this._opts),this.result.css=t;let o=this;Object.defineProperty(this.result,"root",{get:()=>o.root});let s=new Gk(i,n,this._opts,t);if(s.isMap()){let[e,t]=s.generate();e&&(this.result.css=e),t&&(this.result.map=t)}else s.clearAnnotation(),this.result.css=s.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=Kk;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};var Hk=Yk;Yk.default=Yk;let Xk=Hk,Qk=Vk,eI=_S,tI=ak,rI=class{constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"==typeof r&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if("object"==typeof r&&r.postcssPlugin)t.push(r);else if("function"==typeof r)t.push(r);else{if("object"!=typeof r||!r.parse&&!r.stringify)throw new Error(r+" is not a PostCSS plugin")}return t}process(e,t={}){return this.plugins.length||t.parser||t.stringifier||t.syntax?new Qk(this,e,t):new Xk(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};var nI=rI;rI.default=rI,tI.registerProcessor(rI),eI.registerProcessor(rI);let iI=Iw,oI=Mw,sI=aS,aI=rk,lI=Jw,uI=ak,cI=pk;function hI(e,t){if(Array.isArray(e))return e.map((e=>hI(e)));let{inputs:r,...n}=e;if(r){t=[];for(let e of r){let r={...e,__proto__:lI.prototype};r.map&&(r.map={...r.map,__proto__:oI.prototype}),t.push(r)}}if(n.nodes&&(n.nodes=e.nodes.map((e=>hI(e,t)))),n.source){let{inputId:e,...r}=n.source;n.source=r,null!=e&&(n.source.input=t[e])}if("root"===n.type)return new uI(n);if("decl"===n.type)return new iI(n);if("rule"===n.type)return new cI(n);if("comment"===n.type)return new sI(n);if("atrule"===n.type)return new aI(n);throw new Error("Unknown node type: "+e.type)}var dI=hI;hI.default=hI;let pI=ow,fI=Iw,gI=Vk,mI=wS,vI=nI,yI=dw,bI=dI,wI=_S,SI=OS,kI=aS,II=rk,CI=RS,_I=Jw,xI=xk,OI=uk,EI=pk,AI=ak,RI=ww;function TI(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new vI(e)}TI.plugin=function(e,t){let r,n=!1;function i(...r){console&&console.warn&&!n&&(n=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),Gb.env.LANG&&Gb.env.LANG.startsWith("cn")&&console.warn(e+":  postcss.plugin . :\nhttps://www.w3ctech.com/topic/2226"));let i=t(...r);return i.postcssPlugin=e,i.postcssVersion=(new vI).version,i}return Object.defineProperty(i,"postcss",{get:()=>(r||(r=i()),r)}),i.process=function(e,t,r){return TI([i(r)]).process(e,t)},i},TI.stringify=yI,TI.parse=xI,TI.fromJSON=bI,TI.list=OI,TI.comment=e=>new kI(e),TI.atRule=e=>new II(e),TI.decl=e=>new fI(e),TI.rule=e=>new EI(e),TI.root=e=>new AI(e),TI.document=e=>new wI(e),TI.CssSyntaxError=pI,TI.Declaration=fI,TI.Container=mI,TI.Processor=vI,TI.Document=wI,TI.Comment=kI,TI.Warning=SI,TI.AtRule=II,TI.Result=CI,TI.Input=_I,TI.Rule=EI,TI.Root=AI,TI.Node=RI,gI.registerPostcss(TI);var MI=TI;TI.default=TI;const PI=Zb(MI);PI.stringify,PI.fromJSON,PI.plugin,PI.parse,PI.list,PI.document,PI.comment,PI.atRule,PI.rule,PI.decl,PI.root,PI.CssSyntaxError,PI.Declaration,PI.Container,PI.Processor,PI.Document,PI.Comment,PI.Warning,PI.AtRule,PI.Result,PI.Input,PI.Rule,PI.Root,PI.Node;var NI="medium",LI=function(e,t,r){switch(t){case"light":if("input"!==e)return!0;var n=r?Kb(r):"";return!!n&&(!!["password","hidden","email","tel"].includes(n)||!!r.autocomplete.startsWith("cc-"));case"medium":case"conservative":return!0;default:return LI(e,NI,r)}},DI=function(e,t){return function(r,n){return function(e,t,r){var n,i,o;if(void 0===t&&(t={defaultMaskLevel:NI}),r){if(r.closest("."+gu))return!0;var s=(null!==(n=t.maskSelector)&&void 0!==n?n:[]).some((function(e){return r.closest(e)}));if(s)return!0;if(r.closest(".amp-unmask"))return!1;var a=(null!==(i=t.unmaskSelector)&&void 0!==i?i:[]).some((function(e){return r.closest(e)}));if(a)return!1}return LI(e,null!==(o=t.defaultMaskLevel)&&void 0!==o?o:NI,r)}(e,t,n)?r.replace(/[^\s]/g,"*"):r}},jI=function(e){var t=0;if(0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t|=0}return t},UI=function(e,t){return t||(e===Wo.STAGING?"https://api-sr.stag2.amplitude.com/sessions/v2/track":e===Wo.EU?"https://api-sr.eu.amplitude.com/sessions/v2/track":"https://api-sr.amplitude.com/sessions/v2/track")},FI=function(){return Gl(void 0,void 0,void 0,(function(){var e,t,r,n,i,o,s;return Jl(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),(e=bu())?[4,e.navigator.storage.estimate()]:[3,2];case 1:return t=a.sent(),r=t.usage,n=t.quota,i=t.usageDetails,o=r?Math.round(r/1024):0,s=r&&n?Math.round(1e3*(r/n+Number.EPSILON))/1e3:0,[2,{totalStorageSize:o,percentOfQuota:s,usageDetails:JSON.stringify(i)}];case 2:return[3,4];case 3:return a.sent(),[3,4];case 4:return[2,{totalStorageSize:0,percentOfQuota:0,usageDetails:""}]}}))}))},BI=function(e){var t=Vl({},e),r=t.apiKey;return t.apiKey="****".concat(r.substring(r.length-4)),t},qI=function(){function e(e,t){this.localConfig=t,this.remoteConfigFetch=e}return e.prototype.generateJoinedConfig=function(e){var t,r,n;return Gl(this,void 0,void 0,(function(){var i,o,s,a,l,u,c,h,d,p,f,g,m,v,y,b,w,S,k,I;return Jl(this,(function(C){switch(C.label){case 0:(i=Vl({},this.localConfig)).optOut=this.localConfig.optOut,i.captureEnabled=!0,C.label=1;case 1:return C.trys.push([1,5,,6]),[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_sampling_config",e)];case 2:return s=C.sent(),[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_privacy_config",e)];case 3:return a=C.sent(),l=i,[4,this.remoteConfigFetch.getRemoteConfig("sessionReplay","sr_interaction_config",e)];case 4:return l.interactionConfig=C.sent(),(s||a)&&(o={},s&&(o.sr_sampling_config=s),a&&(o.sr_privacy_config=a)),[3,6];case 5:return u=C.sent(),c=u,this.localConfig.loggerProvider.warn(c.message),i.captureEnabled=!1,[3,6];case 6:if(!o)return[2,i];if(h=o.sr_sampling_config,d=o.sr_privacy_config,h&&Object.keys(h).length>0?(Object.prototype.hasOwnProperty.call(h,"capture_enabled")?i.captureEnabled=h.capture_enabled:i.captureEnabled=!1,Object.prototype.hasOwnProperty.call(h,"sample_rate")&&(i.sampleRate=h.sample_rate)):(i.captureEnabled=!0,this.localConfig.loggerProvider.debug("Remote config successfully fetched, but no values set for project, Session Replay capture enabled.")),d){p=null!==(t=i.privacyConfig)&&void 0!==t?t:{},f={defaultMaskLevel:null!==(n=null!==(r=d.defaultMaskLevel)&&void 0!==r?r:p.defaultMaskLevel)&&void 0!==n?n:"medium",blockSelector:[],maskSelector:[],unmaskSelector:[]},g=function(e){var t,r,n,i,o,s,a,l,u,c={};"string"==typeof e.blockSelector&&(e.blockSelector=[e.blockSelector]);try{for(var h=Kl(null!==(a=e.blockSelector)&&void 0!==a?a:[]),d=h.next();!d.done;d=h.next()){c[d.value]="block"}}catch(e){t={error:e}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}try{for(var p=Kl(null!==(l=e.maskSelector)&&void 0!==l?l:[]),f=p.next();!f.done;f=p.next()){c[f.value]="mask"}}catch(e){n={error:e}}finally{try{f&&!f.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}try{for(var g=Kl(null!==(u=e.unmaskSelector)&&void 0!==u?u:[]),m=g.next();!m.done;m=g.next()){c[m.value]="unmask"}}catch(e){o={error:e}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}return c},m=Vl(Vl({},g(p)),g(d));try{for(v=Kl(Object.entries(m)),y=v.next();!y.done;y=v.next())b=Zl(y.value,2),w=b[0],"mask"===(S=b[1])?f.maskSelector.push(w):"block"===S?f.blockSelector.push(w):"unmask"===S&&f.unmaskSelector.push(w)}catch(e){k={error:e}}finally{try{y&&!y.done&&(I=v.return)&&I.call(v)}finally{if(k)throw k.error}}i.privacyConfig=function(e,t){var r=document.createDocumentFragment(),n=function(e){if(void 0===e&&(e=[]),"string"==typeof e&&(e=[e]),e=e.filter((function(e){try{r.querySelector(e)}catch(r){return t.warn('[session-replay-browser] omitting selector "'.concat(e,'" because it is invalid')),!1}return!0})),0!==e.length)return e};return e.blockSelector=n(e.blockSelector),e.maskSelector=n(e.maskSelector),e.unmaskSelector=n(e.unmaskSelector),e}(f,this.localConfig.loggerProvider)}return this.localConfig.loggerProvider.debug(JSON.stringify({name:"session replay joined config",config:BI(i)},null,2)),[2,i]}}))}))},e}(),zI=function(e,t){return Gl(void 0,void 0,void 0,(function(){var r,n;return Jl(this,(function(i){switch(i.label){case 0:return r=new yu(e,t),[4,Vb({localConfig:r,configKeys:["sessionReplay"]})];case 1:return n=i.sent(),[2,new qI(n,r)]}}))}))},WI="Failed to store session replay events in IndexedDB",$I="1.19.0",VI=function(){function e(e){var t=e.trackServerUrl,r=e.loggerProvider,n=e.payloadBatcher;this.storageKey="",this.retryTimeout=1e3,this.scheduled=null,this.queue=[],this.loggerProvider=r,this.payloadBatcher=n||function(e){return e},this.trackServerUrl=t}return e.prototype.sendEventsList=function(e){this.addToQueue(Vl(Vl({},e),{attempts:0,timeout:0}))},e.prototype.addToQueue=function(){for(var e=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t.filter((function(t){return t.attempts<(t.flushMaxRetries||0)?(t.attempts+=1,!0):(e.completeRequest({context:t,err:"Session replay event batch rejected due to exceeded retry count"}),!1)}));n.forEach((function(t){e.queue=e.queue.concat(t),0!==t.timeout?setTimeout((function(){t.timeout=0,e.schedule(0)}),t.timeout):e.schedule(0)}))},e.prototype.schedule=function(e){var t=this;this.scheduled||(this.scheduled=setTimeout((function(){t.flush(!0).then((function(){t.queue.length>0&&t.schedule(e)}))}),e))},e.prototype.flush=function(e){return void 0===e&&(e=!1),Gl(this,void 0,void 0,(function(){var t,r,n=this;return Jl(this,(function(i){switch(i.label){case 0:return t=[],r=[],this.queue.forEach((function(e){return 0===e.timeout?t.push(e):r.push(e)})),this.queue=r,this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),[4,Promise.all(t.map((function(t){return n.send(t,e)})))];case 1:return i.sent(),[2]}}))}))},e.prototype.send=function(e,t){var r,n;return void 0===t&&(t=!0),Gl(this,void 0,void 0,(function(){var i,o,s,a,l,u,c,h,d,p,f,g,m;return Jl(this,(function(v){switch(v.label){case 0:if(!(i=e.apiKey))return[2,this.completeRequest({context:e,err:"Session replay event batch not sent due to missing api key"})];if(!(o=e.deviceId))return[2,this.completeRequest({context:e,err:"Session replay event batch not sent due to missing device ID"})];if(y=bu(),s=(null==y?void 0:y.location)?y.location.href:"",a=$I,l=e.sampleRate,u=new URLSearchParams({device_id:o,session_id:"".concat(e.sessionId),type:"".concat(e.type)}),c="".concat((null===(r=e.version)||void 0===r?void 0:r.type)||"standalone","/").concat((null===(n=e.version)||void 0===n?void 0:n.version)||a),0===(h=this.payloadBatcher({version:1,events:e.events})).events.length)return this.completeRequest({context:e}),[2];v.label=1;case 1:return v.trys.push([1,3,,4]),d={headers:{"Content-Type":"application/json",Accept:"*/*",Authorization:"Bearer ".concat(i),"X-Client-Version":a,"X-Client-Library":c,"X-Client-Url":s,"X-Client-Sample-Rate":"".concat(l)},body:JSON.stringify(h),method:"POST"},p="".concat(UI(e.serverZone,this.trackServerUrl),"?").concat(u.toString()),[4,fetch(p,d)];case 2:if(null===(f=v.sent()))return this.completeRequest({context:e,err:"Unexpected error occurred"}),[2];if(t)this.handleReponse(f.status,e);else{g="";try{g=JSON.stringify(f.body,null,2)}catch(e){}this.completeRequest({context:e,success:"".concat(f.status,": ").concat(g)})}return[3,4];case 3:return m=v.sent(),this.completeRequest({context:e,err:m}),[3,4];case 4:return[2]}var y}))}))},e.prototype.handleReponse=function(e,t){switch((new $o).buildStatus(e)){case zo.Success:this.handleSuccessResponse(t);break;case zo.Failed:this.handleOtherResponse(t);break;default:this.completeRequest({context:t,err:"Network error occurred, event batch rejected"})}},e.prototype.handleSuccessResponse=function(e){var t=Math.round(new Blob(e.events).size/1024);this.completeRequest({context:e,success:"Session replay event batch tracked successfully for session id ".concat(e.sessionId,", size of events: ").concat(t," KB")})},e.prototype.handleOtherResponse=function(e){this.addToQueue(Vl(Vl({},e),{timeout:e.attempts*this.retryTimeout}))},e.prototype.completeRequest=function(e){var t=e.context,r=e.err,n=e.success;t.onComplete(),r?this.loggerProvider.warn(r):n&&this.loggerProvider.log(n)},e}();const GI=(e,t)=>t.some((t=>e instanceof t));let JI,KI;const ZI=new WeakMap,YI=new WeakMap,HI=new WeakMap;let XI={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return ZI.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return rC(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function QI(e){XI=e(XI)}function eC(e){return(KI||(KI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(nC(this),t),rC(this.request)}:function(...t){return rC(e.apply(nC(this),t))}}function tC(e){return"function"==typeof e?eC(e):(e instanceof IDBTransaction&&function(e){if(ZI.has(e))return;const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),n()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));ZI.set(e,t)}(e),GI(e,JI||(JI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,XI):e)}function rC(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(rC(e.result)),n()},o=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",o)}));return HI.set(t,e),t}(e);if(YI.has(e))return YI.get(e);const t=tC(e);return t!==e&&(YI.set(e,t),HI.set(t,e)),t}const nC=e=>HI.get(e);function iC(e,t,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=rC(s);return n&&s.addEventListener("upgradeneeded",(e=>{n(rC(s.result),e.oldVersion,e.newVersion,rC(s.transaction),e)})),r&&s.addEventListener("blocked",(e=>r(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const oC=["get","getKey","getAll","getAllKeys","count"],sC=["put","add","delete","clear"],aC=new Map;function lC(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(aC.get(t))return aC.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=sC.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!i&&!oC.includes(r))return;const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let s=o.store;return n&&(s=s.index(t.shift())),(await Promise.all([s[r](...t),i&&o.done]))[0]};return aC.set(t,o),o}QI((e=>({...e,get:(t,r,n)=>lC(t,r)||e.get(t,r,n),has:(t,r)=>!!lC(t,r)||e.has(t,r)})));const uC=["continue","continuePrimaryKey","advance"],cC={},hC=new WeakMap,dC=new WeakMap,pC={get(e,t){if(!uC.includes(t))return e[t];let r=cC[t];return r||(r=cC[t]=function(...e){hC.set(this,dC.get(this)[t](...e))}),r}};async function*fC(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;const r=new Proxy(t,pC);for(dC.set(r,t),HI.set(r,nC(t));t;)yield r,t=await(hC.get(r)||t.continue()),hC.delete(r)}function gC(e,t){return t===Symbol.asyncIterator&&GI(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&GI(e,[IDBIndex,IDBObjectStore])}QI((e=>({...e,get:(t,r,n)=>gC(t,r)?fC:e.get(t,r,n),has:(t,r)=>gC(t,r)||e.has(t,r)})));var mC,vC=function(){function e(e){var t,r,n,i=this;this.minInterval=500,this.maxInterval=1e4,this.maxPersistedEventsSize=1e6,this.interval=this.minInterval,this._timeAtLastSplit=Date.now(),this.shouldSplitEventsList=function(e,t){var r=new Blob([t]).size;return new Blob(e).size+r>=i.maxPersistedEventsSize||!!(Date.now()-i.timeAtLastSplit>i.interval&&e.length)&&(i.interval=Math.min(i.maxInterval,i.interval+i.minInterval),i._timeAtLastSplit=Date.now(),!0)},this.loggerProvider=e.loggerProvider,this.minInterval=null!==(t=e.minInterval)&&void 0!==t?t:this.minInterval,this.maxInterval=null!==(r=e.maxInterval)&&void 0!==r?r:this.maxInterval,this.maxPersistedEventsSize=null!==(n=e.maxPersistedEventsSize)&&void 0!==n?n:this.maxPersistedEventsSize}return Object.defineProperty(e.prototype,"timeAtLastSplit",{get:function(){return this._timeAtLastSplit},enumerable:!1,configurable:!0}),e}();!function(e){e.RECORDING="recording",e.SENT="sent"}(mC||(mC={}));var yC,bC,wC,SC="sessionCurrentSequence",kC="sequencesToSend",IC=function(){var e=bu();return new Promise((function(t,r){if(!e)return r(new Error("Global scope not found"));if(!e.indexedDB)return r(new Error("Session Replay: cannot find indexedDB"));try{var n=e.indexedDB.open("keyval-store");n.onupgradeneeded=function(){1===n.result.version&&(n.result.close(),n.transaction&&n.transaction.abort(),e.indexedDB.deleteDatabase("keyval-store"),t())},n.onsuccess=function(){t(n.result)}}catch(e){r(e)}}))},CC=function(e){return Gl(void 0,void 0,void 0,(function(){var t;return Jl(this,(function(r){switch(r.label){case 0:return e.length>0?(t=e.splice(0,10),[4,Promise.all(t)]):[3,2];case 1:return r.sent(),[3,0];case 2:return[2]}}))}))},_C=function(e){var t,r;return e.objectStoreNames.contains(SC)||(r=e.createObjectStore(SC,{keyPath:"sessionId"})),e.objectStoreNames.contains(kC)||(t=e.createObjectStore(kC,{keyPath:"sequenceId",autoIncrement:!0})).createIndex("sessionId","sessionId"),{sequencesStore:t,currentSequenceStore:r}},xC=function(e){return Gl(void 0,void 0,void 0,(function(){return Jl(this,(function(t){switch(t.label){case 0:return[4,iC(e,1,{upgrade:_C})];case 1:return[2,t.sent()]}}))}))},OC=function(e){function t(t){var r=e.call(this,t)||this;return r.getSequencesToSend=function(){return Gl(r,void 0,void 0,(function(){var e,t,r,n,i,o;return Jl(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),e=[],[4,this.db.transaction("sequencesToSend").store.openCursor()];case 1:t=s.sent(),s.label=2;case 2:return t?(r=t.value,n=r.sessionId,i=r.events,e.push({events:i,sequenceId:t.key,sessionId:n}),[4,t.continue()]):[3,4];case 3:return t=s.sent(),[3,2];case 4:return[2,e];case 5:return o=s.sent(),this.loggerProvider.warn("".concat(WI,": ").concat(o)),[3,6];case 6:return[2,void 0]}}))}))},r.storeCurrentSequence=function(e){return Gl(r,void 0,void 0,(function(){var t,r,n;return Jl(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,this.db.get(SC,e)];case 1:return(t=i.sent())?[4,this.db.put(kC,{sessionId:e,events:t.events})]:[2,void 0];case 2:return r=i.sent(),[4,this.db.put(SC,{sessionId:e,events:[]})];case 3:return i.sent(),[2,Vl(Vl({},t),{sessionId:e,sequenceId:r})];case 4:return n=i.sent(),this.loggerProvider.warn("".concat(WI,": ").concat(n)),[3,5];case 5:return[2,void 0]}}))}))},r.addEventToCurrentSequence=function(e,t){return Gl(r,void 0,void 0,(function(){var r,n,i,o,s,a;return Jl(this,(function(l){switch(l.label){case 0:return l.trys.push([0,10,,11]),[4,(r=this.db.transaction(SC,"readwrite")).store.get(e)];case 1:return(n=l.sent())?[3,3]:[4,r.store.put({sessionId:e,events:[t]})];case 2:return l.sent(),[2];case 3:return i=void 0,this.shouldSplitEventsList(n.events,t)?(i=n.events,[4,r.store.put({sessionId:e,events:[t]})]):[3,5];case 4:return l.sent(),[3,7];case 5:return o=n.events.concat(t),[4,r.store.put({sessionId:e,events:o})];case 6:l.sent(),l.label=7;case 7:return[4,r.done];case 8:return l.sent(),i?[4,this.storeSendingEvents(e,i)]:[2,void 0];case 9:return(s=l.sent())?[2,{events:i,sessionId:e,sequenceId:s}]:[2,void 0];case 10:return a=l.sent(),this.loggerProvider.warn("".concat(WI,": ").concat(a)),[3,11];case 11:return[2,void 0]}}))}))},r.storeSendingEvents=function(e,t){return Gl(r,void 0,void 0,(function(){var r;return Jl(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.db.put(kC,{sessionId:e,events:t})];case 1:return[2,n.sent()];case 2:return r=n.sent(),this.loggerProvider.warn("".concat(WI,": ").concat(r)),[3,3];case 3:return[2,void 0]}}))}))},r.cleanUpSessionEventsStore=function(e,t){return Gl(r,void 0,void 0,(function(){var e;return Jl(this,(function(r){switch(r.label){case 0:if(!t)return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.db.delete(kC,t)];case 2:return r.sent(),[3,4];case 3:return e=r.sent(),this.loggerProvider.warn("".concat(WI,": ").concat(e)),[3,4];case 4:return[2]}}))}))},r.transitionFromKeyValStore=function(e){return Gl(r,void 0,void 0,(function(){var t,r,n,i,o,s,a,l,u=this;return Jl(this,(function(c){switch(c.label){case 0:return c.trys.push([0,6,,7]),[4,IC()];case 1:if(!(t=c.sent()))return[2];r=function(e,t){return Gl(u,void 0,void 0,(function(){var r,n,i=this;return Jl(this,(function(o){switch(o.label){case 0:return r=t.sessionSequences,n=[],Object.keys(r).forEach((function(o){var s=parseInt(o,10),a=r[s];if(s===t.currentSequenceId){var l=a.events.map((function(t){return Gl(i,void 0,void 0,(function(){return Jl(this,(function(r){return[2,this.addEventToCurrentSequence(e,t)]}))}))}));n.concat(l)}else a.status!==mC.SENT&&n.push(i.storeSendingEvents(e,a.events))})),[4,CC(n)];case 1:return o.sent(),[2]}}))}))},n="".concat(ou,"_").concat(this.apiKey.substring(0,10)),c.label=2;case 2:return c.trys.push([2,4,,5]),i=t.transaction("keyval").objectStore("keyval").getAll(n),o=new Promise((function(t){i.onsuccess=function(n){return Gl(u,void 0,void 0,(function(){var i,o,s,a=this;return Jl(this,(function(l){switch(l.label){case 0:return i=n&&n.target.result,(o=i&&i[0])?(s=[],Object.keys(o).forEach((function(t){var n=parseInt(t,10),i=o[n];if(e===n)s.push(r(n,i));else{var l=i.sessionSequences;Object.keys(l).forEach((function(e){var t=parseInt(e,10);l[t].status!==mC.SENT&&s.push(a.storeSendingEvents(n,l[t].events))}))}})),[4,CC(s)]):[3,2];case 1:l.sent(),l.label=2;case 2:return t(),[2]}}))}))}})),[4,o];case 3:return c.sent(),(s=bu())&&s.indexedDB.deleteDatabase("keyval-store"),[3,5];case 4:return a=c.sent(),this.loggerProvider.warn("Failed to transition session replay events from keyval to new store: ".concat(a)),[3,5];case 5:return[3,7];case 6:return l=c.sent(),this.loggerProvider.warn("Failed to access keyval store: ".concat(l,". For more information, visit: https://www.docs.developers.amplitude.com/session-replay/sdks/standalone/#indexeddb-best-practices")),[3,7];case 7:return[2]}}))}))},r.apiKey=t.apiKey,r.db=t.db,r}return $l(t,e),t.new=function(e,r,n){return Gl(this,void 0,void 0,(function(){var i,o,s,a,l;return Jl(this,(function(u){switch(u.label){case 0:return u.trys.push([0,3,,4]),i="replay"===e?"":"_".concat(e),o="".concat(r.apiKey.substring(0,10),"_amp_session_replay_events").concat(i),[4,xC(o)];case 1:return s=u.sent(),[4,(a=new t(Vl(Vl({},r),{db:s}))).transitionFromKeyValStore(n)];case 2:return u.sent(),[2,a];case 3:return l=u.sent(),r.loggerProvider.warn("".concat(WI,": ").concat(l)),[3,4];case 4:return[2]}}))}))},t.prototype.getCurrentSequenceEvents=function(e){return Gl(this,void 0,void 0,(function(){var t,r,n,i,o,s,a;return Jl(this,(function(l){switch(l.label){case 0:return e?[4,this.db.get("sessionCurrentSequence",e)]:[3,2];case 1:return(i=l.sent())?[2,[i]]:[2,void 0];case 2:t=[],l.label=3;case 3:return l.trys.push([3,8,9,10]),[4,this.db.getAll("sessionCurrentSequence")];case 4:r=Kl.apply(void 0,[l.sent()]),n=r.next(),l.label=5;case 5:if(n.done)return[3,7];i=n.value,t.push(i),l.label=6;case 6:return n=r.next(),[3,5];case 7:return[3,10];case 8:return o=l.sent(),s={error:o},[3,10];case 9:try{n&&!n.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}return[7];case 10:return[2,t]}}))}))},t}(vC),EC=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.finalizedSequences={},t.sequences={},t.sequenceId=0,t}return $l(t,e),t.prototype.resetCurrentSequence=function(e){this.sequences[e]=[]},t.prototype.addSequence=function(e){var t=this.sequenceId++,r=Yl([],Zl(this.sequences[e]),!1);return this.finalizedSequences[t]={sessionId:e,events:r},this.resetCurrentSequence(e),{sequenceId:t,events:r,sessionId:e}},t.prototype.getSequencesToSend=function(){return Gl(this,void 0,void 0,(function(){return Jl(this,(function(e){return[2,Object.entries(this.finalizedSequences).map((function(e){var t=Zl(e,2),r=t[0],n=t[1],i=n.sessionId,o=n.events;return{sequenceId:Number(r),sessionId:i,events:o}}))]}))}))},t.prototype.storeCurrentSequence=function(e){return Gl(this,void 0,void 0,(function(){return Jl(this,(function(t){return this.sequences[e]?[2,this.addSequence(e)]:[2,void 0]}))}))},t.prototype.addEventToCurrentSequence=function(e,t){return Gl(this,void 0,void 0,(function(){var r;return Jl(this,(function(n){return this.sequences[e]||this.resetCurrentSequence(e),this.shouldSplitEventsList(this.sequences[e],t)&&(r=this.addSequence(e)),this.sequences[e].push(t),[2,r]}))}))},t.prototype.storeSendingEvents=function(e,t){return Gl(this,void 0,void 0,(function(){return Jl(this,(function(r){return this.finalizedSequences[this.sequenceId]={sessionId:e,events:t},[2,this.sequenceId++]}))}))},t.prototype.cleanUpSessionEventsStore=function(e,t){return Gl(this,void 0,void 0,(function(){return Jl(this,(function(e){return void 0!==t&&delete this.finalizedSequences[t],[2]}))}))},t}(vC),AC=function(e){var t=e.config,r=e.sessionId,n=e.minInterval,i=e.maxInterval,o=e.type,s=e.payloadBatcher,a=e.storeType;return Gl(void 0,void 0,void 0,(function(){function e(e){return void 0===e&&(e=!1),Gl(this,void 0,void 0,(function(){return Jl(this,(function(t){return[2,l.flush(e)]}))}))}var l,u,c,h,d,p,f,g,m;return Jl(this,(function(v){switch(v.label){case 0:return l=new VI(Vl(Vl({},t),{loggerProvider:t.loggerProvider,payloadBatcher:s})),u=function(){return new EC({loggerProvider:t.loggerProvider,maxInterval:i,minInterval:n})},c=function(){return Gl(void 0,void 0,void 0,(function(){var e;return Jl(this,(function(s){switch(s.label){case 0:return[4,OC.new(o,{loggerProvider:t.loggerProvider,minInterval:n,maxInterval:i,apiKey:t.apiKey},r)];case 1:return e=s.sent(),t.loggerProvider.log("Failed to initialize idb store, falling back to memory store."),[2,null!=e?e:u()]}}))}))},"idb"!==a?[3,2]:[4,c()];case 1:return d=v.sent(),[3,3];case 2:d=u(),v.label=3;case 3:return h=d,p=function(e){var r=e.events,n=e.sessionId,i=e.deviceId,s=e.sequenceId;t.debugMode&&FI().then((function(e){var r=e.totalStorageSize,n=e.percentOfQuota,i=e.usageDetails;t.loggerProvider.debug("Total storage size: ".concat(r," KB, percentage of quota: ").concat(n,"%, usage details: ").concat(i))})).catch((function(){})),l.sendEventsList({events:r,sessionId:n,flushMaxRetries:t.flushMaxRetries,apiKey:t.apiKey,deviceId:i,sampleRate:t.sampleRate,serverZone:t.serverZone,version:t.version,type:o,onComplete:function(){return Gl(void 0,void 0,void 0,(function(){return Jl(this,(function(e){switch(e.label){case 0:return[4,h.cleanUpSessionEventsStore(n,s)];case 1:return e.sent(),[2]}}))}))}})},f=function(e){var r=e.sessionId,n=e.deviceId;h.storeCurrentSequence(r).then((function(e){e&&p({sequenceId:e.sequenceId,events:e.events,sessionId:e.sessionId,deviceId:n})})).catch((function(e){t.loggerProvider.warn("Failed to get current sequence of session replay events for session:",e)}))},g=function(e){var t=e.deviceId;return Gl(void 0,void 0,void 0,(function(){var e;return Jl(this,(function(r){switch(r.label){case 0:return[4,h.getSequencesToSend()];case 1:return(e=r.sent())&&e.forEach((function(e){p({sequenceId:e.sequenceId,events:e.events,sessionId:e.sessionId,deviceId:t})})),[2]}}))}))},m=function(e){var r=e.event,n=e.sessionId,i=e.deviceId;h.addEventToCurrentSequence(n,r.data).then((function(e){return e&&p({sequenceId:e.sequenceId,events:e.events,sessionId:e.sessionId,deviceId:i})})).catch((function(e){t.loggerProvider.warn("Failed to add event to session replay capture:",e)}))},[2,{sendCurrentSequenceEvents:f,addEvent:m,sendStoredEvents:g,flush:e}]}}))}))},RC=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=new Map;e.forEach((function(e){r.set(e.name,e.manager)})),this.managers=r}return e.prototype.sendStoredEvents=function(e){return Gl(this,void 0,void 0,(function(){var t;return Jl(this,(function(r){switch(r.label){case 0:return t=[],this.managers.forEach((function(r){t.push(r.sendStoredEvents(e))})),[4,Promise.all(t)];case 1:return r.sent(),[2]}}))}))},e.prototype.addEvent=function(e){var t,r=e.sessionId,n=e.event,i=e.deviceId;null===(t=this.managers.get(n.type))||void 0===t||t.addEvent({sessionId:r,event:n,deviceId:i})},e.prototype.sendCurrentSequenceEvents=function(e){var t=e.sessionId,r=e.deviceId;this.managers.forEach((function(e){e.sendCurrentSequenceEvents({sessionId:t,deviceId:r})}))},e.prototype.flush=function(e){return Gl(this,void 0,void 0,(function(){var t;return Jl(this,(function(r){switch(r.label){case 0:return t=[],this.managers.forEach((function(r){t.push(r.flush(e))})),[4,Promise.all(t)];case 1:return r.sent(),[2]}}))}))},e}(),TC=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(TC||{});function MC(e,t){if(wC=new Date,e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return"html";var r={root:document.body,idName:function(e){return!0},className:function(e){return!0},tagName:function(e){return!0},attr:function(e,t){return!1},seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4,timeoutMs:void 0};yC=Vl(Vl({},r),t),bC=function(e,t){if(e.nodeType===Node.DOCUMENT_NODE)return e;if(e===t.root)return e.ownerDocument;return e}(yC.root,r);var n=PC(e,"all",(function(){return PC(e,"two",(function(){return PC(e,"one",(function(){return PC(e,"none")}))}))}));if(n){var i=WC($C(n,e));return i.length>0&&(n=i[0]),LC(n)}throw new Error("Selector was not found.")}function PC(e,t,r){for(var n=null,i=[],o=e,s=0,a=function(){var e,a,l=(new Date).getTime()-wC.getTime();if(void 0!==yC.timeoutMs&&l>yC.timeoutMs)throw new Error("Timeout: Can't find a unique selector after ".concat(l,"ms"));var u=BC(function(e){var t=e.getAttribute("id");if(t&&yC.idName(t))return{name:"#"+CSS.escape(t),penalty:0};return null}(o))||BC.apply(void 0,Yl([],Zl(function(e){var t=Array.from(e.attributes).filter((function(e){return yC.attr(e.name,e.value)}));return t.map((function(e){return{name:"[".concat(CSS.escape(e.name),'="').concat(CSS.escape(e.value),'"]'),penalty:.5}}))}(o)),!1))||BC.apply(void 0,Yl([],Zl(function(e){var t=Array.from(e.classList).filter(yC.className);return t.map((function(e){return{name:"."+CSS.escape(e),penalty:1}}))}(o)),!1))||BC(function(e){var t=e.tagName.toLowerCase();if(yC.tagName(t))return{name:t,penalty:2};return null}(o))||[{name:"*",penalty:3}],c=function(e){var t=e.parentNode;if(!t)return null;var r=t.firstChild;if(!r)return null;var n=0;for(;r&&(r.nodeType===Node.ELEMENT_NODE&&n++,r!==e);)r=r.nextSibling;return n}(o);if("all"==t)c&&(u=u.concat(u.filter(FC).map((function(e){return UC(e,c)}))));else if("two"==t)u=u.slice(0,1),c&&(u=u.concat(u.filter(FC).map((function(e){return UC(e,c)}))));else if("one"==t){var h=Zl(u=u.slice(0,1),1)[0];c&&FC(h)&&(u=[UC(h,c)])}else"none"==t&&(u=[{name:"*",penalty:3}],c&&(u=[UC(u[0],c)]));try{for(var d=(e=void 0,Kl(u)),p=d.next();!p.done;p=d.next()){(h=p.value).level=s}}catch(t){e={error:t}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(e)throw e.error}}if(i.push(u),i.length>=yC.seedMinLength&&(n=NC(i,r)))return"break";o=o.parentElement,s++};o;){if("break"===a())break}return n||(n=NC(i,r)),!n&&r?r():n}function NC(e,t){var r,n,i=WC(zC(e));if(i.length>yC.threshold)return t?t():null;try{for(var o=Kl(i),s=o.next();!s.done;s=o.next()){var a=s.value;if(jC(a))return a}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return null}function LC(e){for(var t=e[0],r=t.name,n=1;n<e.length;n++){var i=e[n].level||0;r=t.level===i-1?"".concat(e[n].name," > ").concat(r):"".concat(e[n].name," ").concat(r),t=e[n]}return r}function DC(e){return e.map((function(e){return e.penalty})).reduce((function(e,t){return e+t}),0)}function jC(e){var t=LC(e);switch(bC.querySelectorAll(t).length){case 0:throw new Error("Can't select any node with this selector: ".concat(t));case 1:return!0;default:return!1}}function UC(e,t){return{name:e.name+":nth-child(".concat(t,")"),penalty:e.penalty+1}}function FC(e){return"html"!==e.name&&!e.name.startsWith("#")}function BC(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.filter(qC);return r.length>0?r:null}function qC(e){return null!=e}function zC(e,t){var r,n,i,o,s,a;return void 0===t&&(t=[]),Jl(this,(function(l){switch(l.label){case 0:if(!(e.length>0))return[3,9];l.label=1;case 1:l.trys.push([1,6,7,8]),r=Kl(e[0]),n=r.next(),l.label=2;case 2:return n.done?[3,5]:(i=n.value,[5,Kl(zC(e.slice(1,e.length),t.concat(i)))]);case 3:l.sent(),l.label=4;case 4:return n=r.next(),[3,2];case 5:return[3,8];case 6:return o=l.sent(),s={error:o},[3,8];case 7:try{n&&!n.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}return[7];case 8:return[3,11];case 9:return[4,t];case 10:l.sent(),l.label=11;case 11:return[2]}}))}function WC(e){return Yl([],Zl(e),!1).sort((function(e,t){return DC(e)-DC(t)}))}function $C(e,t,r){var n,i,o;return void 0===r&&(r={counter:0,visited:new Map}),Jl(this,(function(s){switch(s.label){case 0:if(!(e.length>2&&e.length>yC.optimizedMinLength))return[3,5];n=1,s.label=1;case 1:return n<e.length-1?r.counter>yC.maxNumberOfTries?[2]:(r.counter+=1,(i=Yl([],Zl(e),!1)).splice(n,1),o=LC(i),r.visited.has(o)?[2]:jC(i)&&function(e,t){return bC.querySelector(LC(e))===t}(i,t)?[4,i]:[3,4]):[3,5];case 2:return s.sent(),r.visited.set(o,!0),[5,Kl($C(i,t,r))];case 3:s.sent(),s.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}var VC=function(e){var t=e.version,r=e.events,n=[];return r.forEach((function(e){var t=JSON.parse(e);t.count=1,"click"===t.type&&n.push(t)})),{version:t,events:n}},GC=function(e){var t=e.version,r=e.events,n=[];r.forEach((function(e){var t=JSON.parse(e);"click"===t.type&&n.push(t)}));var i=n.reduce((function(e,t){var r=t.x,n=t.y,i=t.selector,o=t.timestamp,s=o-o%36e5,a="".concat(r,":").concat(n,":").concat(null!=i?i:"",":").concat(s);return e[a]?e[a].count+=1:e[a]=Vl(Vl({},t),{timestamp:s,count:1}),e}),{});return{version:t,events:Object.values(i)}},JC=function(e,t){var r=t.eventsManager,n=t.sessionId,i=t.deviceIdFn;return function(t){if(t.type===TC.Click){var o=bu();if(o){var s=o.location,a=o.innerHeight,l=o.innerWidth;if(s){var u=t.x,c=t.y;if(void 0!==u&&void 0!==c){var h,d=Lb.mirror.getNode(t.id);if(d)try{h=MC(d)}catch(t){e.debug("error resolving selector from finder")}var p=Py.getWindowScroll(o),f={x:u+p.left,y:c+p.top,selector:h,viewportHeight:a,viewportWidth:l,pageUrl:s.href,timestamp:Date.now(),type:"click"},g=i();g&&r.addEvent({sessionId:n,event:{type:"interaction",data:JSON.stringify(f)},deviceId:g})}}}}}},KC=function(){function e(e,t){var r=bu();r&&r.navigator&&"function"==typeof r.navigator.sendBeacon?this.sendBeacon=function(e,t){try{if(r.navigator.sendBeacon(e,JSON.stringify(t)))return!0}catch(e){}return!1}:this.sendBeacon=function(){return!1},this.sendXhr=function(e,t){var r=new XMLHttpRequest;return r.open("POST",e,!0),r.setRequestHeader("Accept","*/*"),r.send(JSON.stringify(t)),!0},this.basePageUrl=UI(t.serverZone,t.trackServerUrl),this.apiKey=t.apiKey,this.context=e}return e.prototype.send=function(e,t){var r=this.context,n=r.sessionId,i=r.type,o=new URLSearchParams({device_id:e,session_id:String(n),type:String(i),api_key:this.apiKey}),s="".concat(this.basePageUrl,"?").concat(o.toString());this.sendBeacon(s,t)||this.sendXhr(s,t)},e}(),ZC=Py.getWindowHeight,YC=Py.getWindowWidth,HC=function(){function e(e){var t=this;this.timestamp=Date.now(),this.hook=function(e){t.update(e)},this.send=function(e){return function(r){var n=e(),i=bu();i&&n&&t.transport.send(n,{version:1,events:[{maxScrollX:t._maxScrollX,maxScrollY:t._maxScrollY,maxScrollWidth:t._maxScrollWidth,maxScrollHeight:t._maxScrollHeight,viewportHeight:ZC(),viewportWidth:YC(),pageUrl:i.location.href,timestamp:t.timestamp,type:"scroll"}]})}},this._maxScrollX=0,this._maxScrollY=0,this._maxScrollWidth=YC(),this._maxScrollHeight=ZC(),this.transport=e}return e.default=function(t,r){return new e(new KC(t,r))},Object.defineProperty(e.prototype,"maxScrollX",{get:function(){return this._maxScrollX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollY",{get:function(){return this._maxScrollY},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollWidth",{get:function(){return this._maxScrollWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxScrollHeight",{get:function(){return this._maxScrollHeight},enumerable:!1,configurable:!0}),e.prototype.update=function(e){var t=Date.now();if(e.x>this._maxScrollX){var r=YC();this._maxScrollX=e.x;var n=e.x+r;n>this._maxScrollWidth&&(this._maxScrollWidth=n),this.timestamp=t}if(e.y>this._maxScrollY){var i=ZC();this._maxScrollY=e.y;var o=e.y+i;o>this._maxScrollHeight&&(this._maxScrollHeight=o),this.timestamp=t}},e}(),XC=function(e){var t=e.sessionId,r=e.deviceId;this.deviceId=r,this.sessionId=t,t&&r&&(this.sessionReplayId=function(e,t){return"".concat(t,"/").concat(e)}(t,r))},QC=Uint8Array,e_=Uint16Array,t_=Uint32Array,r_=new QC([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),n_=new QC([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),i_=new QC([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o_=function(e,t){for(var r=new e_(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];var i=new t_(r[30]);for(n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)i[o]=o-r[n]<<5|n;return[r,i]},s_=o_(r_,2),a_=s_[0],l_=s_[1];a_[28]=258,l_[258]=28;for(var u_=o_(n_,0),c_=(u_[0],u_[1]),h_=new e_(32768),d_=0;d_<32768;++d_){var p_=(43690&d_)>>>1|(21845&d_)<<1;p_=(61680&(p_=(52428&p_)>>>2|(13107&p_)<<2))>>>4|(3855&p_)<<4,h_[d_]=((65280&p_)>>>8|(255&p_)<<8)>>>1}var f_=function(e,t,r){for(var n=e.length,i=0,o=new e_(t);i<n;++i)++o[e[i]-1];var s,a=new e_(t);for(i=0;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;if(r){s=new e_(1<<t);var l=15-t;for(i=0;i<n;++i)if(e[i])for(var u=i<<4|e[i],c=t-e[i],h=a[e[i]-1]++<<c,d=h|(1<<c)-1;h<=d;++h)s[h_[h]>>>l]=u}else for(s=new e_(n),i=0;i<n;++i)s[i]=h_[a[e[i]-1]++]>>>15-e[i];return s},g_=new QC(288);for(d_=0;d_<144;++d_)g_[d_]=8;for(d_=144;d_<256;++d_)g_[d_]=9;for(d_=256;d_<280;++d_)g_[d_]=7;for(d_=280;d_<288;++d_)g_[d_]=8;var m_=new QC(32);for(d_=0;d_<32;++d_)m_[d_]=5;var v_=f_(g_,9,0),y_=f_(m_,5,0),b_=function(e){return(e/8|0)+(7&e&&1)},w_=function(e,t,r){(null==r||r>e.length)&&(r=e.length);var n=new(e instanceof e_?e_:e instanceof t_?t_:QC)(r-t);return n.set(e.subarray(t,r)),n},S_=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8},k_=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>>8,e[n+2]|=r>>>16},I_=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,o=r.slice();if(!i)return[new QC(0),0];if(1==i){var s=new QC(r[0].s+1);return s[r[0].s]=1,[s,1]}r.sort((function(e,t){return e.f-t.f})),r.push({s:-1,f:25001});var a=r[0],l=r[1],u=0,c=1,h=2;for(r[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=r[r[u].f<r[h].f?u++:h++],l=r[u!=c&&r[u].f<r[h].f?u++:h++],r[c++]={s:-1,f:a.f+l.f,l:a,r:l};var d=o[0].s;for(n=1;n<i;++n)o[n].s>d&&(d=o[n].s);var p=new e_(d+1),f=C_(r[c-1],p,0);if(f>t){n=0;var g=0,m=f-t,v=1<<m;for(o.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));n<i;++n){var y=o[n].s;if(!(p[y]>t))break;g+=v-(1<<f-p[y]),p[y]=t}for(g>>>=m;g>0;){var b=o[n].s;p[b]<t?g-=1<<t-p[b]++-1:++n}for(;n>=0&&g;--n){var w=o[n].s;p[w]==t&&(--p[w],++g)}f=t}return[new QC(p),f]},C_=function(e,t,r){return-1==e.s?Math.max(C_(e.l,t,r+1),C_(e.r,t,r+1)):t[e.s]=r},__=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new e_(++t),n=0,i=e[0],o=1,s=function(e){r[n++]=e},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[a]}return[r.subarray(0,n),t]},x_=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},O_=function(e,t,r){var n=r.length,i=b_(t+2);e[i]=255&n,e[i+1]=n>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<n;++o)e[i+o+4]=r[o];return 8*(i+4+n)},E_=function(e,t,r,n,i,o,s,a,l,u,c){S_(t,c++,r),++i[256];for(var h=I_(i,15),d=h[0],p=h[1],f=I_(o,15),g=f[0],m=f[1],v=__(d),y=v[0],b=v[1],w=__(g),S=w[0],k=w[1],I=new e_(19),C=0;C<y.length;++C)I[31&y[C]]++;for(C=0;C<S.length;++C)I[31&S[C]]++;for(var _=I_(I,7),x=_[0],O=_[1],E=19;E>4&&!x[i_[E-1]];--E);var A,R,T,M,P=u+5<<3,N=x_(i,g_)+x_(o,m_)+s,L=x_(i,d)+x_(o,g)+s+14+3*E+x_(I,x)+(2*I[16]+3*I[17]+7*I[18]);if(P<=N&&P<=L)return O_(t,c,e.subarray(l,l+u));if(S_(t,c,1+(L<N)),c+=2,L<N){A=f_(d,p,0),R=d,T=f_(g,m,0),M=g;var D=f_(x,O,0);S_(t,c,b-257),S_(t,c+5,k-1),S_(t,c+10,E-4),c+=14;for(C=0;C<E;++C)S_(t,c+3*C,x[i_[C]]);c+=3*E;for(var j=[y,S],U=0;U<2;++U){var F=j[U];for(C=0;C<F.length;++C){var B=31&F[C];S_(t,c,D[B]),c+=x[B],B>15&&(S_(t,c,F[C]>>>5&127),c+=F[C]>>>12)}}}else A=v_,R=g_,T=y_,M=m_;for(C=0;C<a;++C)if(n[C]>255){B=n[C]>>>18&31;k_(t,c,A[B+257]),c+=R[B+257],B>7&&(S_(t,c,n[C]>>>23&31),c+=r_[B]);var q=31&n[C];k_(t,c,T[q]),c+=M[q],q>3&&(k_(t,c,n[C]>>>5&8191),c+=n_[q])}else k_(t,c,A[n[C]]),c+=R[n[C]];return k_(t,c,A[256]),c+R[256]},A_=new t_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),R_=function(e,t,r,n,i){return function(e,t,r,n,i,o){var s=e.length,a=new QC(n+s+5*(1+Math.floor(s/7e3))+i),l=a.subarray(n,a.length-i),u=0;if(!t||s<8)for(var c=0;c<=s;c+=65535){var h=c+65535;h<s?u=O_(l,u,e.subarray(c,h)):(l[c]=o,u=O_(l,u,e.subarray(c,s)))}else{for(var d=A_[t-1],p=d>>>13,f=8191&d,g=(1<<r)-1,m=new e_(32768),v=new e_(g+1),y=Math.ceil(r/3),b=2*y,w=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<b)&g},S=new t_(25e3),k=new e_(288),I=new e_(32),C=0,_=0,x=(c=0,0),O=0,E=0;c<s;++c){var A=w(c),R=32767&c,T=v[A];if(m[R]=T,v[A]=R,O<=c){var M=s-c;if((C>7e3||x>24576)&&M>423){u=E_(e,l,0,S,k,I,_,x,E,c-E,u),x=C=_=0,E=c;for(var P=0;P<286;++P)k[P]=0;for(P=0;P<30;++P)I[P]=0}var N=2,L=0,D=f,j=R-T&32767;if(M>2&&A==w(c-j))for(var U=Math.min(p,M)-1,F=Math.min(32767,c),B=Math.min(258,M);j<=F&&--D&&R!=T;){if(e[c+N]==e[c+N-j]){for(var q=0;q<B&&e[c+q]==e[c+q-j];++q);if(q>N){if(N=q,L=j,q>U)break;var z=Math.min(j,q-2),W=0;for(P=0;P<z;++P){var $=c-j+P+32768&32767,V=$-m[$]+32768&32767;V>W&&(W=V,T=$)}}}j+=(R=T)-(T=m[R])+32768&32767}if(L){S[x++]=268435456|l_[N]<<18|c_[L];var G=31&l_[N],J=31&c_[L];_+=r_[G]+n_[J],++k[257+G],++I[J],O=c+N,++C}else S[x++]=e[c],++k[e[c]]}}u=E_(e,l,o,S,k,I,_,x,E,c-E,u)}return w_(a,0,n+b_(u)+i)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,r,n,!i)};function T_(e,t){void 0===t&&(t={});var r=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,o=r.length,s=0;s!=o;){for(var a=Math.min(s+5552,o);s<a;++s)i+=n+=r[s];n%=65521,i%=65521}e=n,t=i},d:function(){return(e>>>8<<16|(255&t)<<8|t>>>8)+2*((255&e)<<23)}}}();r.p(e);var n=R_(e,t,2,4);return function(e,t){var r=t.level,n=0==r?0:r<6?1:9==r?3:2;e[0]=120,e[1]=n<<6|(n?32-2*n:1)}(n,t),function(e,t,r){for(;r;++t)e[t]=r,r>>>=8}(n,n.length-4,r.d()),n}const M_=e=>{const t={...e,v:"v1"};return function(e,t){var r="";if(!t&&"undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var n=0;n<e.length;){var i=e[n++];i<128||t?r+=String.fromCharCode(i):i<224?r+=String.fromCharCode((31&i)<<6|63&e[n++]):i<240?r+=String.fromCharCode((15&i)<<12|(63&e[n++])<<6|63&e[n++]):(i=((15&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,r+=String.fromCharCode(55296|i>>10,56320|1023&i))}return r}(T_(function(e,t){var r=e.length;if(!t&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var n=new QC(e.length+(e.length>>>1)),i=0,o=function(e){n[i++]=e},s=0;s<r;++s){if(i+5>n.length){var a=new QC(i+8+(r-s<<1));a.set(n),n=a}var l=e.charCodeAt(s);l<128||t?o(l):l<2048?(o(192|l>>>6),o(128|63&l)):l>55295&&l<57344?(o(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++s))>>>18),o(128|l>>>12&63),o(128|l>>>6&63),o(128|63&l)):(o(224|l>>>12),o(128|l>>>6&63),o(128|63&l))}return w_(n,0,i)}(JSON.stringify(t))),!0)};var P_=function(){function e(e,t,r,n){var i,o,s,a=this;this.taskQueue=[],this.isProcessing=!1,this.compressEvent=function(e){var t=M_(e);return JSON.stringify(t)},this.addCompressedEventToManager=function(e,t){a.eventsManager&&a.deviceId&&a.eventsManager.addEvent({event:{type:"replay",data:e},sessionId:t,deviceId:a.deviceId})},this.addCompressedEvent=function(e,t){if(a.worker)a.worker.postMessage({event:e,sessionId:t});else{var r=a.compressEvent(e);a.addCompressedEventToManager(r,t)}},this.terminate=function(){var e;null===(e=a.worker)||void 0===e||e.terminate()};var l=bu();this.canUseIdleCallback=l&&"requestIdleCallback"in l,this.eventsManager=e,this.config=t,this.deviceId=r,this.timeout=(null===(i=t.performanceConfig)||void 0===i?void 0:i.timeout)||2e3;var u=null!==(o={}.COMPRESSION_WEBWORKER_BODY)&&void 0!==o?o:n;if((null===(s=this.config.experimental)||void 0===s?void 0:s.useWebWorker)&&l&&l.Worker&&u){t.loggerProvider.log("[Experimental] Enabling web worker for compression");var c=new Worker(URL.createObjectURL(new Blob([u],{type:"application/javascript"})));c.onerror=function(e){t.loggerProvider.error(e)},c.onmessage=function(e){var t=e.data,r=t.compressedEvent,n=t.sessionId;a.addCompressedEventToManager(r,n)},this.worker=c}}return e.prototype.scheduleIdleProcessing=function(){var e=this;this.isProcessing||(this.isProcessing=!0,requestIdleCallback((function(t){e.processQueue(t)}),{timeout:this.timeout}))},e.prototype.enqueueEvent=function(e,t){var r;this.canUseIdleCallback&&(null===(r=this.config.performanceConfig)||void 0===r?void 0:r.enabled)?(this.config.loggerProvider.debug("Enqueuing event for processing during idle time."),this.taskQueue.push({event:e,sessionId:t}),this.scheduleIdleProcessing()):(this.config.loggerProvider.debug("Processing event without idle callback."),this.addCompressedEvent(e,t))},e.prototype.processQueue=function(e){for(var t=this;this.taskQueue.length>0&&(e.timeRemaining()>0||e.didTimeout);){var r=this.taskQueue.shift();if(r){var n=r.event,i=r.sessionId;this.addCompressedEvent(n,i)}}this.taskQueue.length>0?requestIdleCallback((function(e){t.processQueue(e)}),{timeout:this.timeout}):this.isProcessing=!1},e}(),N_=function(){function e(){var e=this;this.name="@amplitude/session-replay-browser",this.recordCancelCallback=null,this.eventCount=0,this.pageLeaveFns=[],this.teardownEventListeners=function(t){var r=bu();r&&(r.removeEventListener("blur",e.blurListener),r.removeEventListener("focus",e.focusListener),!t&&r.addEventListener("blur",e.blurListener),!t&&r.addEventListener("focus",e.focusListener),r.self&&"onpagehide"in r.self?(r.removeEventListener("pagehide",e.pageLeaveListener),!t&&r.addEventListener("pagehide",e.pageLeaveListener)):(r.removeEventListener("beforeunload",e.pageLeaveListener),!t&&r.addEventListener("beforeunload",e.pageLeaveListener)))},this.blurListener=function(){e.sendEvents()},this.focusListener=function(){e.recordEvents()},this.pageLeaveListener=function(t){e.pageLeaveFns.forEach((function(e){e(t)}))},this.addCustomRRWebEvent=function(t,r,n){return void 0===r&&(r={}),void 0===n&&(n=!0),Gl(e,void 0,void 0,(function(){var e,i,o,s;return Jl(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),e=void 0,(i=this.config)?(e={config:BI(i),version:$I},n?[4,FI()]:[3,2]):[3,2];case 1:o=a.sent(),e=Vl(Vl({},o),e),a.label=2;case 2:return this.recordCancelCallback?Lb.addCustomEvent(t,Vl(Vl({},r),e)):this.loggerProvider.debug("Not able to add custom replay capture event ".concat(t," due to no ongoing recording.")),[3,4];case 3:return s=a.sent(),this.loggerProvider.debug("Error while adding custom replay capture event: ",s),[3,4];case 4:return[2]}}))}))},this.stopRecordingEvents=function(){try{e.loggerProvider.log("Session Replay capture stopping."),e.recordCancelCallback&&e.recordCancelCallback(),e.recordCancelCallback=null}catch(r){var t=r;e.loggerProvider.warn("Error occurred while stopping replay capture: ".concat(t.toString()))}},this.loggerProvider=new iu}return e.prototype.init=function(e,t){return Su(this._init(e,t))},e.prototype._init=function(e,t){var r,n,i,o;return Gl(this,void 0,void 0,(function(){var s,a,l,u,c,h,d,p,f,g,m;return Jl(this,(function(v){switch(v.label){case 0:return this.loggerProvider=t.loggerProvider||new iu,Object.prototype.hasOwnProperty.call(t,"logLevel")&&this.loggerProvider.enable(t.logLevel),this.identifiers=new XC({sessionId:t.sessionId,deviceId:t.deviceId}),s=this,[4,zI(e,t)];case 1:return s.joinedConfigGenerator=v.sent(),a=this,[4,this.joinedConfigGenerator.generateJoinedConfig(this.identifiers.sessionId)];case 2:a.config=v.sent(),t.sessionId&&(null===(r=this.config.interactionConfig)||void 0===r?void 0:r.enabled)&&(l=HC.default({sessionId:t.sessionId,type:"interaction"},this.config),this.pageLeaveFns=[l.send(this.getDeviceId.bind(this)).bind(l)],this.scrollHook=l.hook.bind(l)),u=[],"idb"!==(c=this.config.storeType)||(null===(n=bu())||void 0===n?void 0:n.indexedDB)||(c="memory",this.loggerProvider.warn("Could not use preferred indexedDB storage, reverting to in memory option.")),this.loggerProvider.log("Using ".concat(c," for event storage.")),v.label=3;case 3:return v.trys.push([3,5,,6]),[4,AC({config:this.config,sessionId:this.identifiers.sessionId,type:"replay",storeType:c})];case 4:return h=v.sent(),u.push({name:"replay",manager:h}),[3,6];case 5:return d=v.sent(),m=d,this.loggerProvider.warn("Error occurred while creating replay events manager: ".concat(m.toString())),[3,6];case 6:if(!(null===(i=this.config.interactionConfig)||void 0===i?void 0:i.enabled))return[3,10];p=this.config.interactionConfig.batch?GC:VC,v.label=7;case 7:return v.trys.push([7,9,,10]),[4,AC({config:this.config,sessionId:this.identifiers.sessionId,type:"interaction",minInterval:null!==(o=this.config.interactionConfig.trackEveryNms)&&void 0!==o?o:3e4,maxInterval:6e4,payloadBatcher:p,storeType:c})];case 8:return f=v.sent(),u.push({name:"interaction",manager:f}),[3,10];case 9:return g=v.sent(),m=g,this.loggerProvider.warn("Error occurred while creating interaction events manager: ".concat(m.toString())),[3,10];case 10:return this.eventsManager=new(RC.bind.apply(RC,Yl([void 0],Zl(u),!1))),this.eventCompressor&&this.eventCompressor.terminate(),this.eventCompressor=new P_(this.eventsManager,this.config,this.getDeviceId()),this.loggerProvider.log("Installing @amplitude/session-replay-browser."),this.teardownEventListeners(!1),this.initialize(!0),[2]}}))}))},e.prototype.setSessionId=function(e,t){return Su(this.asyncSetSessionId(e,t))},e.prototype.asyncSetSessionId=function(e,t){return Gl(this,void 0,void 0,(function(){var r,n,i;return Jl(this,(function(o){switch(o.label){case 0:return(r=this.identifiers&&this.identifiers.sessionId)&&this.sendEvents(r),n=t||this.getDeviceId(),this.identifiers=new XC({sessionId:e,deviceId:n}),this.joinedConfigGenerator&&r?(i=this,[4,this.joinedConfigGenerator.generateJoinedConfig(this.identifiers.sessionId)]):[3,2];case 1:i.config=o.sent(),o.label=2;case 2:return this.recordEvents(),[2]}}))}))},e.prototype.getSessionReplayProperties=function(){var e,t=this.config,r=this.identifiers;if(!t||!r)return this.loggerProvider.warn("Session replay init has not been called, cannot get session replay properties."),{};var n=this.getShouldRecord(),i={};return n&&((e={})[du]=r.sessionReplayId?r.sessionReplayId:null,i=e,t.debugMode&&(i[fu]=JSON.stringify({appHash:jI(t.apiKey).toString()}))),this.addCustomRRWebEvent(tu.GET_SR_PROPS,{shouldRecord:n,eventProperties:i},10===this.eventCount),10===this.eventCount&&(this.eventCount=0),this.eventCount++,i},e.prototype.sendEvents=function(e){var t,r=e||(null===(t=this.identifiers)||void 0===t?void 0:t.sessionId),n=this.getDeviceId();this.eventsManager&&r&&n&&this.eventsManager.sendCurrentSequenceEvents({sessionId:r,deviceId:n})},e.prototype.initialize=function(e){var t;if(void 0===e&&(e=!1),null===(t=this.identifiers)||void 0===t?void 0:t.sessionId){var r=this.getDeviceId();r?(this.eventsManager&&e&&this.eventsManager.sendStoredEvents({deviceId:r}),this.recordEvents()):this.loggerProvider.log("Session is not being recorded due to lack of device id.")}else this.loggerProvider.log("Session is not being recorded due to lack of session id.")},e.prototype.shouldOptOut=function(){var e,t,r;(null===(e=this.config)||void 0===e?void 0:e.instanceName)&&(r=wu(this.config.instanceName).identityStore.getIdentity().optOut);return void 0!==r?r:null===(t=this.config)||void 0===t?void 0:t.optOut},e.prototype.getShouldRecord=function(){if(!this.identifiers||!this.config||!this.identifiers.sessionId)return this.loggerProvider.warn("Session is not being recorded due to lack of config, please call sessionReplay.init."),!1;if(!this.config.captureEnabled)return this.loggerProvider.log("Session ".concat(this.identifiers.sessionId," not being captured due to capture being disabled for project or because the remote config could not be fetched.")),!1;if(this.shouldOptOut())return this.loggerProvider.log("Opting session ".concat(this.identifiers.sessionId," out of recording due to optOut config.")),!1;var e,t,r,n=(e=this.identifiers.sessionId,t=this.config.sampleRate,r=jI(e.toString()),31*Math.abs(r)%1e6/1e6<t);return n||this.loggerProvider.log("Opting session ".concat(this.identifiers.sessionId," out of recording due to sample rate.")),n},e.prototype.getBlockSelectors=function(){var e,t,r,n=null!==(r=null===(t=null===(e=this.config)||void 0===e?void 0:e.privacyConfig)||void 0===t?void 0:t.blockSelector)&&void 0!==r?r:[];if(0!==n.length)return n},e.prototype.getMaskTextSelectors=function(){var e,t,r,n;if("conservative"===(null===(t=null===(e=this.config)||void 0===e?void 0:e.privacyConfig)||void 0===t?void 0:t.defaultMaskLevel))return"*";var i=null===(n=null===(r=this.config)||void 0===r?void 0:r.privacyConfig)||void 0===n?void 0:n.maskSelector;return i||void 0},e.prototype.recordEvents=function(){var e,t=this,r=this.config,n=this.getShouldRecord(),i=null===(e=this.identifiers)||void 0===e?void 0:e.sessionId;if(n&&i&&r){this.stopRecordingEvents();var o=r.privacyConfig,s=r.interactionConfig,a=(null==s?void 0:s.enabled)?{mouseInteraction:this.eventsManager&&JC(this.loggerProvider,{eventsManager:this.eventsManager,sessionId:i,deviceIdFn:this.getDeviceId.bind(this)}),scroll:this.scrollHook}:{};this.loggerProvider.log("Session Replay capture beginning for ".concat(i,".")),this.recordCancelCallback=Lb({emit:function(e){if(t.shouldOptOut())return t.loggerProvider.log("Opting session ".concat(i," out of recording due to optOut config.")),t.stopRecordingEvents(),void t.sendEvents();t.eventCompressor&&t.eventCompressor.enqueueEvent(e,i)},inlineStylesheet:r.shouldInlineStylesheet,hooks:a,maskAllInputs:!0,maskTextClass:gu,blockClass:"amp-block",blockSelector:this.getBlockSelectors(),maskInputFn:DI("input",o),maskTextFn:DI("text",o),maskTextSelector:this.getMaskTextSelectors(),recordCanvas:!1,errorHandler:function(e){var r=e;if(r.message.includes("insertRule")&&r.message.includes("CSSStyleSheet"))throw r;if(r._external_)throw r;return t.loggerProvider.warn("Error while capturing replay: ",r.toString()),!0}}),this.addCustomRRWebEvent(tu.DEBUG_INFO)}},e.prototype.getDeviceId=function(){var e;return null===(e=this.identifiers)||void 0===e?void 0:e.deviceId},e.prototype.getSessionId=function(){var e;return null===(e=this.identifiers)||void 0===e?void 0:e.sessionId},e.prototype.flush=function(e){var t;return void 0===e&&(e=!1),Gl(this,void 0,void 0,(function(){return Jl(this,(function(r){return[2,null===(t=this.eventsManager)||void 0===t?void 0:t.flush(e)]}))}))},e.prototype.shutdown=function(){this.teardownEventListeners(!0),this.stopRecordingEvents(),this.sendEvents()},e}(),L_=function(e){return function(){var t=e.config||vu();return{logger:t.loggerProvider,logLevel:t.logLevel}}};const D_=(j_=new N_,{init:zl(j_.init.bind(j_),"init",L_(j_)),setSessionId:zl(j_.setSessionId.bind(j_),"setSessionId",L_(j_)),getSessionId:zl(j_.getSessionId.bind(j_),"getSessionId",L_(j_)),getSessionReplayProperties:zl(j_.getSessionReplayProperties.bind(j_),"getSessionReplayProperties",L_(j_)),flush:zl(j_.flush.bind(j_),"flush",L_(j_)),shutdown:zl(j_.shutdown.bind(j_),"shutdown",L_(j_))});var j_,U_=D_.init,F_=D_.setSessionId,B_=D_.getSessionId,q_=D_.getSessionReplayProperties,z_=D_.shutdown,W_="1.12.0",$_=function(){function e(e){this.name="@amplitude/plugin-session-replay-browser",this.type="enrichment",this.options=Ul({},e),!1!==this.options.forceSessionTracking&&(this.options.forceSessionTracking=!0)}return e.prototype.setup=function(e){var t,r,n,i;return Fl(this,void 0,void 0,(function(){var o;return Bl(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),e.loggerProvider.log("Installing @amplitude/plugin-session-replay, version ".concat(W_,".")),this.config=e,this.options.forceSessionTracking&&("boolean"==typeof e.defaultTracking?!1===e.defaultTracking&&(e.defaultTracking={pageViews:!1,formInteractions:!1,fileDownloads:!1,sessions:!0}):e.defaultTracking=Ul(Ul({},e.defaultTracking),{sessions:!0})),[4,U_(e.apiKey,{instanceName:this.config.instanceName,deviceId:this.config.deviceId,optOut:this.config.optOut,sessionId:this.options.customSessionId?void 0:this.config.sessionId,loggerProvider:this.config.loggerProvider,logLevel:this.config.logLevel,flushMaxRetries:this.config.flushMaxRetries,serverZone:this.config.serverZone,configServerUrl:this.options.configServerUrl,trackServerUrl:this.options.trackServerUrl,sampleRate:this.options.sampleRate,privacyConfig:{blockSelector:null===(t=this.options.privacyConfig)||void 0===t?void 0:t.blockSelector,maskSelector:null===(r=this.options.privacyConfig)||void 0===r?void 0:r.maskSelector,unmaskSelector:null===(n=this.options.privacyConfig)||void 0===n?void 0:n.unmaskSelector,defaultMaskLevel:null===(i=this.options.privacyConfig)||void 0===i?void 0:i.defaultMaskLevel},debugMode:this.options.debugMode,shouldInlineStylesheet:this.options.shouldInlineStylesheet,version:{type:"plugin",version:W_},performanceConfig:this.options.performanceConfig,storeType:this.options.storeType,experimental:this.options.experimental}).promise];case 1:return s.sent(),[3,3];case 2:return o=s.sent(),e.loggerProvider.error("Session Replay: Failed to initialize due to ".concat(o.message)),[3,3];case 3:return[2]}}))}))},e.prototype.execute=function(e){return Fl(this,void 0,void 0,(function(){var t,r,n;return Bl(this,(function(i){switch(i.label){case 0:return i.trys.push([0,8,,9]),this.options.customSessionId?(t=this.options.customSessionId(e))?t===B_()?[3,2]:[4,F_(t).promise]:[3,3]:[3,4];case 1:i.sent(),i.label=2;case 2:r=q_(),e.event_properties=Ul(Ul({},e.event_properties),r),i.label=3;case 3:return[3,7];case 4:return(t=this.config.sessionId)&&t!==B_()?[4,F_(t).promise]:[3,6];case 5:i.sent(),i.label=6;case 6:t&&t===e.session_id&&(r=q_(),e.event_properties=Ul(Ul({},e.event_properties),r)),i.label=7;case 7:return[2,Promise.resolve(e)];case 8:return n=i.sent(),this.config.loggerProvider.error("Session Replay: Failed to enrich event due to ".concat(n.message)),[2,Promise.resolve(e)];case 9:return[2]}}))}))},e.prototype.teardown=function(){return Fl(this,void 0,void 0,(function(){return Bl(this,(function(e){try{z_(),this.config=null}catch(e){this.config.loggerProvider.error("Session Replay: teardown failed due to ".concat(e.message))}return[2]}))}))},e.prototype.getSessionReplayProperties=function(){return q_()},e}();const V_=(e={})=>{const t={};return Object.keys(e).forEach((r=>{var n;t[r]=e[r],"client_current_url"===r&&(t.client_uri_path=(n=e[r],new URL(n).pathname))})),t},G_=e=>{let t={};const r=e.track.bind(e);return e.amplitudeInit=(e,t,r={})=>{if((()=>{const e="__localstorageavailabletest__";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}})()){Ll(e,t);const n=new $_(r);Pl(n)}},e.amplitudeConfigure=(e,r,n={})=>{e&&Dl(e);const i=new En;Object.keys(r).forEach((e=>{i.set(e,r[e])})),Nl(i),t={...n}},e.track=(e,n={},i)=>{const o=r(e,{...n,...t},i);if(!o)return console.error("Alooma eventstream.track() did not return any data; skipping Amplitude tracking."),o;const{event:s,properties:a}=o;if(!a.observability_only){const e=((e={})=>{const t={$os:"client_os",$browser:"client_browser",$current_url:"client_current_url",$browser_version:"client_browser_version",$screen_height:"client_screen_height",$screen_width:"client_screen_width",$search_engine:"client_search_engine",$initial_referrer:"client_initial_referrer",$initial_referring_domain:"initial_referring_domain",$referrer:"client_referrer",$referring_domain:"referring_domain",timezone_offset:"client_timezone_offset",user_agent:"client_user_agent",pageCategory:"page_category",messageId:"message_id"},r={};return Object.keys(e).forEach((n=>{const i=t[n]||n,o=e[n];r[i]=o})),r})(((e={})=>{const t=["$lib_version","environment","mp_page","mp_lib","mp_browser","mp_platform","eh","token"],r={};return Object.keys(e).forEach((n=>{t.includes(n)||(r[n]=e[n])})),r})(a));((e,t={})=>{window.Rover?.eventstreamEnableAmplitude&&jl("mp_page_view"!==e?e:"page-view",t)})(s,V_(e))}return o},e},J_=e=>{const t=e.track.bind(e),r=e.track_pageview.bind(e);return e.track=(e,r={},n)=>{const i=window?.Rover?.pageCategory;return t(e,{...r,...i?{pageCategory:i}:{}},n)},e.track_pageview=e=>{const t=window?.Rover?.pageCategory;return r(e,{...t?{pageCategory:t}:{}})},e};{const e=()=>{Vr("eventstream"),window.eventstream=J_((e=>{const t=e.track.bind(e),r=e.track_pageview.bind(e);return e.track=(e,r={},n)=>{const i=$r();return t(e,{...r,messageId:i},n)},e.track_pageview=e=>{const t=$r();return r(e,{messageId:t})},e})(G_(window.eventstream))),window.alooma=window.eventstream,window.eventstream.execute_preload_calls(window.Rover?.bootloaderCalls||[])};e()}})()})();
//# sourceMappingURL=eventstream-v0.0.13.js.map